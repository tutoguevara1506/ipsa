<?xml version='1.0' encoding='ISO-8859-1' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

    <h:head>
        <title>IPSA</title>
        <h:outputStylesheet library="css" name="estilo.css"/>
        <script type="text/javascript" src="anfora.js"/>
        <script type="text/javascript" src="es.js"/>

    </h:head>
    <h:body id="mBody" onload="PF('bar').show()" >

        <!--********************************************************************
        ************************** Barra de Menú *******************************
        *********************************************************************-->

        <h:form id="frmMadre">

            <p:menubar id="menumadre">

                <p:submenu label="Catálogos" icon="ui-icon-folder-open">
                    <p:menuitem value="Departamentos" icon="ui-icon-home" 
                                onclick="PF('wDepartamentos').show()"
                                update=":frmDepartamentos"
                                style="width: 125px;"
                                actionListener="#{manDepartamentos.iniciarventana()}"
                                disabled="#{manSeguridad.disableOpt('menuDeptos')}"
                                />
                    <p:menuitem value="Unidades" icon="ui-icon-bookmark" 
                                onclick="PF('wUniMed').show()"
                                update=":frmUniMed"
                                style="width: 125px;"
                                actionListener="#{manUniMed.iniciarventana()}"
                                disabled="#{manSeguridad.disableOpt('menuUnidades')}"
                                />
                     <p:menuitem value="Movimientos" icon="ui-icon-arrowthick-2-n-s" 
                                onclick="PF('wMov').show()"
                                update=":frmMov"
                                style="width: 125px;"
                                actionListener="#{manMovimientos.iniciarventana()}"
                                disabled="#{manSeguridad.disableOpt('menuMovimientos')}"
                                />
                    <p:menuitem value="Bodegas" icon="ui-icon-home" 
                                onclick="PF('wPaises').show()"
                                update=":frmPaises"
                                style="width: 125px;"
                                actionListener="#{manPaises.iniciarventana()}"
                                disabled="#{manSeguridad.disableOpt('menuBodegas')}"
                                />
                    <p:menuitem value="Estantes" icon="ui-icon-flag" 
                                onclick="PF('wBod').show()"
                                update=":frmBod"
                                actionListener="#{manBodegas.iniciarventana()}"
                                disabled="#{manSeguridad.disableOpt('menuEstantes')}"
                                />
                    <p:menuitem value="Repisas" icon="ui-icon-notice" 
                                onclick="PF('wUbi').show()"
                                update=":frmUbi"
                                style="width: 125px;"
                                actionListener="#{manUbicaciones.iniciarventana()}"
                                disabled="#{manSeguridad.disableOpt('menuRepisas')}"
                                />
                    <p:menuitem value="Proveedores" icon="ui-icon-person" 
                                onclick="PF('wPro').show()"
                                style="width: 125px;"
                                action="#{manProveedores.iniciarventana()}" 
                                disabled="#{manSeguridad.disableOpt('menuProveedores')}"
                                update=":frmPro"
                                />
                    <p:menuitem value="Marcas" icon="ui-icon-tag" 
                                onclick="PF('wMarca').show()"
                                style="width: 125px;"
                                action="#{manMarcas.iniciarventana()}" 
                                update=":frmMarca"
                                disabled="#{manSeguridad.disableOpt('menuMarcas')}"
                                />
                    <p:menuitem value="Tipología Mant." icon="ui-icon-wrench" 
                                onclick="PF('wTipMan').show()"
                                style="width: 125px;"
                                action="#{manTipos.iniciarventana()}" 
                                update=":frmTipMan"
                                disabled="#{manSeguridad.disableOpt('menuTipoMtto')}"
                                />
                    <p:menuitem value="Categorías Piezas" icon="ui-icon-note" 
                                onclick="PF('wCatPie').show()"
                                style="width: 125px;"
                                action="#{manCategorias.iniciarventana()}" 
                                update=":frmCatPie"
                                disabled="#{manSeguridad.disableOpt('menuCategoriaPiezas')}"
                                />
                    <p:menuitem value="Operaciones" icon="ui-icon-wrench" 
                                onclick="PF('wOpe').show()"
                                style="width: 125px;"
                                action="#{manOperaciones.iniciarventana()}" 
                                update=":frmOpe"
                                disabled="#{manSeguridad.disableOpt('menuOperaciones')}"
                                />
                    <p:menuitem value="Equipos" icon="ui-icon-gear" 
                                onclick="PF('wEquipos').show()"
                                style="width: 125px;"
                                action="#{manEquipos.iniciarventana()}" 
                                update=":frmEquipos"
                                disabled="#{manSeguridad.disableOpt('menuEquipos')}"
                                />
                    <p:menuitem value="Piezas" icon="ui-icon-pin-s" 
                                onclick="PF('wPiezas').show()"
                                style="width: 125px;"
                                action="#{manPiezas.iniciarventana()}" 
                                update=":frmPiezas"
                                disabled="#{manSeguridad.disableOpt('menuPiezas')}"
                                />
                    <p:menuitem value="Cargos Personal" icon="ui-icon-contact" 
                                onclick="PF('wCargo').show()"
                                style="width: 125px;"
                                action="#{manCargos.iniciarventana()}" 
                                update=":frmCargo"
                                disabled="#{manSeguridad.disableOpt('menuCargos')}"
                                />
                    <p:menuitem value="Personal" icon="ui-icon-person" 
                                onclick="PF('wPersonal').show()"
                                style="width: 125px;"
                                action="#{manPersonas.iniciarventana()}" 
                                update=":frmPersonal"
                                disabled="#{manSeguridad.disableOpt('menuPersonal')}"
                                />
                </p:submenu>

                <p:submenu label="Mantenimiento" icon="ui-icon-wrench">
                    <p:submenu label="Solicitar Piezas" icon="ui-icon-pencil">
                        <p:menuitem value="Nueva Solicitud" icon="ui-icon-document" 
                                    onclick="PF('wSol').show()"
                                    update=":frmSol"
                                    style="width: 125px;"
                                    actionListener="#{manSolicitudes.iniciarventana()}"
                                    disabled="#{manSeguridad.disableOpt('menuNuevaSolicitud')}"
                                    />

                        <p:menuitem value="Estado Solicitud" icon="ui-icon-help" 
                                    onclick="PF('wEstado').show()"
                                    update=":frmEstado"
                                    style="width: 125px;"
                                    actionListener="#{manEstado.iniciarventana()}"
                                    disabled="#{manSeguridad.disableOpt('menuEstadoSolicitud')}"
                                    />
                    </p:submenu>
                    <p:menuitem value="Detalle Equipo" icon="ui-icon-gear" 
                                onclick="PF('wListaEquipos').show()"
                                style="width: 125px;"
                                update=":frmListaEquipos"
                                actionListener="#{manListaEquipos.iniciarventana()}"
                                disabled="#{manSeguridad.disableOpt('menuDetalleEquipo')}"
                                />
                    <p:menuitem value="Mantenimientos" icon="ui-icon-wrench" 
                                onclick="PF('wMaestra').show()"
                                style="width: 125px;"
                                update=":frmMaestra"
                                actionListener="#{manMaestroMan.iniciarventana()}"
                                disabled="#{manSeguridad.disableOpt('menuMattoMaestro')}"
                                />
                </p:submenu>

                <p:submenu label="Compras" icon="ui-icon-cart">
                    <p:menuitem value="Aprobaciones" icon="ui-icon-check" 
                                onclick="PF('wAprobado').show()"
                                update=":frmAprobado"
                                style="width: 125px;"
                                actionListener="#{manAprobacion.iniciarventana()}"
                                disabled="#{manSeguridad.disableOpt('menuAprovaciones')}"
                                />

                    <p:menuitem value="Modificaciones" icon="ui-icon-wrench" 
                                onclick="PF('wModificaciones').show()"
                                update=":frmModificaciones"
                                style="width: 125px;"
                                actionListener="#{manModificaciones.iniciarventana()}"
                                disabled="#{manSeguridad.disableOpt('menuModificaciones')}"
                                />

                    <p:menuitem value="Dar Seguimiento" icon="ui-icon-search" 
                                onclick="PF('wSeguimiento').show()"
                                update=":frmSeguimiento"
                                style="width: 125px;"
                                actionListener="#{manSeguimiento.iniciarventana()}"
                                disabled="#{manSeguridad.disableOpt('menuSeguimiento')}"
                                />

                    <p:menuitem value="Histórico" icon="ui-icon-clock" 
                                onclick="PF('wHistorico').show()"
                                update=":frmHistorico"
                                style="width: 125px;"
                                actionListener="#{manHistorico.iniciarventana()}"
                                disabled="#{manSeguridad.disableOpt('menuHistorico')}"
                                />
                </p:submenu>

                <p:submenu label="Almacén" icon="ui-icon-home">
                    <p:menuitem value="Inventario Piezas" icon="ui-icon-suitcase" 
                                onclick="PF('wListaPiezas').show()"
                                update=":frmListaPiezas"
                                style="width: 125px;"
                                actionListener="#{manTblPiezas.iniciarventana()}"
                                disabled="#{manSeguridad.disableOpt('menuInventarioPiezas')}"
                                />
                </p:submenu>

                <p:submenu label="Reportes" icon="ui-icon-print">

                </p:submenu>

                <p:submenu label="Seguridad" icon="ui-icon-wrench">
                    <p:menuitem value="Usuarios" icon="ui-icon-person"
                                id="menuUsuarios"
                                onclick="PF('wUsuarios').show()"
                                update=":frmUsuarios"
                                actionListener="#{manUsuarios.iniciarventana()}"
                                style="width: 190px;"
                                disabled="#{manSeguridad.disableOpt('menuUsuarios')}"
                                />
                    <p:menuitem value="Grupos de seguridad" icon="ui-icon-suitcase" 
                                id="menuGruposSeg"
                                onclick="PF('wGrupo').show()"
                                update=":frmGrupo"
                                actionListener="#{manGrupos.iniciarventana()}"
                                style="width: 190px;"
                                disabled="#{manSeguridad.disableOpt('menuGruposSeg')}"
                                />
                    <p:menuitem value="Catalogo Controles" icon="ui-icon-flag" 
                                id="menuCatCtrl"
                                onclick="PF('wControl').show()"
                                update=":frmControl"
                                actionListener="#{manControles.iniciarventana()}"
                                style="width: 190px;"
                                disabled="#{manSeguridad.disableOpt('menuCatCtrl')}"
                                />
                         
                    <p:menuitem value="Asignación Usuarios-Grupos" icon="ui-icon-pin-s" 
                                id="menuAsigUsrGrp"
                                onclick="PF('wUsrGrp').show()"
                                update=":frmUsrGrp"
                                actionListener="#{manUserGroup.iniciarventana()}"
                                style="width: 190px;"
                                disabled="#{manSeguridad.disableOpt('menuAsigUsrGrp')}"
                                />
                    <p:menuitem value="Asignacion de derechos" icon="ui-icon-locked" 
                                id="menuAsigDerechos"
                                onclick="PF('wSecurity').show()"
                                update=":frmSecurity"
                                actionListener="#{manSeguridad.iniciarventana()}"
                                style="width: 190px;"
                                disabled="#{manSeguridad.disableOpt('menuAsigDerechos')}"
                                />
                    <p:menuitem value="Control de  alertas" icon="ui-icon-alert" 
                                id="menuControlAlertas"
                                onclick="PF('wEstado').show()"
                                update=":frmUsuarios"
                                actionListener="#{manUsuarios.iniciarventana()}"
                                style="width: 190px;"
                                disabled="#{manSeguridad.disableOpt('menuControlAlertas')}"
                                />
                </p:submenu>
                <f:facet name="options">
                    <p:commandButton value="Logout" icon="ui-icon-extlink"
                                     actionListener="#{login.endConversation()}"
                                     update=":frmMadre"
                                     action="index?faces-redirect=true"
                                     />
                </f:facet>
            </p:menubar>

            <h:panelGrid columns="1" style="margin: 0 auto;">
                <h:graphicImage id="logo" value="logo.png" 
                                style="position: absolute; top:0;left:0;right:0;bottom:0;margin: auto;"
                                width="60%;" height="50%;"
                                />
            </h:panelGrid>

        </h:form>

        <!--******************************************************************** 
        *************************Barra Notificación ****************************
        *********************************************************************-->

        <h:form id="frmNB"> 
            <p:notificationBar id="nbMadre" position="bottom" effect="slide" 
                               widgetVar="bar" >

                <h:panelGrid  columns="3" cellpadding="5">
                    <h:outputText value="USUARIO: &lt;font color='red'&gt; #{login.det_nom} &lt;/font&gt;&lt;br /&gt;DEPARTAMENTO: &lt;font color='red'&gt; #{login.nomdep} &lt;/font&gt;"
                                  escape="false"
                                  style="font-size:24px;position: absolute; top:15%;right:45%;bottom:0;margin: auto; "
                                  />

                    <h:graphicImage  id="cclogo" value="/nube.gif" width="130" height="120" 
                                     style=" position: absolute; top:0;right:10%;bottom:0;margin: auto; "/>
                </h:panelGrid>
            </p:notificationBar>
        </h:form>

        <!-- *******************************************************************
        **************** Pantalla mantenimiento de usuarios ********************
        *********************************************************************-->

        <p:dialog  id="dlgUsuarios" widgetVar="wUsuarios" modal="true" 
                   width="500" height="470" closable="false" resizable="false" 
                   header="Mantenimiento Usuarios" rendered="true" 
                   dynamic="true" visible="false" 
                   >

            <h:form id="frmUsuarios"> 
                <p:growl id="msgUsuarios" showDetail="true" life="4500"/>
                <p:toolbar>
                    <f:facet name="left">
                        <p:commandButton value="Nuevo" style=" width: 100px;"
                                         actionListener="#{manUsuarios.nuevo()}"
                                         update=":frmUsuarios"
                                         icon="ui-icon-document"
                                         />
                        <p:commandButton value="Guardar" style=" width: 100px;"
                                         action="#{manUsuarios.guardar()}"
                                         update=":frmUsuarios"
                                         icon="ui-icon-disk"
                                         />
                        <p:commandButton value="Eliminar" style=" width: 100px;"
                                         actionListener="#{manUsuarios.eliminar()}"
                                         update=":frmUsuarios"
                                         icon="ui-icon-trash"
                                         >
                            <p:confirm header="Eliminar Registro" 
                                       message="¿Realmente desea eliminar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Cerrar" style=" width: 100px;"
                                         onclick="PF('wUsuarios').hide()"
                                         action="#{manUsuarios.cerrarventana()}" 
                                         update=":frmUsuarios"
                                         icon="ui-icon-close"
                                         />
                        <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                            <p:commandButton value="Sí" type="button" 
                                             styleClass="ui-confirmdialog-yes" 
                                             icon="ui-icon-check" />
                            <p:commandButton value="No" type="button" 
                                             styleClass="ui-confirmdialog-no" 
                                             icon="ui-icon-close" />
                        </p:confirmDialog>
                    </f:facet>
                </p:toolbar>
                <div style=" background-color: #ebf8fe;">
                    <h:panelGrid columns="2" cellpadding="5">
                        <h:outputText value="Usuario" style="font-weight:bold;" />
                        <p:inputText maxlength="15" size="17" value="#{manUsuarios.nom_usu}" 
                                     onfocus="this.select()"/>
                        <h:outputText value="Contraseña" style="font-weight:bold;" />
                        <p:password maxlength="15" size="17" value="#{manUsuarios.des_pas}" 
                                    onfocus="this.select()"/>
                        <h:outputText value="Tipo Usuario" style="font-weight:bold;" />
                        <p:selectOneMenu value="#{manUsuarios.tip_usu}" style=" width: 150px;">
                            <f:selectItem itemLabel="Usuario" itemValue="0"/>
                            <f:selectItem itemLabel="Usuario Avanzado" itemValue="6"/>
                            <f:selectItem itemLabel="Administrador" itemValue="7"/>
                        </p:selectOneMenu>
                        <h:outputText value="Nombre" style="font-weight:bold;" />
                        <p:inputText maxlength="125" size="45" value="#{manUsuarios.det_nom}" 
                                     onfocus="this.select()"/>
                        <h:outputText value="Correo" style="font-weight:bold;" />
                        <p:inputText maxlength="50" size="45" value="#{manUsuarios.det_mai}" 
                                     onfocus="this.select()"/>
                        <h:outputText value="País" style="font-weight:bold;" />
                        <p:selectOneMenu value="#{manUsuarios.cod_pai}" style=" width: 150px;">
                            <f:selectItem itemLabel="Ninguno" itemValue="0"/>
                            <f:selectItems value="#{manUsuarios.paises}" var="mpaiusu"
                                           itemLabel="#{mpaiusu.nom_pai}" itemValue="#{mpaiusu.cod_pai}"/> 
                        </p:selectOneMenu>
                        <h:outputText value="Departamento" style="font-weight:bold;" />
                        <p:selectOneMenu value="#{manUsuarios.cod_dep}" style=" width: 150px;">
                            <f:selectItem itemLabel="Ninguno" itemValue="0"/>
                            <f:selectItems value="#{manUsuarios.departamentos}" var="mdepusu"
                                           itemLabel="#{mdepusu.nom_dep}" itemValue="#{mdepusu.cod_dep}"/> 
                        </p:selectOneMenu>
                    </h:panelGrid>
                    <p:dataTable id="dtUsuarios" var="vUsu" 
                                 value="#{manUsuarios.usuarios}" 
                                 emptyMessage="No se encontraron resultados" 
                                 selectionMode="single" selection="#{manUsuarios.catusuarios}" 
                                 rowKey="#{vUsu.cod_usu}"
                                 editable="false" 
                                 style="width:475px"
                                 scrollable="true"
                                 scrollHeight="115"
                                 >
                        <p:ajax event="rowSelect" listener="#{manUsuarios.onRowSelect}" 
                                update=":frmUsuarios" />

                        <p:column style="width:50px" headerText="Usuario">
                            <h:outputText value="#{vUsu.nom_usu}" />
                        </p:column>
                        <p:column style="width:100px" headerText="Departamento">
                            <h:outputText value="#{vUsu.nomdep}" />
                        </p:column>
                        <p:column style="width:200px" headerText="Nombre">
                            <h:outputText value="#{vUsu.det_nom}" />
                        </p:column>
                    </p:dataTable>
                </div>

            </h:form>
        </p:dialog>  

        <!-- *******************************************************************
        **************** Pantalla mantenimiento de Bodegas ********************
        *********************************************************************-->

        <p:dialog  id="dlgPaises" widgetVar="wPaises" modal="true" 
                   width="500" height="300" closable="false" resizable="false" 
                   header="Mantenimiento Bodegas" rendered="true" 
                   dynamic="true" visible="false" 
                   >

            <h:form id="frmPaises"> 
                <p:growl id="msgPaises" showDetail="true" life="4500"/>
                <p:toolbar>
                    <f:facet name="left">
                        <p:commandButton value="Nuevo" style=" width: 100px;"
                                         actionListener="#{manPaises.nuevo()}"
                                         update=":frmPaises"
                                         icon="ui-icon-document"
                                         />
                        <p:commandButton value="Guardar" style=" width: 100px;"
                                         action="#{manPaises.guardar()}"
                                         update=":frmPaises"
                                         icon="ui-icon-disk"
                                         />
                        <p:commandButton value="Eliminar" style=" width: 100px;"
                                         actionListener="#{manPaises.eliminar()}"
                                         update=":frmPaises"
                                         icon="ui-icon-trash"
                                         >
                            <p:confirm header="Eliminar Registro" 
                                       message="¿Realmente desea eliminar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Cerrar" style=" width: 100px;"
                                         onclick="PF('wPaises').hide()"
                                         action="#{manPaises.cerrarventana()}" 
                                         update=":frmPaises"
                                         icon="ui-icon-close"
                                         />
                        <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                            <p:commandButton value="Sí" type="button" 
                                             styleClass="ui-confirmdialog-yes" 
                                             icon="ui-icon-check" />
                            <p:commandButton value="No" type="button" 
                                             styleClass="ui-confirmdialog-no" 
                                             icon="ui-icon-close" />
                        </p:confirmDialog>
                    </f:facet>
                </p:toolbar>
                <div style=" background-color: #ebf8fe;">
                    <h:panelGrid columns="2" cellpadding="5">
                        <h:outputText value="Nombre" style="font-weight:bold;" />
                        <p:inputText maxlength="20" size="60" value="#{manPaises.nom_pai}" 
                                     onfocus="this.select()"/>
                    </h:panelGrid>
                    <p:dataTable id="dtPaises" var="vPai" 
                                 value="#{manPaises.paises}" 
                                 emptyMessage="No se encontraron resultados" 
                                 selectionMode="single" selection="#{manPaises.catpaises}" 
                                 rowKey="#{vPai.cod_pai}"
                                 editable="false" 
                                 style="width:475px"
                                 scrollable="true"
                                 scrollHeight="190"
                                 >
                        <p:ajax event="rowSelect" listener="#{manPaises.onRowSelect}" 
                                update=":frmPaises" />

                        <p:column style="width:50px" headerText="Nombre Bodega">
                            <h:outputText value="#{vPai.nom_pai}" />
                        </p:column>
                    </p:dataTable>
                </div>

            </h:form>
        </p:dialog>  

        <!-- *******************************************************************
        ************** Pantalla mantenimiento de Departamentos *****************
        *********************************************************************-->

        <p:dialog  id="dlgDepartamentos" widgetVar="wDepartamentos" modal="true" 
                   width="440" height="320" closable="false" resizable="false" 
                   header="Mantenimiento Departamentos" rendered="true" 
                   dynamic="true" visible="false" 
                   >

            <h:form id="frmDepartamentos"> 
                <p:growl id="msgDepartamentos" showDetail="true" life="4500"/>
                <p:toolbar>
                    <f:facet name="left">
                        <p:commandButton value="Nuevo" style=" width: 100px;"
                                         actionListener="#{manDepartamentos.nuevo()}"
                                         update=":frmDepartamentos"
                                         icon="ui-icon-document"
                                         />
                        <p:commandButton value="Guardar" style=" width: 100px;"
                                         action="#{manDepartamentos.guardar()}"
                                         update=":frmDepartamentos"
                                         icon="ui-icon-disk"
                                         />

                        <p:commandButton value="Eliminar" style=" width: 100px;"
                                         actionListener="#{manDepartamentos.eliminar()}"
                                         update=":frmDepartamentos"
                                         icon="ui-icon-trash"
                                         >
                            <p:confirm header="Eliminar Registro" 
                                       message="¿Realmente desea eliminar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Cerrar" style=" width: 100px;"
                                         onclick="PF('wDepartamentos').hide()"
                                         action="#{manDepartamentos.cerrarventana()}" 
                                         update=":frmDepartamentos"
                                         icon="ui-icon-close"
                                         />

                        <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                            <p:commandButton value="Sí" type="button" 
                                             styleClass="ui-confirmdialog-yes" 
                                             icon="ui-icon-check" />
                            <p:commandButton value="No" type="button" 
                                             styleClass="ui-confirmdialog-no" 
                                             icon="ui-icon-close" />
                        </p:confirmDialog>
                    </f:facet>
                </p:toolbar>
                <div style=" background-color: #ebf8fe;">
                    <h:panelGrid columns="2" cellpadding="5">
                        <h:outputText value="Nombre" style="font-weight:bold;" />
                        <p:inputText maxlength="20" size="45" value="#{manDepartamentos.nom_dep}" 
                                     onfocus="this.select()"/>
                    </h:panelGrid>
                    <p:dataTable id="dtDepartamentos" var="vDep" 
                                 value="#{manDepartamentos.departamentos}" 
                                 emptyMessage="No se encontraron resultados" 
                                 selectionMode="single" selection="#{manDepartamentos.catdepartamentos}" 
                                 rowKey="#{vDep.cod_dep}"
                                 editable="false" 
                                 style="width:415px"
                                 scrollable="true"
                                 scrollHeight="200"
                                 >
                        <p:ajax event="rowSelect" listener="#{manDepartamentos.onRowSelect}" 
                                update=":frmDepartamentos" />

                        <p:column style="width:50px" headerText="Departamento">
                            <h:outputText value="#{vDep.nom_dep}" />
                        </p:column>

                    </p:dataTable>
                </div>

            </h:form>
        </p:dialog>  

        <!--******************************************************************** 
        **************** Pantalla mantenimiento de Marcas **********************
        *********************************************************************-->

        <p:dialog  id="dlgMarca" widgetVar="wMarca" modal="true" 
                   width="460" height="290" closable="false" resizable="false" 
                   header="Mantenimiento de Marca" rendered="true" 
                   dynamic="false" visible="false" 
                   >

            <h:form id="frmMarca"> 
                <p:growl id="msgMarca" showDetail="true" life="4500"/>
                <p:toolbar>
                    <f:facet name="left">
                        <p:commandButton value="Nuevo" style=" width: 100px;"
                                         actionListener="#{manMarcas.nuevo()}"
                                         update=":frmMarca"
                                         icon="ui-icon-document"
                                         />
                        <p:commandButton value="Guardar" style=" width: 100px;"
                                         actionListener="#{manMarcas.guardar()}"
                                         update=":frmMarca"
                                         icon="ui-icon-disk"
                                         > 
                            <p:confirm header="Guardar Registro" 
                                       message="¿Realmente desea Guardar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Eliminar" style=" width: 100px;"
                                         actionListener="#{manMarcas.eliminar()}"
                                         update=":frmMarca"
                                         icon="ui-icon-trash"
                                         >
                            <p:confirm header="Eliminar Registro" 
                                       message="¿Realmente desea eliminar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Cerrar" style=" width: 100px;"
                                         onclick="PF('wMarca').hide()"
                                         actionListener="#{manMarcas.cerrarventana()}"
                                         update=":frmMarca"
                                         icon="ui-icon-close"
                                         />
                        <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                            <p:commandButton value="Sí" type="button" 
                                             styleClass="ui-confirmdialog-yes" 
                                             icon="ui-icon-check" />
                            <p:commandButton value="No" type="button" 
                                             styleClass="ui-confirmdialog-no" 
                                             icon="ui-icon-close" />
                        </p:confirmDialog>
                    </f:facet>
                </p:toolbar>

                <p:panel>
                    <div style=" background-color:  #ebf8fe;">
                        <p:focus for="txtnombremarca" />
                        <h:panelGrid columns="2" cellpadding="5">
                            <h:outputText value="Nombre" style="font-weight:bold;"/>
                            <p:inputText id="txtnombremarca" 
                                         size="50"
                                         maxlength="50"
                                         value="#{manMarcas.nom_mar}"
                                         onfocus="this.select()"
                                         />
                        </h:panelGrid>
                    </div>
                </p:panel>

                <p:panel>
                    <p:dataTable id="dtMarca" var="vMarca" 
                                 value="#{manMarcas.marcas}" 
                                 emptyMessage="No se encontraron resultados" 
                                 selectionMode="single" selection="#{manMarcas.catmarcas}" 
                                 rowKey="#{vMarca.id_mar}"
                                 editable="false" 
                                 scrollable="true"
                                 scrollHeight="120"
                                 style="width:400px"
                                 >
                        <p:ajax event="rowSelect" listener="#{manMarcas.onRowSelect}" 
                                update=":frmMarca"/>
                        <p:ajax event="rowUnselect"/>

                        <p:column style="width:30px" headerText="Id">
                            <h:outputText value="#{vMarca.id_mar}" />
                        </p:column>
                        <p:column style="width:300px" headerText="Nombre">
                            <h:outputText value="#{vMarca.nom_mar}" />
                        </p:column>
                    </p:dataTable>
                </p:panel>
            </h:form>
        </p:dialog>

        <!--********************************************************************
        ******************* Mantenimiento Unidades Medida **********************
        *********************************************************************-->

        <p:dialog  id="dlgUniMed" widgetVar="wUniMed" modal="true" 
                   width="500" height="380" closable="false" resizable="false" 
                   header="Mantenimiento de Unidades de Medida" rendered="true" 
                   dynamic="false" 
                   >

            <h:form id="frmUniMed"> 
                <p:growl id="msgUniMed" showDetail="true" life="4500"/>
                <p:toolbar>
                    <f:facet name="left">
                        <p:commandButton value="Nuevo" style=" width: 100px;"
                                         actionListener="#{manUniMed.nuevo()}"
                                         update=":frmUniMed"
                                         icon="ui-icon-document"
                                         />
                        <p:commandButton value="Guardar" style=" width: 100px;"
                                         actionListener="#{manUniMed.guardar()}"
                                         update=":frmUniMed"
                                         icon="ui-icon-disk"
                                         > 
                            <p:confirm header="Guardar Registro" 
                                       message="¿Realmente desea Guardar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Eliminar" style=" width: 100px;"
                                         actionListener="#{manUniMed.eliminar()}"
                                         update=":frmUniMed"
                                         icon="ui-icon-trash"
                                         >
                            <p:confirm header="Eliminar Registro" 
                                       message="¿Realmente desea eliminar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Cerrar" style=" width: 100px;"
                                         onclick="PF('wUniMed').hide()"
                                         actionListener="#{manUniMed.cerrarventana()}"
                                         update=":frmUniMed"
                                         icon="ui-icon-close"
                                         />
                        <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                            <p:commandButton value="Sí" type="button" 
                                             styleClass="ui-confirmdialog-yes" 
                                             icon="ui-icon-check" />
                            <p:commandButton value="No" type="button" 
                                             styleClass="ui-confirmdialog-no" 
                                             icon="ui-icon-close" />
                        </p:confirmDialog>
                    </f:facet>

                </p:toolbar>
                <p:panel>
                    <div style=" background-color: #ebf8fe;">
                        <p:focus for="txtabreviaturaunimed" />
                        <h:panelGrid columns="2" cellpadding="5">
                            <h:outputText value="Abreviatura" style="font-weight:bold;"/>
                            <p:inputText id="txtabreviaturaunimed" 
                                         size="30"
                                         maxlength="25"
                                         value="#{manUniMed.abr_uni}"
                                         onfocus="this.select()"
                                         />
                            <h:outputText value="Nombre" style="font-weight:bold;"/>
                            <p:inputText id="txtnombreunimed" 
                                         size="30"
                                         maxlength="25"
                                         value="#{manUniMed.nom_uni}"
                                         onfocus="this.select()"
                                         />
                        </h:panelGrid>
                    </div>
                </p:panel>
                <p:panel>
                    <p:dataTable id="dtunimed" var="vUniMed" 
                                 value="#{manUniMed.unidades}" 
                                 emptyMessage="No se encontraron resultados" 
                                 selectionMode="single" selection="#{manUniMed.catunidades}" 
                                 rowKey="#{vUniMed.cod_uni}"
                                 editable="false"
                                 scrollable="true"
                                 scrollHeight="150"
                                 style="width:440px"
                                 >
                        <p:ajax event="rowSelect" listener="#{manUniMed.onRowSelect}" 
                                update=":frmUniMed"/>
                        <p:ajax event="rowUnselect"/>

                        <p:column style="width:60px" headerText="Nombre">
                            <h:outputText value="#{vUniMed.nom_uni}" />
                        </p:column>
                        <p:column style="width:40px" headerText="Abreviatura">
                            <h:outputText value="#{vUniMed.abr_uni}" />
                        </p:column>
                    </p:dataTable>
                </p:panel>
            </h:form>
        </p:dialog>

        <!--********************************************************************
        ****************** Mantenimiento Tipología Mantenimiento ***************
        *********************************************************************-->

        <p:dialog  id="dlgTipMan" widgetVar="wTipMan" modal="true" 
                   width="500" height="320" closable="false" resizable="false" 
                   header="Mantenimiento Tipología Mantenimiento" rendered="true" 
                   dynamic="false" 
                   >

            <h:form id="frmTipMan"> 
                <p:growl id="msgTipMan" showDetail="true" life="4500"/>
                <p:toolbar>
                    <f:facet name="left">
                        <p:commandButton value="Nuevo" style=" width: 100px;"
                                         actionListener="#{manTipos.nuevo()}"
                                         update=":frmTipMan"
                                         icon="ui-icon-document"
                                         />
                        <p:commandButton value="Guardar" style=" width: 100px;"
                                         actionListener="#{manTipos.guardar()}"
                                         update=":frmTipMan"
                                         icon="ui-icon-disk"
                                         > 
                            <p:confirm header="Guardar Registro" 
                                       message="¿Realmente desea Guardar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Eliminar" style=" width: 100px;"
                                         actionListener="#{manTipos.eliminar()}"
                                         update=":frmTipMan"
                                         icon="ui-icon-trash"
                                         >
                            <p:confirm header="Eliminar Registro" 
                                       message="¿Realmente desea eliminar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Cerrar" style=" width: 100px;"
                                         onclick="PF('wTipMan').hide()"
                                         actionListener="#{manTipos.cerrarventana()}"
                                         update=":frmTipMan"
                                         icon="ui-icon-close"
                                         />
                        <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                            <p:commandButton value="Sí" type="button" 
                                             styleClass="ui-confirmdialog-yes" 
                                             icon="ui-icon-check" />
                            <p:commandButton value="No" type="button" 
                                             styleClass="ui-confirmdialog-no" 
                                             icon="ui-icon-close" />
                        </p:confirmDialog>
                    </f:facet>

                </p:toolbar>
                <p:panel>
                    <div style=" background-color: #ebf8fe;">
                        <p:focus for="txtnomtipman" />
                        <h:panelGrid columns="2" cellpadding="5">
                            <h:outputText value="Tipo Mantenimiento" style="font-weight:bold;"/>
                            <p:inputText id="txtnomtipman" 
                                         size="50"
                                         maxlength="30"
                                         value="#{manTipos.nom_tip}"
                                         onfocus="this.select()"
                                         />
                        </h:panelGrid>
                    </div>
                </p:panel>
                <p:panel>
                    <p:dataTable id="dtTipMan" var="vTipMan" 
                                 value="#{manTipos.tipos}" 
                                 emptyMessage="No se encontraron resultados" 
                                 selectionMode="single" selection="#{manTipos.cattipos}" 
                                 rowKey="#{vTipMan.cod_tip}"
                                 editable="false"
                                 scrollable="true"
                                 scrollHeight="150"
                                 style="width:440px"
                                 >
                        <p:ajax event="rowSelect" listener="#{manTipos.onRowSelect}" 
                                update=":frmTipMan"/>
                        <p:ajax event="rowUnselect"/>

                        <p:column style="width:60px" headerText="Tipo Mantenimiento">
                            <h:outputText value="#{vTipMan.nom_tip}" />
                        </p:column>
                    </p:dataTable>
                </p:panel>
            </h:form>
        </p:dialog>

        <!--********************************************************************
        ****************** Mantenimiento Categorías Piezas *********************
        *********************************************************************-->

        <p:dialog  id="dlgCatPie" widgetVar="wCatPie" modal="true" 
                   width="500" height="320" closable="false" resizable="false" 
                   header="Mantenimiento Categorías de Piezas" rendered="true" 
                   dynamic="false" 
                   >

            <h:form id="frmCatPie"> 
                <p:growl id="msgCatPie" showDetail="true" life="4500"/>
                <p:toolbar>
                    <f:facet name="left">
                        <p:commandButton value="Nuevo" style=" width: 100px;"
                                         actionListener="#{manCategorias.nuevo()}"
                                         update=":frmCatPie"
                                         icon="ui-icon-document"
                                         />
                        <p:commandButton value="Guardar" style=" width: 100px;"
                                         actionListener="#{manCategorias.guardar()}"
                                         update=":frmCatPie"
                                         icon="ui-icon-disk"
                                         > 
                            <p:confirm header="Guardar Registro" 
                                       message="¿Realmente desea Guardar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Eliminar" style=" width: 100px;"
                                         actionListener="#{manCategorias.eliminar()}"
                                         update=":frmCatPie"
                                         icon="ui-icon-trash"
                                         >
                            <p:confirm header="Eliminar Registro" 
                                       message="¿Realmente desea eliminar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Cerrar" style=" width: 100px;"
                                         onclick="PF('wCatPie').hide()"
                                         actionListener="#{manCategorias.cerrarventana()}"
                                         update=":frmCatPie"
                                         icon="ui-icon-close"
                                         />
                        <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                            <p:commandButton value="Sí" type="button" 
                                             styleClass="ui-confirmdialog-yes" 
                                             icon="ui-icon-check" />
                            <p:commandButton value="No" type="button" 
                                             styleClass="ui-confirmdialog-no" 
                                             icon="ui-icon-close" />
                        </p:confirmDialog>
                    </f:facet>

                </p:toolbar>
                <p:panel>
                    <div style=" background-color: #ebf8fe;">
                        <p:focus for="txtnomcatpie" />
                        <h:panelGrid columns="2" cellpadding="5">
                            <h:outputText value="Categoría" style="font-weight:bold;"/>
                            <p:inputText id="txtnomcatpie" 
                                         size="50"
                                         maxlength="30"
                                         value="#{manCategorias.nom_cat}"
                                         onfocus="this.select()"
                                         />
                        </h:panelGrid>
                    </div>
                </p:panel>
                <p:panel>
                    <p:dataTable id="dtCatPie" var="vCatPie" 
                                 value="#{manCategorias.categorias}" 
                                 emptyMessage="No se encontraron resultados" 
                                 selectionMode="single" selection="#{manCategorias.catcategorias}" 
                                 rowKey="#{vCatPie.cod_cat}"
                                 editable="false"
                                 scrollable="true"
                                 scrollHeight="150"
                                 style="width:440px"
                                 >
                        <p:ajax event="rowSelect" listener="#{manCategorias.onRowSelect}" 
                                update=":frmCatPie"/>
                        <p:ajax event="rowUnselect"/>

                        <p:column style="width:60px" headerText="Categoría Piezas">
                            <h:outputText value="#{vCatPie.nom_cat}" />
                        </p:column>
                    </p:dataTable>
                </p:panel>
            </h:form>
        </p:dialog>

        <!--******************************************************************** 
        ***************** Pantalla mantenimiento de Opereaciones ***************
        *********************************************************************-->

        <p:dialog  id="dlgOperaciones" widgetVar="wOpe" modal="true" 
                   width="540" height="320" closable="false" resizable="false" 
                   header="Mantenimiento de Operaciones" rendered="true" 
                   dynamic="false" visible="false" 
                   >

            <h:form id="frmOpe"> 
                <p:growl id="msgOpe" showDetail="true" life="4500"/>
                <p:toolbar>
                    <f:facet name="left">
                        <p:commandButton value="Nuevo" style=" width: 100px;"
                                         actionListener="#{manOperaciones.nuevo()}"
                                         update=":frmOpe"
                                         icon="ui-icon-document"
                                         />
                        <p:commandButton value="Guardar" style=" width: 100px;"
                                         actionListener="#{manOperaciones.guardar()}"
                                         update=":frmOpe"
                                         icon="ui-icon-disk"
                                         > 
                            <p:confirm header="Guardar Registro" 
                                       message="¿Realmente desea Guardar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Eliminar" style=" width: 100px;"
                                         actionListener="#{manOperaciones.eliminar()}"
                                         update=":frmOpe"
                                         icon="ui-icon-trash"
                                         >
                            <p:confirm header="Eliminar Registro" 
                                       message="¿Realmente desea eliminar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Cerrar" style=" width: 100px;"
                                         onclick="PF('wOpe').hide()"
                                         actionListener="#{manOperaciones.cerrarventana()}"
                                         update=":frmOpe"
                                         icon="ui-icon-close"
                                         />
                        <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                            <p:commandButton value="Sí" type="button" 
                                             styleClass="ui-confirmdialog-yes" 
                                             icon="ui-icon-check" />
                            <p:commandButton value="No" type="button" 
                                             styleClass="ui-confirmdialog-no" 
                                             icon="ui-icon-close" />
                        </p:confirmDialog>
                    </f:facet>
                </p:toolbar>

                <p:panel>
                    <div style=" background-color: #ebf8fe;">
                        <p:focus for="txtnombreope" />
                        <h:panelGrid columns="2" cellpadding="5">
                            <h:outputText value="Nombre" style="font-weight:bold;"/>
                            <p:inputTextarea id="txtnombreope" 
                                             cols="60"
                                             maxlength="300"
                                             value="#{manOperaciones.nom_ope}"
                                             onfocus="this.select()"
                                             rows="1"
                                             />
                        </h:panelGrid>
                    </div>
                </p:panel>

                <p:panel>
                    <p:dataTable id="dtOpe" var="vOpe" 
                                 value="#{manOperaciones.operaciones}" 
                                 emptyMessage="No se encontraron resultados" 
                                 selectionMode="single" selection="#{manOperaciones.catoperaciones}" 
                                 rowKey="#{vOpe.cod_ope}"
                                 editable="false"
                                 scrollable="true"
                                 scrollHeight="150"
                                 style="width:480px"
                                 >
                        <p:ajax event="rowSelect" listener="#{manOperaciones.onRowSelect}" 
                                update=":frmOpe"/>
                        <p:ajax event="rowUnselect"/>

                        <p:column style="width:300px" headerText="Nombre">
                            <h:outputText value="#{vOpe.nom_ope}" />
                        </p:column>
                    </p:dataTable>
                </p:panel>
            </h:form>
        </p:dialog>

        <!--******************************************************************** 
        ************** Pantalla mantenimiento de Movimientos *******************
        *********************************************************************-->

        <p:dialog  id="dlgMov" widgetVar="wMov" modal="true" 
                   width="440" height="320" closable="false" resizable="false" 
                   header="Mantenimiento de Tipo de Movimiento" rendered="true" 
                   dynamic="false" visible="false" 
                   >

            <h:form id="frmMov"> 
                <p:growl id="msgMov" showDetail="true" life="4500"/>
                <p:toolbar>
                    <f:facet name="left">
                        <p:commandButton value="Nuevo" style=" width: 100px;"
                                         actionListener="#{manMovimientos.nuevo()}"
                                         update=":frmMov"
                                         icon="ui-icon-document"
                                         />
                        <p:commandButton value="Guardar" style=" width: 100px;"
                                         actionListener="#{manMovimientos.guardar()}"
                                         update=":frmMov"
                                         icon="ui-icon-disk"
                                         > 
                            <p:confirm header="Guardar Registro" 
                                       message="¿Realmente desea Guardar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Eliminar" style=" width: 100px;"
                                         actionListener="#{manMovimientos.eliminar()}"
                                         update=":frmMov"
                                         icon="ui-icon-trash"
                                         >
                            <p:confirm header="Eliminar Registro" 
                                       message="¿Realmente desea eliminar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Cerrar" style=" width: 100px;"
                                         onclick="PF('wMov').hide()"
                                         actionListener="#{manMovimientos.cerrarventana()}"
                                         update=":frmMov"
                                         icon="ui-icon-close"
                                         />
                        <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                            <p:commandButton value="Sí" type="button" 
                                             styleClass="ui-confirmdialog-yes" 
                                             icon="ui-icon-check" />
                            <p:commandButton value="No" type="button" 
                                             styleClass="ui-confirmdialog-no" 
                                             icon="ui-icon-close" />
                        </p:confirmDialog>
                    </f:facet>
                </p:toolbar>

                <p:panel>
                    <div style=" background-color: #ebf8fe;">
                        <p:focus for="txtnombremov" />
                        <h:panelGrid columns="2" cellpadding="5">
                            <h:outputText value="Nombre" style="font-weight:bold;"/>
                            <p:inputText id="txtnombremov" 
                                         size="50"
                                         maxlength="30"
                                         value="#{manMovimientos.nom_mov}"
                                         onfocus="this.select()"
                                         />
                            <h:outputText value="Tipo" style="font-weight:bold;"/>
                            <p:inputSwitch offLabel="Entrada" onLabel="Salida" value="#{manMovimientos.flg_tip}"/>
                        </h:panelGrid>
                    </div>
                </p:panel>

                <p:panel>
                    <p:dataTable id="dtMov" var="vMov" 
                                 value="#{manMovimientos.movimientos}" 
                                 emptyMessage="No se encontraron resultados" 
                                 selectionMode="single" selection="#{manMovimientos.catmovimientos}" 
                                 rowKey="#{vMov.id_mov}"
                                 editable="false" 
                                 scrollable="true"
                                 scrollHeight="110"
                                 style="width:380px"
                                 >
                        <p:ajax event="rowSelect" listener="#{manMovimientos.onRowSelect}" 
                                update=":frmMov"/>
                        <p:ajax event="rowUnselect"/>

                        <p:column style="width:30px" headerText="Id">
                            <h:outputText value="#{vMov.id_mov}" />
                        </p:column>
                        <p:column style="width:160px" headerText="Nombre">
                            <h:outputText value="#{vMov.nom_mov}" />
                        </p:column>
                        <p:column style="width:80px" headerText="Tipo">
                            <h:outputText value="#{vMov.flg_tip}" />
                        </p:column>
                    </p:dataTable>
                </p:panel>
            </h:form>
        </p:dialog>

        <!--******************************************************************** 
        ***************** Pantalla mantenimiento de Estantes ********************
        *********************************************************************-->

        <p:dialog  id="dlgBodegas" widgetVar="wBod" modal="true" 
                   width="440" height="330" closable="false" resizable="false" 
                   header="Mantenimiento de Estantes" rendered="true" 
                   dynamic="false" visible="false" 
                   >

            <h:form id="frmBod"> 
                <p:growl id="msgBod" showDetail="true" life="4500"/>
                <p:toolbar>
                    <f:facet name="left">
                        <p:commandButton value="Nuevo" style=" width: 100px;"
                                         actionListener="#{manBodegas.nuevo()}"
                                         update=":frmBod"
                                         icon="ui-icon-document"
                                         />
                        <p:commandButton value="Guardar" style=" width: 100px;"
                                         actionListener="#{manBodegas.guardar()}"
                                         update=":frmBod"
                                         icon="ui-icon-disk"
                                         > 
                            <p:confirm header="Guardar Registro" 
                                       message="¿Realmente desea Guardar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Eliminar" style=" width: 100px;"
                                         actionListener="#{manBodegas.eliminar()}"
                                         update=":frmBod"
                                         icon="ui-icon-trash"
                                         >
                            <p:confirm header="Eliminar Registro" 
                                       message="¿Realmente desea eliminar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Cerrar" style=" width: 100px;"
                                         onclick="PF('wBod').hide()"
                                         actionListener="#{manBodegas.cerrarventana()}"
                                         update=":frmBod"
                                         icon="ui-icon-close"
                                         />
                        <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                            <p:commandButton value="Sí" type="button" 
                                             styleClass="ui-confirmdialog-yes" 
                                             icon="ui-icon-check" />
                            <p:commandButton value="No" type="button" 
                                             styleClass="ui-confirmdialog-no" 
                                             icon="ui-icon-close" />
                        </p:confirmDialog>
                    </f:facet>
                </p:toolbar>

                <p:panel>
                    <div style=" background-color: #ebf8fe;">
                        <p:focus for="txtnombrebod" />
                        <h:panelGrid columns="2" cellpadding="5">
                            <h:outputText value="Bodega" style="font-weight:bold;"/>
                            <p:selectOneMenu value="#{manBodegas.cod_pai}" 
                                             style="width:280px;text-align:right;"
                                             immediate="false"
                                             >  
                                <f:selectItem itemLabel="Seleccione Uno" itemValue="0" />  
                                <f:selectItems value="#{manBodegas.paises}" var="mpaibod"
                                               itemLabel="#{mpaibod.nom_pai}" itemValue="#{mpaibod.cod_pai}"/>
                            </p:selectOneMenu>
                            <h:outputText value="Nombre" style="font-weight:bold;"/>
                            <p:inputText id="txtnombrebod" 
                                         size="50"
                                         maxlength="50"
                                         value="#{manBodegas.nom_bod}"
                                         onfocus="this.select()"
                                         />
                        </h:panelGrid>
                    </div>
                </p:panel>

                <p:panel>
                    <p:dataTable id="dtBod" var="vBod" 
                                 value="#{manBodegas.bodegas}" 
                                 emptyMessage="No se encontraron resultados" 
                                 selectionMode="single" selection="#{manBodegas.catbodegas}" 
                                 rowKey="#{vBod.id_bod}"
                                 editable="false"
                                 scrollable="true"
                                 scrollHeight="140"
                                 style="width:400px"
                                 >
                        <p:ajax event="rowSelect" listener="#{manBodegas.onRowSelect}" 
                                update=":frmBod"/>
                        <p:ajax event="rowUnselect"/>

                        <p:column style="width:100px" headerText="Bodega">
                            <h:outputText value="#{vBod.nompai}" />
                        </p:column>
                        <p:column style="width:200px" headerText="Estante">
                            <h:outputText value="#{vBod.nom_bod}" />
                        </p:column>
                    </p:dataTable>
                </p:panel>
            </h:form>
        </p:dialog>

        <!--******************************************************************** 
        ************** Pantalla mantenimiento de Repisas *******************
        *********************************************************************-->

        <p:dialog  id="dlgUbi" widgetVar="wUbi" modal="true" 
                   width="500" height="350" closable="false" resizable="false" 
                   header="Mantenimiento de Repisas" rendered="true" 
                   dynamic="false" visible="false" 
                   >

            <h:form id="frmUbi"> 
                <p:growl id="msgUbi" showDetail="true" life="4500"/>
                <p:toolbar>
                    <f:facet name="left">
                        <p:commandButton value="Nuevo" style=" width: 100px;"
                                         actionListener="#{manUbicaciones.nuevo()}"
                                         update=":frmUbi"
                                         icon="ui-icon-document"
                                         />
                        <p:commandButton value="Guardar" style=" width: 100px;"
                                         actionListener="#{manUbicaciones.guardar()}"
                                         update=":frmUbi"
                                         icon="ui-icon-disk"
                                         > 
                            <p:confirm header="Guardar Registro" 
                                       message="¿Realmente desea Guardar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Eliminar" style=" width: 100px;"
                                         actionListener="#{manUbicaciones.eliminar()}"
                                         update=":frmUbi"
                                         icon="ui-icon-trash"
                                         >
                            <p:confirm header="Eliminar Registro" 
                                       message="¿Realmente desea eliminar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Cerrar" style=" width: 100px;"
                                         onclick="PF('wUbi').hide()"
                                         actionListener="#{manUbicaciones.cerrarventana()}"
                                         update=":frmUbi"
                                         icon="ui-icon-close"
                                         />
                        <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                            <p:commandButton value="Sí" type="button" 
                                             styleClass="ui-confirmdialog-yes" 
                                             icon="ui-icon-check" />
                            <p:commandButton value="No" type="button" 
                                             styleClass="ui-confirmdialog-no" 
                                             icon="ui-icon-close" />
                        </p:confirmDialog>
                    </f:facet>
                </p:toolbar>

                <p:panel>
                    <div style=" background-color: #ebf8fe;">
                        <p:focus for="txtnombreubi" />
                        <h:panelGrid columns="2" cellpadding="5">
                            <h:outputText value="Bodega" style="font-weight:bold;"/>
                            <p:selectOneMenu value="#{manUbicaciones.cod_pai}" 
                                             style="width:280px;text-align:right;"
                                             immediate="false"
                                             >  
                                <p:ajax event="change" listener="#{manUbicaciones.llenarBodegas()}" update="sombodubi" />
                                <f:selectItem itemLabel="Seleccione Uno" itemValue="0" />  
                                <f:selectItems value="#{manUbicaciones.paises}" var="mpaiubi"
                                               itemLabel="#{mpaiubi.nom_pai}" itemValue="#{mpaiubi.cod_pai}"/>
                            </p:selectOneMenu>
                            <h:outputText value="Estante" style="font-weight:bold;"/>
                            <p:selectOneMenu value="#{manUbicaciones.cod_bod}" 
                                             style="width:280px;text-align:right;"
                                             immediate="false"
                                             id="sombodubi"
                                             >  
                                <f:selectItem itemLabel="Seleccione Una" itemValue="0" />  
                                <f:selectItems value="#{manUbicaciones.bodegas}" var="mbodcv"
                                               itemLabel="#{mbodcv.nom_bod}" itemValue="#{mbodcv.id_bod}"/>
                            </p:selectOneMenu>
                            <h:outputText value="Nombre" style="font-weight:bold;"/>
                            <p:inputText id="txtnombreubi" 
                                         size="50"
                                         maxlength="30"
                                         value="#{manUbicaciones.nom_ubi}"
                                         onfocus="this.select()"
                                         />
                        </h:panelGrid>
                    </div>
                </p:panel>

                <p:panel>
                    <p:dataTable id="dtUbi" var="vUbi" 
                                 value="#{manUbicaciones.ubicaciones}" 
                                 emptyMessage="No se encontraron resultados" 
                                 selectionMode="single" selection="#{manUbicaciones.catubicaciones}" 
                                 rowKey="#{vUbi.id_ubi}"
                                 editable="false" 
                                 scrollable="true"
                                 scrollHeight="110"
                                 style="width:440px"
                                 >
                        <p:ajax event="rowSelect" listener="#{manUbicaciones.onRowSelect}" 
                                update=":frmUbi"/>
                        <p:ajax event="rowUnselect"/>
                        <p:column style="width:90px" headerText="Bodega">
                            <h:outputText value="#{vUbi.nompai}" />
                        </p:column>
                        <p:column style="width:80px" headerText="Estante">
                            <h:outputText value="#{vUbi.nombod}" />
                        </p:column>
                        <p:column style="width:100px" headerText="Repisa">
                            <h:outputText value="#{vUbi.nom_ubi}" />
                        </p:column>
                    </p:dataTable>
                </p:panel>
            </h:form>
        </p:dialog>

        <!--******************************************************************** 
        **************** Pantalla mantenimiento de Clientes ********************
        *********************************************************************-->

        <p:dialog  id="dlgCli" widgetVar="wCli" modal="true" 
                   width="550" height="450" closable="false" resizable="false" 
                   header="Mantenimiento de Clientes" rendered="true" 
                   dynamic="false" visible="false" 
                   >

            <h:form id="frmCli"> 
                <p:growl id="msgCli" showDetail="true" life="4500"/>
                <p:toolbar>
                    <f:facet name="left">
                        <p:commandButton value="Nuevo" style=" width: 100px;"
                                         actionListener="#{manClientes.nuevo()}"
                                         update=":frmCli"
                                         icon="ui-icon-document"
                                         />
                        <p:commandButton value="Guardar" style=" width: 100px;"
                                         actionListener="#{manClientes.guardar()}"
                                         update=":frmCli"
                                         icon="ui-icon-disk"
                                         > 
                            <p:confirm header="Guardar Registro" 
                                       message="¿Realmente desea Guardar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Eliminar" style=" width: 100px;"
                                         actionListener="#{manClientes.eliminar()}"
                                         update=":frmCli"
                                         icon="ui-icon-trash"
                                         >
                            <p:confirm header="Eliminar Registro" 
                                       message="¿Realmente desea eliminar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Cerrar" style=" width: 100px;"
                                         onclick="PF('wCli').hide()"
                                         actionListener="#{manClientes.cerrarventana()}"
                                         update=":frmCli"
                                         icon="ui-icon-close"
                                         />
                        <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                            <p:commandButton value="Sí" type="button" 
                                             styleClass="ui-confirmdialog-yes" 
                                             icon="ui-icon-check" />
                            <p:commandButton value="No" type="button" 
                                             styleClass="ui-confirmdialog-no" 
                                             icon="ui-icon-close" />
                        </p:confirmDialog>
                    </f:facet>
                </p:toolbar>

                <p:panel>
                    <div style=" background-color: #ebf8fe;">
                        <p:focus for="txtnombrecli" />
                        <h:panelGrid columns="2" cellpadding="5">
                            <h:outputText value="Nombre" style="font-weight:bold;"/>

                            <p:inputText id="txtnombrecli" 
                                         size="50"
                                         maxlength="50"
                                         value="#{manClientes.nom_cli}"
                                         onfocus="this.select()"
                                         />
                            <h:outputText value="Persona Contacto" style="font-weight:bold;"/>
                            <p:inputText size="50"
                                         maxlength="150"
                                         value="#{manClientes.per_con}"
                                         onfocus="this.select()"
                                         />
                            <h:outputText value="Teléfono Contacto" style="font-weight:bold;"/>
                            <p:inputText size="50"
                                         maxlength="20"
                                         value="#{manClientes.tel_con}"
                                         onfocus="this.select()"
                                         />
                            <h:outputText value="Correo Electrónico" style="font-weight:bold;"/>
                            <p:inputText size="50"
                                         maxlength="100"
                                         value="#{manClientes.det_mai}"
                                         onfocus="this.select()"
                                         />
                        </h:panelGrid>
                    </div>
                </p:panel>

                <p:panel>
                    <p:dataTable id="dtcli" var="vCli" 
                                 value="#{manClientes.clientes}" 
                                 emptyMessage="No se encontraron resultados" 
                                 selectionMode="single" selection="#{manClientes.catclientes}" 
                                 rowKey="#{vCli.cod_cli}"
                                 editable="false" 
                                 scrollable="true"
                                 scrollHeight="170"
                                 style="width:500px"
                                 >
                        <p:ajax event="rowSelect" listener="#{manClientes.onRowSelect}" 
                                update=":frmCli"/>
                        <p:ajax event="rowUnselect"/>

                        <p:column style="width:160px" headerText="Cliente">
                            <h:outputText value="#{vCli.nom_cli}" />
                        </p:column>
                        <p:column style="width:80px" headerText="Contacto">
                            <h:outputText value="#{vCli.per_con}" />
                        </p:column>
                        <p:column style="width:80px" headerText="Teléfono">
                            <h:outputText value="#{vCli.tel_con}" />
                        </p:column>
                    </p:dataTable>
                </p:panel>
            </h:form>
        </p:dialog>

        <!--******************************************************************** 
        *************** Pantalla mantenimiento de Proveedores ******************
        *********************************************************************-->

        <p:dialog  id="dlgpro" widgetVar="wPro" modal="true" 
                   width="550" height="450" closable="false" resizable="false" 
                   header="Mantenimiento de Proveedores" rendered="true" 
                   dynamic="false" visible="false" 
                   >

            <h:form id="frmPro"> 
                <p:growl id="msgPro" showDetail="true" life="4500"/>
                <p:toolbar>
                    <f:facet name="left">
                        <p:commandButton value="Nuevo" style=" width: 100px;"
                                         actionListener="#{manProveedores.nuevo()}"
                                         update=":frmPro"
                                         icon="ui-icon-document"
                                         />
                        <p:commandButton value="Guardar" style=" width: 100px;"
                                         actionListener="#{manProveedores.guardar()}"
                                         update=":frmPro"
                                         icon="ui-icon-disk"
                                         > 
                            <p:confirm header="Guardar Registro" 
                                       message="¿Realmente desea Guardar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Eliminar" style=" width: 100px;"
                                         actionListener="#{manProveedores.eliminar()}"
                                         update=":frmPro"
                                         icon="ui-icon-trash"
                                         >
                            <p:confirm header="Eliminar Registro" 
                                       message="¿Realmente desea eliminar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Cerrar" style=" width: 100px;"
                                         onclick="PF('wPro').hide()"
                                         actionListener="#{manProveedores.cerrarventana()}"
                                         update=":frmPro"
                                         icon="ui-icon-close"
                                         />
                        <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                            <p:commandButton value="Sí" type="button" 
                                             styleClass="ui-confirmdialog-yes" 
                                             icon="ui-icon-check" />
                            <p:commandButton value="No" type="button" 
                                             styleClass="ui-confirmdialog-no" 
                                             icon="ui-icon-close" />
                        </p:confirmDialog>
                    </f:facet>
                </p:toolbar>

                <p:panel>
                    <div style=" background-color: #ebf8fe;">
                        <p:focus for="txtnombrepro" />
                        <h:panelGrid columns="2" cellpadding="5">
                            <h:outputText value="Nombre" style="font-weight:bold;"/>
                            <p:inputText id="txtnombrepro" 
                                         size="50"
                                         maxlength="50"
                                         value="#{manProveedores.nom_pro}"
                                         onfocus="this.select()"
                                         />
                            <h:outputText value="Persona Contacto" style="font-weight:bold;"/>
                            <p:inputText size="50"
                                         maxlength="150"
                                         value="#{manProveedores.per_con}"
                                         onfocus="this.select()"
                                         />
                            <h:outputText value="Teléfono Contacto" style="font-weight:bold;"/>
                            <p:inputText size="50"
                                         maxlength="20"
                                         value="#{manProveedores.tel_con}"
                                         onfocus="this.select()"
                                         />
                            <h:outputText value="Correo Electrónico" style="font-weight:bold;"/>
                            <p:inputText size="50"
                                         maxlength="100"
                                         value="#{manProveedores.det_mai}"
                                         onfocus="this.select()"
                                         />
                        </h:panelGrid>
                    </div>
                </p:panel>

                <p:panel>
                    <p:dataTable id="dtpro" var="vPro" 
                                 value="#{manProveedores.proveedores}" 
                                 emptyMessage="No se encontraron resultados" 
                                 selectionMode="single" selection="#{manProveedores.catproveedores}" 
                                 rowKey="#{vPro.cod_pro}"
                                 editable="false" 
                                 scrollable="true"
                                 scrollHeight="170"
                                 style="width:500px"
                                 >
                        <p:ajax event="rowSelect" listener="#{manProveedores.onRowSelect}" 
                                update=":frmPro"/>
                        <p:ajax event="rowUnselect"/>

                        <p:column style="width:160px" headerText="Proveedor">
                            <h:outputText value="#{vPro.nom_pro}" />
                        </p:column>
                        <p:column style="width:80px" headerText="Contacto">
                            <h:outputText value="#{vPro.per_con}" />
                        </p:column>
                        <p:column style="width:80px" headerText="Teléfono">
                            <h:outputText value="#{vPro.tel_con}" />
                        </p:column>
                    </p:dataTable>
                </p:panel>
            </h:form>
        </p:dialog>

        <!--******************************************************************** 
        *************** Pantalla mantenimiento de Equipos **********************
        *********************************************************************-->

        <p:dialog  id="dlgequipos" widgetVar="wEquipos" modal="true" 
                   width="650" height="500" closable="false" resizable="false" 
                   header="Mantenimiento de Equipos" rendered="true" 
                   dynamic="false" visible="false" responsive="true" 
                   >
            <h:form id="frmEquipos"> 
                <p:growl id="msgEquipos" showDetail="true" life="4500"/>
                <p:toolbar>
                    <f:facet name="left">
                        <p:commandButton value="Nuevo" style=" width: 100px;"
                                         actionListener="#{manEquipos.nuevo()}"
                                         update=":frmEquipos"
                                         icon="ui-icon-document"
                                         />
                        <p:commandButton value="Guardar" style=" width: 100px;"
                                         actionListener="#{manEquipos.guardar()}"
                                         update=":frmEquipos"
                                         icon="ui-icon-disk"
                                         > 
                            <p:confirm header="Guardar Registro" 
                                       message="¿Realmente desea Guardar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Eliminar" style=" width: 100px;"
                                         actionListener="#{manEquipos.eliminar()}"
                                         update=":frmEquipos"
                                         icon="ui-icon-trash"
                                         >
                            <p:confirm header="Eliminar Registro" 
                                       message="¿Realmente desea eliminar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Cerrar" style=" width: 100px;"
                                         onclick="PF('wEquipos').hide()"
                                         actionListener="#{manEquipos.cerrarventana()}"
                                         update=":frmEquipos"
                                         icon="ui-icon-close"
                                         />
                        <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                            <p:commandButton value="Sí" type="button" 
                                             styleClass="ui-confirmdialog-yes" 
                                             icon="ui-icon-check" />
                            <p:commandButton value="No" type="button" 
                                             styleClass="ui-confirmdialog-no" 
                                             icon="ui-icon-close" />
                        </p:confirmDialog>
                    </f:facet>
                </p:toolbar>

                <p:panel>
                    <div style=" background-color: #ebf8fe;">
                        <h:panelGrid columns="2" cellpadding="5">
                            <h:panelGroup>
                                <p:focus for="cmbequ" />
                                <h:panelGrid columns="2" cellpadding="5">
                                    <h:outputText value="Marca" style="font-weight:bold;" />
                                    <p:selectOneMenu id="cmbequ" value="#{manEquipos.cod_mar}" style=" width: 150px;">
                                        <f:selectItem itemLabel="Ninguno" itemValue="0"/>
                                        <f:selectItems value="#{manEquipos.marcas}" var="vmarcaequ"
                                                       itemLabel="#{vmarcaequ.nom_mar}" itemValue="#{vmarcaequ.id_mar}"/> 
                                    </p:selectOneMenu>
                                    <h:outputText value="Refer" style="font-weight:bold;"/>
                                    <p:inputText  
                                        size="50"
                                        maxlength="30"
                                        value="#{manEquipos.cod_ref}"
                                        onfocus="this.select()"
                                        />
                                    <h:outputText value="Nombre" style="font-weight:bold;"/>
                                    <p:inputText  
                                        size="50"
                                        maxlength="50"
                                        value="#{manEquipos.nom_equ}"
                                        onfocus="this.select()"
                                        />
                                    <h:outputText value="Descripción Equipo" style="font-weight:bold;"/>
                                    <p:inputText size="50"
                                                 maxlength="150"
                                                 value="#{manEquipos.des_equ}"
                                                 onfocus="this.select()"
                                                 />
                                </h:panelGrid>
                            </h:panelGroup>
                            <p:graphicImage id="imgequ" 
                                            value="#{manEquipos.det_ima}" 
                                            cache="false" width="135" height="135" />
                        </h:panelGrid>
                        <p:fileUpload id="fupequ" 
                                      fileUploadListener="#{manEquipos.upload}" 
                                      mode="advanced" dragDropSupport="true"
                                      fileLimit="1" 
                                      allowTypes="/(\.|\/)(jpg|JPG|jepg|JEPG|gif|GIF)$/" 
                                      update=":frmEquipos:msgEquipos,:frmEquipos:imgequ"
                                      label="Seleccionar" cancelLabel="Cancelar" uploadLabel="Subir" 
                                      />
                    </div>
                </p:panel>

                <p:panel>
                    <p:dataTable id="dtequ" var="vEqu" 
                                 value="#{manEquipos.equipos}" 
                                 emptyMessage="No se encontraron resultados" 
                                 selectionMode="single" selection="#{manEquipos.catequipos}" 
                                 rowKey="#{vEqu.cod_equ}"
                                 editable="false" 
                                 scrollable="true"
                                 scrollHeight="170"
                                 style="width:590px"
                                 >
                        <p:ajax event="rowSelect" listener="#{manEquipos.onRowSelect}" 
                                update=":frmEquipos"/>
                        <p:ajax event="rowUnselect"/>

                        <p:column style="width:60px" headerText="Ref">
                            <h:outputText value="#{vEqu.cod_ref}" />
                        </p:column>
                        <p:column style="width:80px" headerText="Marca">
                            <h:outputText value="#{vEqu.marca}" />
                        </p:column>
                        <p:column style="width:160px" headerText="Nombre">
                            <h:outputText value="#{vEqu.nom_equ}" />
                        </p:column>
                    </p:dataTable>
                </p:panel>
            </h:form>
        </p:dialog>

        <!--******************************************************************** 
        ***************** Pantalla mantenimiento de Piezas *********************
        *********************************************************************-->

        <p:dialog  id="dlgPiezas" widgetVar="wPiezas" modal="true" 
                   width="650" height="500" closable="false" resizable="false" 
                   header="Mantenimiento de Piezas" rendered="true" 
                   dynamic="false" visible="false" 
                   >

            <h:form id="frmPiezas"> 
                <p:growl id="msgPiezas" showDetail="true" life="4500"/>
                <p:toolbar>
                    <f:facet name="left">
                        <p:commandButton value="Nuevo" style=" width: 100px;"
                                         actionListener="#{manPiezas.nuevo()}"
                                         update=":frmPiezas"
                                         icon="ui-icon-document"
                                         />
                        <p:commandButton value="Guardar" style=" width: 100px;"
                                         actionListener="#{manPiezas.guardar()}"
                                         update=":frmPiezas"
                                         icon="ui-icon-disk"
                                         > 
                            <p:confirm header="Guardar Registro" 
                                       message="¿Realmente desea Guardar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Eliminar" style=" width: 100px;"
                                         actionListener="#{manPiezas.eliminar()}"
                                         update=":frmPiezas"
                                         icon="ui-icon-trash"
                                         >
                            <p:confirm header="Eliminar Registro" 
                                       message="¿Realmente desea eliminar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Cerrar" style=" width: 100px;"
                                         onclick="PF('wPiezas').hide()"
                                         actionListener="#{manPiezas.cerrarventana()}"
                                         update=":frmPiezas"
                                         icon="ui-icon-close"
                                         />
                        <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                            <p:commandButton value="Sí" type="button" 
                                             styleClass="ui-confirmdialog-yes" 
                                             icon="ui-icon-check" />
                            <p:commandButton value="No" type="button" 
                                             styleClass="ui-confirmdialog-no" 
                                             icon="ui-icon-close" />
                        </p:confirmDialog>
                    </f:facet>
                </p:toolbar>

                <p:panel>
                    <div style=" background-color: #ebf8fe;">
                        <h:panelGrid columns="2" cellpadding="5">
                            <h:panelGroup>
                                <p:focus for="cmbequipopie" />
                                <h:panelGrid columns="2" cellpadding="5">
                                    <h:outputText value="Equipo" style="font-weight:bold;" />
                                    <p:selectOneMenu id="cmbequipopie" value="#{manPiezas.cod_equ}" 
                                                     style=" width: 180px;">
                                        <f:selectItem itemLabel="Ninguno" itemValue="0"/>
                                        <f:selectItems value="#{manPiezas.equipos}" var="vequpie"
                                                       itemLabel="#{vequpie.nom_equ}" itemValue="#{vequpie.cod_equ}"/> 
                                    </p:selectOneMenu>
                                    <h:outputText value="Categoría" style="font-weight:bold;" />
                                    <p:selectOneMenu value="#{manPiezas.cod_cat}" 
                                                     style=" width: 180px;">
                                        <f:selectItem itemLabel="Ninguno" itemValue="0"/>
                                        <f:selectItems value="#{manPiezas.categorias}" var="catpie"
                                                       itemLabel="#{catpie.nom_cat}" itemValue="#{catpie.cod_cat}"/> 
                                    </p:selectOneMenu>
                                    <h:outputText value="Ref" style="font-weight:bold;"/>
                                    <p:inputText size="50"
                                                 maxlength="30"
                                                 value="#{manPiezas.cod_ref}"
                                                 onfocus="this.select()"
                                                 />
                                    <h:outputText value="Nombre" style="font-weight:bold;"/>
                                    <p:inputText size="50"
                                                 maxlength="50"
                                                 value="#{manPiezas.nom_pie}"
                                                 onfocus="this.select()"
                                                 />
                                    <h:outputText value="Descripción" style="font-weight:bold;"/>
                                    <p:inputText size="50"
                                                 maxlength="150"
                                                 value="#{manPiezas.des_pie}"
                                                 onfocus="this.select()"
                                                 />
                                    <h:outputText value="Vida Útil (Horas)" style="font-weight:bold;"/>
                                    <p:inputText size="50"
                                                 maxlength="11"
                                                 value="#{manPiezas.vid_uti}"
                                                 onfocus="this.select()"
                                                 />
                                </h:panelGrid>
                            </h:panelGroup>
                            <p:graphicImage id="imgpie" 
                                            value="#{manPiezas.det_ima}" 
                                            cache="false" width="170" height="170" />
                        </h:panelGrid>
                        <p:fileUpload id="fuppie" 
                                      fileUploadListener="#{manPiezas.upload}" 
                                      mode="advanced" dragDropSupport="true"
                                      fileLimit="1" 
                                      allowTypes="/(\.|\/)(jpg|JPG|jepg|JEPG|gif|GIF)$/" 
                                      update=":frmPiezas:msgPiezas,:frmPiezas:imgpie"
                                      label="Seleccionar" cancelLabel="Cancelar" uploadLabel="Subir" 
                                      />
                    </div>
                </p:panel>

                <p:panel>
                    <p:dataTable id="dtPie" var="vPie" 
                                 value="#{manPiezas.piezas}" 
                                 emptyMessage="No se encontraron resultados" 
                                 selectionMode="single" selection="#{manPiezas.catpiezas}" 
                                 rowKey="#{vPie.cod_pie}"
                                 editable="false" 
                                 scrollable="true"
                                 scrollHeight="110"
                                 style="width:590px"
                                 >
                        <p:ajax event="rowSelect" listener="#{manPiezas.onRowSelect}" 
                                update=":frmPiezas"/>
                        <p:ajax event="rowUnselect"/>

                        <p:column style="width:30px" headerText="Ref">
                            <h:outputText value="#{vPie.cod_ref}" />
                        </p:column>
                        <p:column style="width:50px" headerText="Equipo">
                            <h:outputText value="#{vPie.nomequ}" />
                        </p:column>
                        <p:column style="width:160px" headerText="Nombre">
                            <h:outputText value="#{vPie.nom_pie}" />
                        </p:column>
                    </p:dataTable>
                </p:panel>
            </h:form>
        </p:dialog>

        <!--******************************************************************** 
        ************************ Pantalla Solicitudes **************************
        *********************************************************************-->

        <p:dialog  id="dlgSol" widgetVar="wSol" modal="true" 
                   width="770" height="480" closable="false" resizable="false" 
                   header="Crear Solicitud" rendered="true" 
                   dynamic="false" visible="false" 
                   >

            <h:form id="frmSol"> 
                <p:growl id="msgSol" showDetail="true" life="4500"/>
                <p:toolbar>
                    <f:facet name="left">
                        <p:commandButton value="Nuevo" style=" width: 100px;"
                                         actionListener="#{manSolicitudes.nuevo()}"
                                         update=":frmSol"
                                         icon="ui-icon-document"
                                         />
                        <p:commandButton value="Guardar" style=" width: 100px;"
                                         actionListener="#{manSolicitudes.guardar()}"
                                         update=":frmSol"
                                         icon="ui-icon-disk"
                                         > 
                            <p:confirm header="Guardar Registro" 
                                       message="¿Realmente desea Guardar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>

                        <p:commandButton value="Cerrar" style=" width: 100px;"
                                         onclick="PF('wSol').hide()"
                                         actionListener="#{manSolicitudes.cerrarventana()}"
                                         update=":frmSol"
                                         icon="ui-icon-close"
                                         />
                        <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                            <p:commandButton value="Sí" type="button" 
                                             styleClass="ui-confirmdialog-yes" 
                                             icon="ui-icon-check" />
                            <p:commandButton value="No" type="button" 
                                             styleClass="ui-confirmdialog-no" 
                                             icon="ui-icon-close" />
                        </p:confirmDialog>
                    </f:facet>
                    <f:facet name="right">
                        <p:commandButton value="Buscar" style=" width: 100px;"
                                         onclick="PF('wSearch').show()"
                                         actionListener="#{manSolicitudes.iniciarventanasearch()}"
                                         update=":frmSearch"
                                         icon="ui-icon-search"
                                         />
                    </f:facet>

                </p:toolbar>

                <p:panel>
                    <div style=" background-color: #ebf8fe;">
                        <p:focus for="fecing" />
                        <h:panelGrid columns="4" cellpadding="5">
                            <h:outputText value="Fecha" style="font-weight:bold;"/>
                            <h:outputText value="Departamento" style="font-weight:bold;"/>
                            <h:outputText value="Uso" style="font-weight:bold;"/>
                            <h:outputText value="Equipo" style="font-weight:bold;"/>
                            <p:inputText id="fecing" 
                                         size="15"
                                         maxlength="20"
                                         value="#{manSolicitudes.fec_sol}"
                                         onfocus="this.select()"
                                         />
                            <p:selectOneMenu value="#{manSolicitudes.cod_dep}" 
                                             style="width:140px;text-align:right;"
                                             immediate="false"
                                             disabled="true" 
                                             >  
                                <f:selectItem itemLabel="Ninguno" itemValue="0" />  
                                <f:selectItems value="#{manSolicitudes.departamentos}" var="movDep"
                                               itemLabel="#{movDep.nom_dep}" itemValue="#{movDep.cod_dep}"/>
                            </p:selectOneMenu>
                            <p:inputText size="40"
                                         maxlength="75"
                                         value="#{manSolicitudes.det_uso}"
                                         onfocus="this.select()"
                                         />
                            <p:selectOneMenu value="#{manSolicitudes.cod_maq}" 
                                             style="width:140px;text-align:right;"
                                             immediate="false"
                                             >  
                                <f:selectItem itemLabel="No Aplica" itemValue="0" />  
                                <f:selectItems value="#{manSolicitudes.equipos}" var="solmaq"
                                               itemLabel="#{solmaq.nom_equ}" itemValue="#{solmaq.cod_equ}"/>
                            </p:selectOneMenu>
                        </h:panelGrid>
                        <h:panelGrid columns="1" cellpadding="5">
                            <h:outputText value="Observaciones " style="font-weight:bold;"/>
                            <p:inputTextarea rows="2"
                                             cols="133"
                                             maxlength="150"
                                             value="#{manSolicitudes.det_obs}"
                                             onfocus="this.select()"
                                             />
                        </h:panelGrid>
                    </div>
                </p:panel>

                <p:panel>
                    <div style=" background-color: #ebf8fe;">
                        <h:panelGrid columns="4" cellpadding="5">
                            <h:outputText value="Cantidad" style="font-weight:bold;"/>
                            <h:outputText value="Código Pieza" style="font-weight:bold;"/>
                            <h:outputText value="Descripción Item" style="font-weight:bold;"/>
                            <p:commandButton icon="ui-icon-arrowthick-1-n" 
                                             title="Remover Detalle" 
                                             style=" width: 18px; height: 20px;" 
                                             actionListener="#{manSolicitudes.eliminardetalle()}" 
                                             update="dtSol,msgSol,canitem,desitem"/>
                            <p:inputText size="9"
                                         maxlength="11"
                                         value="#{manSolicitudes.det_can}"
                                         onfocus="this.select()"
                                         id="canitem"
                                         />
                            <p:selectOneMenu value="#{manSolicitudes.cod_ite}" 
                                             style="width:180px;text-align:right;"
                                             immediate="false"
                                             >
                                <f:selectItem  itemLabel="Seleccione Una" itemValue="0" />
                                <f:selectItems value="#{manSolicitudes.piezas}" var="solpie"
                                               itemLabel="#{solpie.cod_pie} - #{solpie.nom_pie}" itemValue="#{solpie.cod_pie}"/>
                            </p:selectOneMenu>
                            <p:inputText size="65"
                                         maxlength="70"
                                         value="#{manSolicitudes.des_ite}"
                                         onfocus="this.select()"
                                         id="desitem"
                                         />
                            <p:commandButton icon="ui-icon-arrowthick-1-s" 
                                             title="Agregar Detalle" 
                                             style=" width: 18px; height: 20px;" 
                                             actionListener="#{manSolicitudes.agregardetalle()}"
                                             update="dtSol,msgSol,canitem,desitem"
                                             />
                        </h:panelGrid>
                    </div>
                </p:panel>
                <p:panel>
                    <p:dataTable id="dtSol" var="vSol" 
                                 value="#{manSolicitudes.detalles}" 
                                 emptyMessage="No se encontraron resultados" 
                                 selectionMode="single" 
                                 selection="#{manSolicitudes.catdetalles}" 
                                 rowKey="#{vSol.id_det}"
                                 editable="false" 
                                 style="width:710px"
                                 scrollable="true"
                                 scrollHeight="100"
                                 >
                        <p:ajax event="rowSelect" listener="#{manSolicitudes.onRowSelect}" 
                                update=":frmSol"/>
                        <p:ajax event="rowUnselect"/>

                        <p:column style="width:30px;" headerText="Cantidad">
                            <h:outputText value="#{vSol.det_can}" />
                        </p:column>
                        <p:column style="width:300px" headerText="Descripción Item">
                            <h:outputText value="#{vSol.des_ite}" />
                        </p:column>

                    </p:dataTable>
                </p:panel>

            </h:form>
        </p:dialog>

        <p:dialog  id="dlgSearch" widgetVar="wSearch" modal="true" 
                   width="770" height="300" closable="false" resizable="false" 
                   header="Buscar Solicitud" rendered="true" 
                   dynamic="false" visible="false" 
                   >

            <h:form id="frmSearch"> 
                <p:growl id="msgSearch" showDetail="true" life="4500"/>
                <p:toolbar>
                    <f:facet name="right">
                        <p:commandButton value="Cerrar" style=" width: 100px;"
                                         onclick="PF('wSearch').hide()"
                                         actionListener="#{manSolicitudes.cerrarventanasearch()}"
                                         update=":frmSearch"
                                         icon="ui-icon-close"
                                         />
                    </f:facet>
                </p:toolbar>
                <p:panel>
                    <p:dataTable id="dtSearch" var="vSearch" 
                                 value="#{manSolicitudes.maestro}" 
                                 emptyMessage="No se encontraron resultados" 
                                 selectionMode="single" 
                                 selection="#{manSolicitudes.catmaestro}" 
                                 rowKey="#{vSearch.id_mae}"
                                 editable="false" 
                                 scrollable="true"
                                 scrollHeight="200" 
                                 style="width:720px"
                                 >
                        <p:ajax event="rowSelect" listener="#{manSolicitudes.onRowSelectsearch}" 
                                update=":frmSearch"/>

                        <p:column style="width:30px; text-align: right;" headerText="Código">
                            <h:outputText value="#{vSearch.id_mae}" />
                        </p:column>
                        <p:column style="width:180px" headerText="Departamento">
                            <h:outputText value="#{vSearch.nomdep}" />
                        </p:column>
                        <p:column style="width:180px" headerText="Máquina">
                            <h:outputText value="#{vSearch.nommaq}" />
                        </p:column>
                        <p:column style="width:100px" headerText="Uso">
                            <h:outputText value="#{vSearch.det_uso}" />
                        </p:column>
                    </p:dataTable>
                </p:panel>
            </h:form>
        </p:dialog>

        <!--******************************************************************** 
        ************************** Pantalla Estado *****************************
        *********************************************************************-->

        <p:dialog  id="dlgEstado" widgetVar="wEstado" modal="true" 
                   width="840" height="460" closable="false" resizable="false" 
                   header="Estado Solicitud" rendered="true" 
                   dynamic="false" visible="false" 
                   >

            <h:form id="frmEstado"> 
                <p:growl id="msgEstado" showDetail="true" life="4500"/>
                <p:toolbar>
                    <f:facet name="left">
                        <p:commandButton value="Actualizar" style=" width: 100px;"
                                         actionListener="#{manEstado.iniciarventana()}"
                                         update=":frmEstado"
                                         icon="ui-icon-refresh"
                                         /> 
                        <p:commandButton value="Eliminar" style=" width: 100px;"
                                         actionListener="#{manEstado.eliminar()}"
                                         update=":frmEstado"
                                         icon="ui-icon-trash"
                                         > 
                            <p:confirm header="Eliminar Registro" 
                                       message="¿Realmente desea Eliminar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>

                        <p:commandButton value="Cerrar" style=" width: 100px;"
                                         onclick="PF('wEstado').hide()"
                                         actionListener="#{manEstado.cerrarventana()}"
                                         update=":frmEstado"
                                         icon="ui-icon-close"
                                         />
                        <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                            <p:commandButton value="Sí" type="button" 
                                             styleClass="ui-confirmdialog-yes" 
                                             icon="ui-icon-check" />
                            <p:commandButton value="No" type="button" 
                                             styleClass="ui-confirmdialog-no" 
                                             icon="ui-icon-close" />
                        </p:confirmDialog>
                    </f:facet>

                </p:toolbar>

                <p:panel>
                    <p:dataTable id="dtEstado" var="vEstado" 
                                 value="#{manEstado.maestro}" 
                                 rows="4"
                                 paginator="true" paginatorPosition="bottom" 
                                 emptyMessage="No se encontraron resultados" 
                                 selectionMode="single" selection="#{manEstado.catmaestro}" 
                                 rowKey="#{vEstado.id_mae}"
                                 editable="false" 
                                 style="width:790px"
                                 >
                        <p:ajax event="rowSelect" listener="#{manEstado.onRowSelect}" 
                                update=":frmEstado"/>
                        <p:ajax event="rowUnselect" listener="#{manEstado.onRowUnselect}" 
                                update=":frmEstado"/>

                        <p:column style="width:40px;" headerText="Código">
                            <h:outputText value="#{vEstado.id_mae}" />
                        </p:column>
                        <p:column style="width:60px;" headerText="Fecha">
                            <h:outputText value="#{vEstado.fec_sol}" />
                        </p:column>
                        <p:column style="width:120px" headerText="Departamento">
                            <h:outputText value="#{vEstado.nomdep}" />
                        </p:column>
                        <p:column style="width:120px" headerText="Máquina">
                            <h:outputText value="#{vEstado.nommaq}" />
                        </p:column>
                        <p:column style="width:160px;" headerText="Uso">
                            <h:outputText value="#{vEstado.det_uso}" />
                        </p:column>
                        <p:column style="width:130px" headerText="Estado">
                            <h:outputText value="#{vEstado.det_sta}" />
                        </p:column>
                    </p:dataTable>
                </p:panel>


                <p:panel>
                    <p:dataTable id="dtEstadoDet" var="vEsDet" 
                                 value="#{manEstado.detalles}" 
                                 rows="5"
                                 paginator="true" paginatorPosition="bottom" 
                                 emptyMessage="No se encontraron resultados" 
                                 selectionMode="single" selection="#{manEstado.catdetalles}" 
                                 rowKey="#{vEsDet.id_det}"
                                 editable="false" 
                                 style="width:790px"
                                 >
                        <p:ajax event="rowSelect" listener="#{manEstado.onRowSelect}" 
                                update=":frmEstado"/>
                        <p:ajax event="rowUnselect"/>

                        <p:column style="width:30px; text-align: right;" headerText="Cantidad">
                            <h:outputText value="#{vEsDet.det_can}" />
                        </p:column>
                        <p:column style="width:300px" headerText="Descripción Item">
                            <h:outputText value="#{vEsDet.des_ite}" />
                        </p:column>
                        <p:column style="width:40px" headerText="Estado">
                            <h:outputText value="#{vEsDet.det_sta}" />
                        </p:column>

                    </p:dataTable>
                </p:panel>

            </h:form>
        </p:dialog>

        <!--******************************************************************** 
        ************************ Pantalla Aprobación ***************************
        *********************************************************************-->

        <p:dialog  id="dlgAprobado" widgetVar="wAprobado" modal="true" 
                   width="770" height="460" closable="false" resizable="false" 
                   header="Aprobación de Solicitudes" rendered="true" 
                   dynamic="false" visible="false" 
                   >

            <h:form id="frmAprobado"> 
                <p:growl id="msgAprobado" showDetail="true" life="4500"/>
                <p:toolbar>
                    <f:facet name="left">
                        <p:commandButton value="Aprobar" style=" width: 100px;"
                                         actionListener="#{manAprobacion.aprobar()}"
                                         update=":frmAprobado"
                                         icon="ui-icon-circle-check"
                                         > 
                            <p:confirm header="Aprobar Solicitud" 
                                       message="¿Realmente desea Aprobar esta Solicitud?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>

                        <p:commandButton value="Denegar" style=" width: 100px;"
                                         actionListener="#{manAprobacion.rechazar()}"
                                         update=":frmAprobado"
                                         icon="ui-icon-circle-close"
                                         > 
                            <p:confirm header="Denegar Solicitud" 
                                       message="¿Realmente desea Denegar esta Solicitud?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>

                        <p:commandButton value="Actualizar" style=" width: 100px;"
                                         actionListener="#{manAprobacion.iniciarventana()}"
                                         update=":frmAprobado"
                                         icon="ui-icon-refresh"
                                         /> 

                        <p:commandButton value="Cerrar" style=" width: 100px;"
                                         onclick="PF('wAprobado').hide()"
                                         actionListener="#{manAprobacion.cerrarventana()}"
                                         update=":frmAprobado"
                                         icon="ui-icon-close"
                                         />
                        <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                            <p:commandButton value="Sí" type="button" 
                                             styleClass="ui-confirmdialog-yes" 
                                             icon="ui-icon-check" />
                            <p:commandButton value="No" type="button" 
                                             styleClass="ui-confirmdialog-no" 
                                             icon="ui-icon-close" />
                        </p:confirmDialog>
                    </f:facet>

                </p:toolbar>

                <p:panel>
                    <p:dataTable id="dtAprobar" var="vAprobar" 
                                 value="#{manAprobacion.maestro}" 
                                 rows="4"
                                 paginator="true" paginatorPosition="bottom" 
                                 emptyMessage="No se encontraron resultados" 
                                 selectionMode="single" selection="#{manAprobacion.catmaestro}" 
                                 rowKey="#{vAprobar.id_mae}"
                                 editable="false" 
                                 style="width:720px"
                                 >
                        <p:ajax event="rowSelect" listener="#{manAprobacion.onRowSelect}" 
                                update=":frmAprobado"/>
                        <p:ajax event="rowUnselect" listener="#{manAprobacion.onRowUnselect}" 
                                update=":frmAprobado"/>

                        <p:column style="width:30px; text-align: right;" headerText="Código">
                            <h:outputText value="#{vAprobar.id_mae}" />
                        </p:column>
                        <p:column style="width:180px" headerText="Solicitante">
                            <h:outputText value="#{vAprobar.nom_usu}" />
                        </p:column>
                        <p:column style="width:130px" headerText="Departamento">
                            <h:outputText value="#{vAprobar.nomdep}" />
                        </p:column>
                        <p:column style="width:130px" headerText="Máquina">
                            <h:outputText value="#{vAprobar.nommaq}" />
                        </p:column>
                        <p:column style="width:100px" headerText="Estado">
                            <h:outputText value="#{vAprobar.det_sta}" />
                        </p:column>
                    </p:dataTable>
                </p:panel>


                <p:panel>
                    <p:dataTable id="dtAprobadoDet" var="vAproDet" 
                                 value="#{manAprobacion.detalles}" 
                                 rows="5"
                                 paginator="true" paginatorPosition="bottom" 
                                 emptyMessage="No se encontraron resultados" 
                                 selectionMode="single" selection="#{manAprobacion.catdetalles}" 
                                 rowKey="#{vAproDet.id_det}"
                                 editable="false" 
                                 style="width:720px"
                                 >
                        <p:ajax event="rowSelect" listener="#{manAprobacion.onRowSelect}" 
                                update=":frmAprobado"/>
                        <p:ajax event="rowUnselect"/>

                        <p:column style="width:30px; text-align: right;" headerText="Cantidad">
                            <h:outputText value="#{vAproDet.det_can}" />
                        </p:column>
                        <p:column style="width:300px" headerText="Descripción Item">
                            <h:outputText value="#{vAproDet.des_ite}" />
                        </p:column>
                        <p:column style="width:40px" headerText="Estado">
                            <h:outputText value="#{vAproDet.det_sta}" />
                        </p:column>

                    </p:dataTable>
                </p:panel>

            </h:form>
        </p:dialog>

        <!--******************************************************************** 
        ********************** Pantalla Modificaciones *************************
        *********************************************************************-->

        <p:dialog  id="dlgModificaciones" widgetVar="wModificaciones" modal="true" 
                   width="870" height="460" closable="false" resizable="false" 
                   header="Modificaciones de Solicitudes" rendered="true" 
                   dynamic="false" visible="false" 
                   >

            <h:form id="frmModificaciones"> 
                <p:growl id="msgModificaciones" showDetail="true" life="4500"/>
                <p:toolbar>
                    <f:facet name="left">
                        <h:panelGrid columns="5" cellpadding="2">
                            <p:commandButton value="Aprobar" style=" width: 100px;"
                                             actionListener="#{manModificaciones.aprobar()}"
                                             update=":frmModificaciones"
                                             icon="ui-icon-circle-check"
                                             > 
                                <p:confirm header="Aprobar Solicitud" 
                                           message="¿Realmente desea Aprobar esta Solicitud?" 
                                           icon="ui-icon-alert"/>
                            </p:commandButton>

                            <p:commandButton value="Denegar" style=" width: 100px;"
                                             actionListener="#{manModificaciones.rechazar()}"
                                             update=":frmModificaciones"
                                             icon="ui-icon-circle-close"
                                             > 
                                <p:confirm header="Denegar Solicitud" 
                                           message="¿Realmente desea Denegar esta Solicitud?" 
                                           icon="ui-icon-alert"/>
                            </p:commandButton>

                            <p:commandButton value="Actualizar" style=" width: 100px;"
                                             actionListener="#{manModificaciones.iniciarventana()}"
                                             update=":frmModificaciones"
                                             icon="ui-icon-refresh"
                                             /> 
                            <h:commandButton value="Imprimir" 
                                             style=" width: 100px; height: 21px; background-color: #dfecf1; "
                                             actionListener="#{manModificaciones.ejecutarreporte()}"
                                             onclick="this.form.target = '_blank'"/>
                            <p:commandButton value="Cerrar" style=" width: 100px;"
                                             onclick="PF('wModificaciones').hide()"
                                             actionListener="#{manModificaciones.cerrarventana()}"
                                             update=":frmModificaciones"
                                             icon="ui-icon-close"
                                             />
                        </h:panelGrid>
                        <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                            <p:commandButton value="Sí" type="button" 
                                             styleClass="ui-confirmdialog-yes" 
                                             icon="ui-icon-check" />
                            <p:commandButton value="No" type="button" 
                                             styleClass="ui-confirmdialog-no" 
                                             icon="ui-icon-close" />
                        </p:confirmDialog>
                    </f:facet>
                    <f:facet name="right">
                        <h:panelGrid columns="2" cellpadding="5">
                            <h:outputText value="Aprobada por:" style="font-weight:bold;" />
                            <p:selectOneMenu value="#{manModificaciones.cod_apr}" style=" width: 180px;">
                                <f:selectItem itemLabel="Seleccione Uno" itemValue="0"/>
                                <f:selectItems value="#{manModificaciones.usuarios}" var="modapr"
                                               itemLabel="#{modapr.det_nom}" itemValue="#{modapr.cod_usu}"/> 
                            </p:selectOneMenu>
                        </h:panelGrid>
                    </f:facet>

                </p:toolbar>

                <p:panel>
                    <p:dataTable id="dtAprobar2" var="vAprobar2" 
                                 value="#{manModificaciones.maestro}" 
                                 rows="4"
                                 paginator="true" paginatorPosition="bottom" 
                                 emptyMessage="No se encontraron resultados" 
                                 selectionMode="single" selection="#{manModificaciones.catmaestro}" 
                                 rowKey="#{vAprobar2.id_mae}"
                                 editable="false" 
                                 style="width:820px"
                                 >
                        <p:ajax event="rowSelect" listener="#{manModificaciones.onRowSelect}" 
                                update=":frmModificaciones"/>
                        <p:ajax event="rowUnselect" listener="#{manModificaciones.onRowUnselect}" 
                                update=":frmModificaciones"/>

                        <p:column style="width:30px; text-align: right;" headerText="Código">
                            <h:outputText value="#{vAprobar2.id_mae}" />
                        </p:column>
                        <p:column style="width:150px" headerText="Solicitante">
                            <h:outputText value="#{vAprobar2.nom_usu}" />
                        </p:column>
                        <p:column style="width:100px" headerText="Departamento">
                            <h:outputText value="#{vAprobar2.nomdep}" />
                        </p:column>
                        <p:column style="width:100px" headerText="Máquina">
                            <h:outputText value="#{vAprobar2.nommaq}" />
                        </p:column>
                        <p:column style="width:110px" headerText="Uso">
                            <h:outputText value="#{vAprobar2.det_uso}" />
                        </p:column>
                        <p:column style="width:110px" headerText="Estado">
                            <h:outputText value="#{vAprobar2.det_sta}" />
                        </p:column>
                    </p:dataTable>
                </p:panel>


                <p:panel>
                    <p:dataTable id="dtAprobadoDet2" var="vAproDet2" 
                                 value="#{manModificaciones.detalles}" 
                                 rows="5"
                                 paginator="true" paginatorPosition="bottom" 
                                 emptyMessage="No se encontraron resultados" 
                                 selectionMode="single" selection="#{manModificaciones.catdetalles}" 
                                 rowKey="#{vAproDet2.id_det}"
                                 editable="false" 
                                 style="width:820px"
                                 >
                        <p:ajax event="rowSelect" listener="#{manModificaciones.onRowSelect}" 
                                update=":frmModificaciones"/>
                        <p:ajax event="rowUnselect"/>

                        <p:column style="width:30px; text-align: right;" headerText="Cantidad">
                            <h:outputText value="#{vAproDet2.det_can}" />
                        </p:column>
                        <p:column style="width:300px" headerText="Descripción Item">
                            <h:outputText value="#{vAproDet2.des_ite}" />
                        </p:column>
                        <p:column style="width:40px" headerText="Estado">
                            <h:outputText value="#{vAproDet2.det_sta}" />
                        </p:column>

                    </p:dataTable>
                </p:panel>

            </h:form>
        </p:dialog>

        <!--******************************************************************** 
        ************************ Pantalla Seguimiento **************************
        *********************************************************************-->

        <p:dialog  id="dlgSeguimiento" widgetVar="wSeguimiento" modal="true" 
                   width="850" height="460" closable="false" resizable="false" 
                   header="Seguimiento de Solicitudes" rendered="true" 
                   dynamic="false" visible="false" 
                   >

            <h:form id="frmSeguimiento"> 
                <p:growl id="msgSeguimiento" showDetail="true" life="4500"/>
                <p:toolbar>
                    <f:facet name="left">
                        <p:commandButton value="Guardar" style=" width: 100px;"
                                         actionListener="#{manSeguimiento.guardar()}"
                                         update=":frmSeguimiento"
                                         icon="ui-icon-disk"
                                         > 
                            <p:confirm header="Guardar Registro" 
                                       message="¿Realmente desea Guardar los cambios realizados?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>

                        <p:commandButton value="Actualizar" style=" width: 100px;"
                                         actionListener="#{manSeguimiento.iniciarventana()}"
                                         update=":frmSeguimiento"
                                         icon="ui-icon-refresh"
                                         /> 

                        <p:commandButton value="Cerrar" style=" width: 100px;"
                                         onclick="PF('wSeguimiento').hide()"
                                         actionListener="#{manSeguimiento.cerrarventana()}"
                                         update=":frmSeguimiento"
                                         icon="ui-icon-close"
                                         />
                        <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                            <p:commandButton value="Sí" type="button" 
                                             styleClass="ui-confirmdialog-yes" 
                                             icon="ui-icon-check" />
                            <p:commandButton value="No" type="button" 
                                             styleClass="ui-confirmdialog-no" 
                                             icon="ui-icon-close" />
                        </p:confirmDialog>
                    </f:facet>

                </p:toolbar>

                <p:panel>
                    <p:dataTable id="dtSegui" var="vSegui" 
                                 value="#{manSeguimiento.maestro}" 
                                 rows="4"
                                 paginator="true" paginatorPosition="bottom" 
                                 emptyMessage="No se encontraron resultados" 
                                 selectionMode="single" selection="#{manSeguimiento.catmaestro}" 
                                 rowKey="#{vSegui.id_mae}"
                                 editable="false" 
                                 style="width:800px"
                                 >
                        <p:ajax event="rowSelect" listener="#{manSeguimiento.onRowSelect}" 
                                update=":frmSeguimiento"/>
                        <p:ajax event="rowUnselect" listener="#{manSeguimiento.onRowUnselect}" 
                                update=":frmSeguimiento"/>

                        <p:column style="width:30px; text-align: right;" headerText="Código">
                            <h:outputText value="#{vSegui.id_mae}" />
                        </p:column>
                        <p:column style="width:180px" headerText="Solicitante">
                            <h:outputText value="#{vSegui.nom_usu}" />
                        </p:column>
                        <p:column style="width:130px" headerText="Departamento">
                            <h:outputText value="#{vSegui.nomdep}" />
                        </p:column>
                        <p:column style="width:130px" headerText="Máquina">
                            <h:outputText value="#{vSegui.nommaq}" />
                        </p:column>
                        <p:column style="width:130px" headerText="Uso">
                            <h:outputText value="#{vSegui.det_uso}" />
                        </p:column>
                    </p:dataTable>
                </p:panel>


                <p:panel>
                    <p:dataTable id="dtSeguiDet" var="vSeguiDet" 
                                 value="#{manSeguimiento.detalles}" 
                                 rows="5"
                                 paginator="true" paginatorPosition="bottom" 
                                 emptyMessage="No se encontraron resultados" 
                                 selectionMode="single" 
                                 selection="#{manSeguimiento.catdetalles}" 
                                 rowKey="#{vSeguiDet.id_det}"
                                 editable="true" 
                                 style="width:800px"
                                 >
                        <p:ajax event="rowEdit" listener="#{manSeguimiento.onRowEdit}" 
                                update=":frmSeguimiento:dtSeguiDet" />
                        <p:ajax event="rowEditCancel" listener="#{manSeguimiento.onRowCancel}" 
                                update=":frmSeguimiento:dtSeguiDet" />
                        <p:column style="width:30px; text-align: right;" headerText="Cantidad">
                            <h:outputText value="#{vSeguiDet.det_can}" />
                        </p:column>
                        <p:column style="width:300px" headerText="Descripción Item">
                            <h:outputText value="#{vSeguiDet.des_ite}" />
                        </p:column>
                        <p:column style="width:70px" headerText="Estado">
                            <p:cellEditor>
                                <f:facet name="output"><h:outputText value="#{vSeguiDet.det_sta}"/></f:facet>
                                <f:facet name="input">
                                    <h:selectOneMenu value="#{vSeguiDet.det_sta}" style="width:100%">
                                        <f:selectItem itemLabel="PENDIENTE" itemValue="PENDIENTE" />
                                        <f:selectItem itemLabel="COTIZADO" itemValue="COTIZADO" />
                                        <f:selectItem itemLabel="COMPRADO" itemValue="COMPRADO" />
                                        <f:selectItem itemLabel="ENTREGADO" itemValue="ENTREGADO" />
                                        <f:selectItem itemLabel="CANCELADO" itemValue="CANCELADO" />
                                    </h:selectOneMenu>
                                </f:facet>
                            </p:cellEditor>
                        </p:column>
                        <p:column style="width:32px">
                            <p:rowEditor />
                        </p:column>

                    </p:dataTable>
                </p:panel>

            </h:form>
        </p:dialog>

        <!--******************************************************************** 
        ************************* Pantalla Histórico ***************************
        *********************************************************************-->

        <p:dialog  id="dlgHistorico" widgetVar="wHistorico" modal="true" 
                   width="770" height="460" closable="false" resizable="false" 
                   header="Consulta Histórica" rendered="true" 
                   dynamic="false" visible="false" 
                   >

            <h:form id="frmHistorico"> 
                <p:growl id="msgHistorico" showDetail="true" life="4500"/>
                <p:toolbar>
                    <f:facet name="left">

                        <h:panelGrid columns="4" cellpadding="3">
                            <h:outputText value="Código:" style="font-weight:bold;" />
                            <p:inputText value="#{manHistorico.buscar}" size="9" />
                            <p:commandButton value="Consultar" style=" width: 100px;"
                                             actionListener="#{manHistorico.llenarMaestro()}"
                                             update=":frmHistorico"
                                             icon="ui-icon-search"
                                             /> 

                            <p:commandButton value="Cerrar" style=" width: 100px;"
                                             onclick="PF('wHistorico').hide()"
                                             actionListener="#{manHistorico.cerrarventana()}"
                                             update=":frmHistorico"
                                             icon="ui-icon-close"
                                             />
                        </h:panelGrid>

                    </f:facet>

                </p:toolbar>

                <p:panel>
                    <p:dataTable id="dtEstado2" var="vEstado2" 
                                 value="#{manHistorico.maestro}" 
                                 rows="4"
                                 paginator="true" paginatorPosition="bottom" 
                                 emptyMessage="No se encontraron resultados" 
                                 selectionMode="single" selection="#{manHistorico.catmaestro}" 
                                 rowKey="#{vEstado2.id_mae}"
                                 editable="false" 
                                 style="width:720px"
                                 >
                        <p:ajax event="rowSelect" listener="#{manHistorico.onRowSelect}" 
                                update=":frmHistorico"/>
                        <p:ajax event="rowUnselect" listener="#{manHistorico.onRowUnselect}" 
                                update=":frmHistorico"/>

                        <p:column style="width:30px; text-align: right;" headerText="Código">
                            <h:outputText value="#{vEstado2.id_mae}" />
                        </p:column>
                        <p:column style="width:180px" headerText="Departamento">
                            <h:outputText value="#{vEstado2.nomdep}" />
                        </p:column>
                        <p:column style="width:180px" headerText="Máquina">
                            <h:outputText value="#{vEstado2.nommaq}" />
                        </p:column>
                        <p:column style="width:100px" headerText="Estado">
                            <h:outputText value="#{vEstado2.det_sta}" />
                        </p:column>
                    </p:dataTable>
                </p:panel>


                <p:panel>
                    <p:dataTable id="dtEstadoDet2" var="vEsDet2" 
                                 value="#{manHistorico.detalles}" 
                                 rows="5"
                                 paginator="true" paginatorPosition="bottom" 
                                 emptyMessage="No se encontraron resultados" 
                                 selectionMode="single" selection="#{manHistorico.catdetalles}" 
                                 rowKey="#{vEsDet2.id_det}"
                                 editable="false" 
                                 style="width:720px"
                                 >
                        <p:ajax event="rowSelect" listener="#{manHistorico.onRowSelect}" 
                                update=":frmHistorico"/>
                        <p:ajax event="rowUnselect"/>

                        <p:column style="width:30px; text-align: right;" headerText="Cantidad">
                            <h:outputText value="#{vEsDet2.det_can}" />
                        </p:column>
                        <p:column style="width:300px" headerText="Descripción Item">
                            <h:outputText value="#{vEsDet2.des_ite}" />
                        </p:column>
                        <p:column style="width:40px" headerText="Estado">
                            <h:outputText value="#{vEsDet2.det_sta}" />
                        </p:column>

                    </p:dataTable>
                </p:panel>

            </h:form>
        </p:dialog>

        <!--******************************************************************** 
        ************************* Pantalla Lista Equipos ***********************
        *********************************************************************-->

        <p:dialog  id="dlgListaEquipos" widgetVar="wListaEquipos" modal="true" 
                   width="850" height="500" closable="false" resizable="false" 
                   header="Detalle de Equipo" rendered="true" 
                   dynamic="true" visible="false"  
                   >
            <h:form id="frmListaEquipos">
                <p:growl id="msgListaEquipos" showDetail="true" life="4500"/>
                <p:toolbar>
                    <f:facet name="left">
                        <p:commandButton value="Nuevo" style=" width: 100px;"
                                         actionListener="#{manListaEquipos.nuevo()}"
                                         update=":frmListaEquipos"
                                         icon="ui-icon-document"
                                         />
                        <p:commandButton value="Guardar" style=" width: 100px;"
                                         actionListener="#{manListaEquipos.guardar()}"
                                         update=":frmListaEquipos"
                                         icon="ui-icon-disk"
                                         > 
                            <p:confirm header="Guardar Registro" 
                                       message="¿Realmente desea Guardar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Eliminar" style=" width: 100px;"
                                         actionListener="#{manListaEquipos.eliminar()}"
                                         update=":frmListaEquipos"
                                         icon="ui-icon-trash"
                                         >
                            <p:confirm header="Eliminar Registro" 
                                       message="¿Realmente desea eliminar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:button value="Imprimir" style=" width: 100px;"
                                  target="_blank" href="/EQUIPO.pdf"
                                  icon="ui-icon-print"
                                  />
                        <p:commandButton value="Buscar" style=" width: 100px;"
                                         onclick="PF('wSearchLE').show()"
                                         update=":frmSearchLE"
                                         icon="ui-icon-search"
                                         actionListener="#{manListaEquipos.iniciarventanabuscar()}"
                                         />
                        <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                            <p:commandButton value="Sí" type="button" 
                                             styleClass="ui-confirmdialog-yes" 
                                             icon="ui-icon-check" />
                            <p:commandButton value="No" type="button" 
                                             styleClass="ui-confirmdialog-no" 
                                             icon="ui-icon-close" />
                        </p:confirmDialog>
                    </f:facet>
                    <f:facet name="right">
                        <p:commandButton value="Cerrar" style=" width: 100px;"
                                         onclick="PF('wListaEquipos').hide()"
                                         actionListener="#{manListaEquipos.cerrarventana()}"
                                         update=":frmListaEquipos"
                                         icon="ui-icon-close"
                                         />
                    </f:facet>
                </p:toolbar>

                <p:tabView id="tvLE" activeIndex="#{manListaEquipos.tabindex}">
                    <p:ajax event="tabChange" listener="#{manListaEquipos.onTabChange}" />
                    <p:tab title="General" id="tabGeneral">
                        <div style=" background-color: #ebf8fe;">
                            <p:focus for="cmbEquipolis" />
                            <p:panel header="Identificación">
                                <h:panelGrid columns="4" cellpadding="5">
                                    <h:outputText value="Equipo" style="font-weight:bold;"/>
                                    <h:outputText value="País" style="font-weight:bold;"/>
                                    <h:outputText value="Proveedor" style="font-weight:bold;"/>
                                    <h:outputText value="Cliente" style="font-weight:bold;"/>
                                    <p:selectOneMenu id ="cmbEquipolis" value="#{manListaEquipos.cod_equ}" 
                                                     style=" width: 150px;"
                                                     filter="true" filterMatchMode="contains" 
                                                     >
                                        <f:selectItem itemLabel="Ninguno" itemValue="0"/>
                                        <f:selectItems value="#{manListaEquipos.equipos}" var="lstequ"
                                                       itemLabel="#{lstequ.nom_equ}" itemValue="#{lstequ.cod_equ}"/> 
                                    </p:selectOneMenu>
                                    <p:selectOneMenu value="#{manListaEquipos.cod_pai}" 
                                                     style=" width: 150px;">
                                        <p:ajax event="change" listener="#{manListaEquipos.onPaisChange()}" update="somproequ,somcliequ" />
                                        <f:selectItem itemLabel="Ninguno" itemValue="0"/>
                                        <f:selectItems value="#{manListaEquipos.paises}" var="lstequpai"
                                                       itemLabel="#{lstequpai.nom_pai}" itemValue="#{lstequpai.cod_pai}"/> 
                                    </p:selectOneMenu>
                                    <p:selectOneMenu  value="#{manListaEquipos.cod_pro}" 
                                                      style=" width: 150px;" id="somproequ">
                                        <f:selectItem itemLabel="Ninguno" itemValue="0"/>
                                        <f:selectItems value="#{manListaEquipos.proveedores}" var="lstpro"
                                                       itemLabel="#{lstpro.nom_pro}" itemValue="#{lstpro.cod_pro}"/> 
                                    </p:selectOneMenu>
                                    <p:selectOneMenu  value="#{manListaEquipos.cod_cli}" 
                                                      style=" width: 150px;"  id="somcliequ">
                                        <f:selectItem itemLabel="Ninguno" itemValue="0"/>
                                        <f:selectItems value="#{manListaEquipos.clientes}" var="lstcli"
                                                       itemLabel="#{lstcli.nom_cli}" itemValue="#{lstcli.cod_cli}"/> 
                                    </p:selectOneMenu>

                                    <h:outputText value="Modelo" style="font-weight:bold;"/>
                                    <h:outputText value="Serie" style="font-weight:bold;"/>
                                    <h:outputText value="Descripción" style="font-weight:bold;"/>
                                    <h:outputText value="Ubicación" style="font-weight:bold;"/>
                                    <p:inputText size="25"
                                                 maxlength="25"
                                                 value="#{manListaEquipos.num_mod}"
                                                 onfocus="this.select()"
                                                 />
                                    <p:inputText size="25"
                                                 maxlength="25"
                                                 value="#{manListaEquipos.num_ser}"
                                                 onfocus="this.select()"
                                                 />
                                    <p:inputText size="25"
                                                 maxlength="25"
                                                 value="#{manListaEquipos.des_equ}"
                                                 onfocus="this.select()"
                                                 />
                                    <p:inputText size="25"
                                                 maxlength="25"
                                                 value="#{manListaEquipos.des_ubi}"
                                                 onfocus="this.select()"
                                                 />
                                </h:panelGrid>
                            </p:panel>
                            <p:panel header="Garantía">
                                <h:panelGrid columns="3" cellpadding="5">
                                    <h:outputText value="Fecha Inicio" style="font-weight:bold;"/>
                                    <h:outputText value="Fecha Fin" style="font-weight:bold;"/>
                                    <h:outputText value="Observaciones" style="font-weight:bold;"/>
                                    <p:calendar  pattern="dd/MM/yyyy" locale="es" 
                                                 readonlyInput="true" showOn="button" size="10"
                                                 style="width: 10px"
                                                 value="#{manListaEquipos.dfecini}" 
                                                 >
                                        <p:ajax event="dateSelect" listener="#{manListaEquipos.dateSelectedFecgarini}" />
                                    </p:calendar> 
                                    <p:calendar  pattern="dd/MM/yyyy" locale="es" 
                                                 readonlyInput="true" showOn="button" size="10"
                                                 style="width: 10px"
                                                 value="#{manListaEquipos.dfecini}"
                                                 >
                                        <p:ajax event="dateSelect" listener="#{manListaEquipos.dateSelectedFecgarfin}" />
                                    </p:calendar> 
                                    <p:inputText size="80"
                                                 maxlength="200"
                                                 value="#{manListaEquipos.gar_obs}"
                                                 onfocus="this.select()"
                                                 />
                                </h:panelGrid>
                            </p:panel>
                        </div>
                    </p:tab>
                    <p:tab title="Historia" id="tabHistoria">
                        <div style=" background-color: #ebf8fe;">
                            <h:panelGrid columns="6" cellpadding="5">
                                <h:outputText value="Fabricacion" style="font-weight:bold;"/>
                                <h:outputText value="Compra" style="font-weight:bold;"/>
                                <h:outputText value="Adquisición" style="font-weight:bold;"/>
                                <h:outputText value="Puesta en Servicio" style="font-weight:bold;"/>
                                <h:outputText value="Último Mantenimiento" style="font-weight:bold;"/>
                                <h:outputText value="Retiro" style="font-weight:bold;"/>
                                <p:calendar  pattern="dd/MM/yyyy" locale="es" 
                                             readonlyInput="true" showOn="button" size="10"
                                             style="width: 10px"
                                             value="#{manListaEquipos.dfecfab}"
                                             >
                                    <p:ajax event="dateSelect" listener="#{manListaEquipos.dateSelectedFecfab}" />
                                </p:calendar> 
                                <p:calendar  pattern="dd/MM/yyyy" locale="es" 
                                             readonlyInput="true" showOn="button" size="10"
                                             style="width: 10px"
                                             value="#{manListaEquipos.dfeccom}"
                                             >
                                    <p:ajax event="dateSelect" listener="#{manListaEquipos.dateSelectedFeccom}" />
                                </p:calendar> 
                                <p:calendar  pattern="dd/MM/yyyy" locale="es" 
                                             readonlyInput="true" showOn="button" size="10"
                                             style="width: 10px"
                                             value="#{manListaEquipos.dfecadq}"
                                             >
                                    <p:ajax event="dateSelect" listener="#{manListaEquipos.dateSelectedFecadq}" />
                                </p:calendar> 
                                <p:calendar  pattern="dd/MM/yyyy" locale="es" 
                                             readonlyInput="true" showOn="button" size="10"
                                             style="width: 10px"
                                             value="#{manListaEquipos.dfecpueser}"
                                             >
                                    <p:ajax event="dateSelect" listener="#{manListaEquipos.dateSelectedFecpueser}" />
                                </p:calendar> 
                                <p:calendar  pattern="dd/MM/yyyy" locale="es" 
                                             readonlyInput="true" showOn="button" size="10"
                                             style="width: 10px"
                                             value="#{manListaEquipos.dfecultman}"
                                             >
                                    <p:ajax event="dateSelect" listener="#{manListaEquipos.dateSelectedFecultman}" />
                                </p:calendar> 
                                <p:calendar  pattern="dd/MM/yyyy" locale="es" 
                                             readonlyInput="true" showOn="button" size="10"
                                             style="width: 10px"
                                             value="#{manListaEquipos.dfecret}"
                                             >
                                    <p:ajax event="dateSelect" listener="#{manListaEquipos.dateSelectedFecret}" />
                                </p:calendar> 
                            </h:panelGrid>

                        </div>
                        <p:dataTable id="dtEncManH" var="vEncManH" 
                                     value="#{manListaEquipos.mantenimientos}" 
                                     emptyMessage="No se encontraron resultados" 
                                     selectionMode="single" selection="#{manListaEquipos.catmantenimientos}" 
                                     rowKey="#{vEncManH.cod_man}"
                                     editable="false"
                                     scrollable="true"
                                     scrollHeight="240"
                                     style="width:781px"
                                     >

                            <p:column style="width:80px;" headerText="Tipo">
                                <h:outputText value="#{vEncManH.nomtip}" />
                            </p:column>
                            <p:column style="width:80px" headerText="Fecha Inicio">
                                <h:outputText value="#{vEncManH.fec_ini}" />
                            </p:column>
                            <p:column style="width:80px" headerText="Fecha Fin">
                                <h:outputText value="#{vEncManH.fec_fin}" />
                            </p:column>
                            <p:column style="width:150px" headerText="Estado">
                                <h:outputText value="#{vEncManH.status}" />
                            </p:column>
                        </p:dataTable>

                    </p:tab>
                    <p:tab title="Software" id="tabSoftware">
                        <p:toolbar>
                            <f:facet name="right">
                                <p:commandButton title="Agregar" style=" width: 30px;"
                                                 update=":frmListaEquipos"
                                                 icon="ui-icon-plus" 
                                                 actionListener="#{manListaEquipos.agregarsistema()}"
                                                 />
                            </f:facet>
                        </p:toolbar>
                        <p:panel id="panelsoftware">
                            <h:panelGrid columns="4" cellpadding="5">
                                <h:outputText value="Sistema" style="font-weight:bold;"/>
                                <h:outputText value="Versión Anterior" style="font-weight:bold;"/>
                                <h:outputText value="Versión Actual" style="font-weight:bold;"/>
                                <h:outputText value="Fecha Actualización" style="font-weight:bold;"/>
                                <p:inputText size="50"
                                             maxlength="200"
                                             value="#{manListaEquipos.s_det_obs}"
                                             onfocus="this.select()"
                                             />
                                <p:inputText size="20"
                                             maxlength="20"
                                             value="#{manListaEquipos.s_ver_ant}"
                                             onfocus="this.select()"
                                             />
                                <p:inputText size="20"
                                             maxlength="20"
                                             value="#{manListaEquipos.s_ver_act}"
                                             onfocus="this.select()"
                                             />
                                <p:calendar  pattern="dd/MM/yyyy" locale="es" 
                                             readonlyInput="true" showOn="button" size="10"
                                             style="width: 10px"
                                             value="#{manListaEquipos.dfecact}"
                                             >
                                    <p:ajax event="dateSelect" listener="#{manListaEquipos.dateSelectedFecact}" />
                                </p:calendar> 
                            </h:panelGrid>
                        </p:panel>

                        <p:contextMenu for="dtSys">
                            <p:menuitem value="Eliminar" 
                                        update="panelsoftware,dtSys" 
                                        icon="ui-icon-close" 
                                        actionListener="#{manListaEquipos.eliminarsistema()}"/>
                        </p:contextMenu>

                        <p:dataTable id="dtSys" var="vSys" 
                                     value="#{manListaEquipos.sistemas}" 
                                     emptyMessage="No se encontraron resultados" 
                                     selectionMode="single" selection="#{manListaEquipos.catsistemas}" 
                                     rowKey="#{vSys.cod_sys}"
                                     editable="true"
                                     scrollable="true"
                                     scrollHeight="200"
                                     style="width:780px"
                                     >

                            <p:column style="width:150px;" headerText="Sistema">
                                <p:cellEditor>
                                    <f:facet name="output"><h:outputText value="#{vSys.det_obs}" /></f:facet>
                                    <f:facet name="input"><p:inputText value="#{vSys.det_obs}" style="width:100%" required="true"/></f:facet>
                                </p:cellEditor>
                            </p:column>
                            <p:column style="width:90px" headerText="Versión Anterior">
                                <p:cellEditor>
                                    <f:facet name="output"><h:outputText value="#{vSys.ver_ant}" /></f:facet>
                                    <f:facet name="input"><p:inputText value="#{vSys.ver_ant}" style="width:100%" required="true" maxlength="20"/></f:facet>
                                </p:cellEditor>
                            </p:column>
                            <p:column style="width:90px" headerText="Versión Actual">
                                <p:cellEditor>
                                    <f:facet name="output"><h:outputText value="#{vSys.ver_act}" /></f:facet>
                                    <f:facet name="input"><p:inputText value="#{vSys.ver_act}" style="width:100%" required="true" maxlength="20"/></f:facet>
                                </p:cellEditor>
                            </p:column>
                            <p:column style="width:100px" headerText="Fecha Actualización">
                                <p:cellEditor>
                                    <f:facet name="output"><h:outputText value="#{vSys.fec_act}" /></f:facet>
                                    <f:facet name="input"><p:inputText value="#{vSys.fec_act}" style="width:100%" required="true" maxlength="10"/></f:facet>
                                </p:cellEditor>
                            </p:column>
                            <p:column style="width:32px">
                                <p:rowEditor />
                            </p:column>
                        </p:dataTable>
                    </p:tab>
                    <p:tab title="Contratos" id="tabContratos">
                        <p:toolbar>
                            <f:facet name="right">
                                <p:commandButton title="Agregar" style=" width: 30px;"
                                                 update=":frmListaEquipos"
                                                 icon="ui-icon-plus" 
                                                 actionListener="#{manListaEquipos.agregarcontrato()}"
                                                 />
                            </f:facet>
                        </p:toolbar>
                        <p:panel id="panelcontratos">
                            <h:panelGrid columns="4" cellpadding="5">
                                <h:outputText value="Número" style="font-weight:bold;"/>
                                <h:outputText value="Observaciones" style="font-weight:bold;"/>
                                <h:outputText value="Fecha Inicio" style="font-weight:bold;"/>
                                <h:outputText value="Fecha Expiración" style="font-weight:bold;"/>
                                <p:inputText size="20"
                                             maxlength="20"
                                             value="#{manListaEquipos.c_cod_ref}"
                                             onfocus="this.select()"
                                             />
                                <p:inputText size="50"
                                             maxlength="200"
                                             value="#{manListaEquipos.c_des_inf}"
                                             onfocus="this.select()"
                                             />
                                <p:calendar  pattern="dd/MM/yyyy" locale="es" 
                                             readonlyInput="true" showOn="button" size="10"
                                             style="width: 10px"
                                             value="#{manListaEquipos.dfeccon}"
                                             >
                                    <p:ajax event="dateSelect" listener="#{manListaEquipos.dateSelectedFeccon}" />
                                </p:calendar> 
                                <p:calendar  pattern="dd/MM/yyyy" locale="es" 
                                             readonlyInput="true" showOn="button" size="10"
                                             style="width: 10px"
                                             value="#{manListaEquipos.dfecexp}"
                                             >
                                    <p:ajax event="dateSelect" listener="#{manListaEquipos.dateSelectedFecexp}" />
                                </p:calendar> 
                            </h:panelGrid>
                        </p:panel>

                        <p:contextMenu for="dtCon">
                            <p:menuitem value="Eliminar" 
                                        update="panelcontratos,dtCon" 
                                        icon="ui-icon-close" 
                                        actionListener="#{manListaEquipos.eliminarcontrato()}"/>
                        </p:contextMenu>
                        <p:dataTable id="dtCon" var="vCon" 
                                     value="#{manListaEquipos.contratos}" 
                                     emptyMessage="No se encontraron resultados" 
                                     selectionMode="single" selection="#{manListaEquipos.catcontratos}" 
                                     rowKey="#{vCon.cod_con}"
                                     editable="true"
                                     scrollable="true"
                                     scrollHeight="190"
                                     style="width:780px"
                                     >

                            <p:column style="width:50px;" headerText="Número">
                                <p:cellEditor>
                                    <f:facet name="output"><h:outputText value="#{vCon.cod_ref}" /></f:facet>
                                    <f:facet name="input"><p:inputText value="#{vCon.cod_ref}" style="width:100%" required="true"/></f:facet>
                                </p:cellEditor>
                            </p:column>
                            <p:column style="width:100px;" headerText="Observaciones">
                                <p:cellEditor>
                                    <f:facet name="output"><h:outputText value="#{vCon.des_inf}" /></f:facet>
                                    <f:facet name="input"><p:inputText value="#{vCon.des_inf}" style="width:100%" required="true"/></f:facet>
                                </p:cellEditor>
                            </p:column>
                            <p:column style="width:70px" headerText="Fecha Contrato">
                                <p:cellEditor>
                                    <f:facet name="output"><h:outputText value="#{vCon.fec_con}" /></f:facet>
                                    <f:facet name="input"><p:inputText value="#{vCon.fec_con}" style="width:100%" required="true"/></f:facet>
                                </p:cellEditor>
                            </p:column>
                            <p:column style="width:70px" headerText="Fecha Expiración">
                                <p:cellEditor>
                                    <f:facet name="output"><h:outputText value="#{vCon.fec_exp}" /></f:facet>
                                    <f:facet name="input"><p:inputText value="#{vCon.fec_exp}" style="width:100%" required="true"/></f:facet>
                                </p:cellEditor>
                            </p:column>
                            <p:column style="width:32px">
                                <p:rowEditor />
                            </p:column>
                        </p:dataTable>
                    </p:tab>

                </p:tabView>
            </h:form>
        </p:dialog>

        <!--******************************************************************** 
        *********************** Pantalla Buscar Lista Equipo *******************
        *********************************************************************-->

        <p:dialog  id="dlgSearchLE" widgetVar="wSearchLE" modal="true" 
                   width="850" height="400" closable="false" resizable="false" 
                   header="Buscar Equipos" rendered="true" 
                   dynamic="false" visible="false" 
                   >
            <h:form id="frmSearchLE">
                <p:growl id="msgSearchLE" showDetail="true" life="4500"/>
                <p:toolbar>
                    <f:facet name="right">
                        <p:commandButton value="Buscar" 
                                         icon="ui-icon-search" 
                                         update="dtSLE" 
                                         actionListener="#{manListaEquipos.llenarLequipos()}"/>
                        <p:commandButton value="Cerrar" 
                                         icon="ui-icon-close" 
                                         update="dtSLE" 
                                         onclick="PF('wSearchLE').hide()"
                                         actionListener="#{manListaEquipos.cerrarventanabuscar()}"/>
                    </f:facet>
                </p:toolbar>
                <p:panel>
                    <h:panelGrid columns="4" cellpadding="5">
                        <h:outputText value="Número Serie" style="font-weight:bold;"/>
                        <h:outputText value="País" style="font-weight:bold;"/>
                        <h:outputText value="Equipo" style="font-weight:bold;"/>
                        <h:outputText value="Cliente" style="font-weight:bold;"/>
                        <p:inputText size="20"
                                     maxlength="20"
                                     value="#{manListaEquipos.num_ser_b}"
                                     onfocus="this.select()"
                                     />
                        <p:selectOneMenu value="#{manListaEquipos.cod_pai_b}" 
                                         style=" width: 160px;">
                            <p:ajax event="change" listener="#{manListaEquipos.onPaisBusChange()}" update="somclibus" />
                            <f:selectItem itemLabel="Ninguno" itemValue="0"/>
                            <f:selectItems value="#{manListaEquipos.paises}" var="lstpaibus"
                                           itemLabel="#{lstpaibus.nom_pai}" itemValue="#{lstpaibus.cod_pai}"/> 
                        </p:selectOneMenu>
                        <p:selectOneMenu value="#{manListaEquipos.cod_equ_b}" 
                                         style=" width: 160px;">
                            <f:selectItem itemLabel="Ninguno" itemValue="0"/>
                            <f:selectItems value="#{manListaEquipos.equipos}" var="lstequ2"
                                           itemLabel="#{lstequ2.nom_equ}" itemValue="#{lstequ2.cod_equ}"/> 
                        </p:selectOneMenu>
                        <p:selectOneMenu  value="#{manListaEquipos.cod_cli_b}" 
                                          style=" width: 200px;" id="somclibus">
                            <f:selectItem itemLabel="Ninguno" itemValue="0"/>
                            <f:selectItems value="#{manListaEquipos.clientesb}" var="lstcli2"
                                           itemLabel="#{lstcli2.nom_cli}" itemValue="#{lstcli2.cod_cli}"/> 
                        </p:selectOneMenu>
                    </h:panelGrid>

                    <p:dataTable id="dtSLE" var="vSLE" 
                                 value="#{manListaEquipos.lequipos}" 
                                 emptyMessage="No se encontraron resultados" 
                                 selectionMode="single" selection="#{manListaEquipos.catlistaequipos}" 
                                 rowKey="#{vSLE.cod_lis_equ}"
                                 editable="false"
                                 scrollable="true"
                                 scrollHeight="220"
                                 style="width:790px"
                                 >
                        <p:ajax event="rowSelect" listener="#{manListaEquipos.onRowSelect}" 
                                update=":frmSearchLE"/>
                        <p:column style="width:30px;" headerText="País">
                            <h:outputText value="#{vSLE.nompai}" />
                        </p:column>
                        <p:column style="width:30px;" headerText="Equipo">
                            <h:outputText value="#{vSLE.nomequ}" />
                        </p:column>
                        <p:column style="width:40px" headerText="Serie">
                            <h:outputText value="#{vSLE.num_ser}" />
                        </p:column>
                        <p:column style="width:60px" headerText="Cliente">
                            <h:outputText value="#{vSLE.nomcli}" />
                        </p:column>
                        <p:column style="width:80px" headerText="Ubicación">
                            <h:outputText value="#{vSLE.des_ubi}" />
                        </p:column>
                    </p:dataTable>
                </p:panel>
            </h:form>


        </p:dialog>

        <!--******************************************************************** 
        ************************ Pantalla Almacén Piezas ***********************
        *********************************************************************-->

        <p:dialog  id="dlgListaPiezas" widgetVar="wListaPiezas" modal="true" 
                   width="920" height="500" closable="false" resizable="false" 
                   header="Almacén de Piezas" rendered="true" 
                   dynamic="true" visible="false"  
                   >
            <h:form id="frmListaPiezas">
                <p:growl id="msgListaPiezas" showDetail="true" life="4500"/>
                <p:toolbar>
                    <f:facet name="left">
                        <p:commandButton value="Nuevo" style=" width: 100px;"
                                         actionListener="#{manTblPiezas.nuevo()}"
                                         update=":frmListaPiezas"
                                         icon="ui-icon-document"
                                         />
                        <p:commandButton value="Guardar" style=" width: 100px;"
                                         actionListener="#{manTblPiezas.guardar()}"
                                         update=":frmListaPiezas"
                                         icon="ui-icon-disk"
                                         > 
                            <p:confirm header="Guardar Registro" 
                                       message="¿Realmente desea Guardar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Eliminar" style=" width: 100px;"
                                         actionListener="#{manTblPiezas.eliminar()}"
                                         update=":frmListaPiezas"
                                         icon="ui-icon-trash"
                                         >
                            <p:confirm header="Eliminar Registro" 
                                       message="¿Realmente desea eliminar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>

                        <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                            <p:commandButton value="Sí" type="button" 
                                             styleClass="ui-confirmdialog-yes" 
                                             icon="ui-icon-check" />
                            <p:commandButton value="No" type="button" 
                                             styleClass="ui-confirmdialog-no" 
                                             icon="ui-icon-close" />
                        </p:confirmDialog>
                    </f:facet>
                    <f:facet name="right">
                        <p:commandButton value="Modificar" style=" width: 100px;"
                                         onclick="PF('wBuscarListaPiezas').show()"
                                         actionListener="#{manTblPiezas.iniciarventanabuscarid()}"
                                         update=":frmBuscarListaPiezas"
                                         icon="ui-icon-search"
                                         />
                        <p:commandButton value="Cerrar" style=" width: 100px;"
                                         onclick="PF('wListaPiezas').hide()"
                                         actionListener="#{manTblPiezas.cerrarventana()}"
                                         update=":frmListaPiezas"
                                         icon="ui-icon-close"
                                         />

                    </f:facet>
                </p:toolbar>

                <p:panel id="panencabezado">
                    <h:panelGrid columns="5" cellpadding="5">
                        <h:outputText value="" style="font-weight:bold;"/>
                        <h:outputText value="Fecha" style="font-weight:bold;"/>
                        <h:outputText value="País" style="font-weight:bold;"/>
                        <h:outputText value="Proveedor" style="font-weight:bold;"/>
                        <h:outputText value="Movimiento" style="font-weight:bold;"/>
                        <p:inputSwitch offLabel="Entrada" onLabel="Salida" value="#{manTblPiezas.boolinout}" >
                            <p:ajax listener="#{manTblPiezas.inout()}" update=":frmListaPiezas" />
                        </p:inputSwitch>
                        <p:calendar  value="#{manTblPiezas.mfecha}"
                                     pattern="dd/MM/yyyy" 
                                     locale="es" 
                                     readonlyInput="true" 
                                     showOn="button" 
                                     size="10"
                                     style="width: 10px"
                                     >
                            <p:ajax event="dateSelect" listener="#{manTblPiezas.dateSelectedAction}" />
                        </p:calendar> 

                        <p:selectOneMenu value="#{manTblPiezas.cod_pai}" 
                                         style=" width: 160px;">
                            <p:ajax event="change" listener="#{manTblPiezas.seleccionarpais()}" 
                                    update="somprolstpie,detallepiezas" />
                            <f:selectItem itemLabel="Ninguno" itemValue="0"/>
                            <f:selectItems value="#{manTblPiezas.paises}" var="lstpaipie"
                                           itemLabel="#{lstpaipie.nom_pai}" itemValue="#{lstpaipie.cod_pai}"/> 
                        </p:selectOneMenu>
                        <p:selectOneMenu id="somprolstpie" value="#{manTblPiezas.cod_pro}" 
                                         style=" width: 160px;">
                            <f:selectItem itemLabel="Ninguno" itemValue="0"/>
                            <f:selectItems value="#{manTblPiezas.proveedores}" var="lstpropie"
                                           itemLabel="#{lstpropie.nom_pro}" itemValue="#{lstpropie.cod_pro}"/> 
                        </p:selectOneMenu>
                        <p:selectOneMenu value="#{manTblPiezas.cod_mov}" 
                                         style=" width: 160px;">
                            <f:selectItem itemLabel="Ninguno" itemValue="0"/>
                            <f:selectItems value="#{manTblPiezas.movimientos}" var="lstmovpie"
                                           itemLabel="#{lstmovpie.nom_mov}" itemValue="#{lstmovpie.id_mov}"/> 
                        </p:selectOneMenu>
                    </h:panelGrid>    

                    <h:panelGrid columns="4" cellpadding="5">
                        <h:outputText value="PO QuickBook" style="font-weight:bold;"/>
                        <h:outputText value="Solicitud Compra" style="font-weight:bold;"/>
                        <h:outputText value="Doc. Entrada/Salida" style="font-weight:bold;"/>
                        <h:outputText value="Observaciones" style="font-weight:bold;"/>
                        <p:inputText maxlength="12" size="15" value="#{manTblPiezas.por_qbo}" />
                        <p:selectOneMenu value="#{manTblPiezas.cod_sol}" 
                                         style=" width: 120px;"
                                         filter="true" 
                                         filterMatchMode="contains"
                                         >
                            <p:ajax event="change" listener="#{manTblPiezas.selectsol()}" update=":frmListaPiezas" />
                            <f:selectItem itemLabel="Ninguna" itemValue="0" />
                            <f:selectItems value="#{manTblPiezas.solicitudes}" var="lstdocinout"
                                           itemLabel="PO: #{lstdocinout.id_mae} - #{lstdocinout.fec_sol}" itemValue="#{lstdocinout.id_mae}"/> 
                        </p:selectOneMenu>
                        <p:inputText maxlength="20" size="15" value="#{manTblPiezas.doc_tra}" />
                        <p:inputText maxlength="200" size="74" value="#{manTblPiezas.det_obs}"/>
                    </h:panelGrid>
                </p:panel>
                <p:panel id="detallepiezas">
                    <h:panelGrid columns="7" cellpadding="5">
                        <h:outputText value="Pieza" style="font-weight:bold;"/>
                        <h:outputText value="" style="font-weight:bold;"/>
                        <h:outputText value="Bodega" style="font-weight:bold;"/>
                        <h:outputText value="Ubicación" style="font-weight:bold;"/>
                        <h:outputText value="Cantidad" style="font-weight:bold;"/>
                        <h:outputText value="Precio Unitario" style="font-weight:bold;"/>
                        <h:outputText value="" style="font-weight:bold;"/>
                        <p:selectOneMenu value="#{manTblPiezas.cod_pie}" 
                                         style=" width: 200px;"
                                         filter="true" 
                                         filterMatchMode="contains"
                                         >
                            <f:selectItem itemLabel="Ninguno" itemValue="0"/>
                            <f:selectItems value="#{manTblPiezas.piezas}" var="lstpiepie"
                                           itemLabel="#{lstpiepie.cod_ref} | #{lstpiepie.nom_pie}" itemValue="#{lstpiepie.cod_pie}"/> 
                        </p:selectOneMenu>
                        <p:commandButton title="Existencias" 
                                         icon="ui-icon-search" 
                                         style=" width: 30px;" 
                                         actionListener="#{manTblPiezas.iniciarventanaexistencia()}"
                                         onclick="PF('wExistencias').show()"
                                         update=":frmExistencias"
                                         />
                        <p:selectOneMenu value="#{manTblPiezas.cod_bod}" 
                                         style=" width: 150px;">
                            <p:ajax event="change" listener="#{manTblPiezas.llenarUbicaciones()}" update="somubi" />
                            <f:selectItem itemLabel="Seleccione Una" itemValue="0"/>
                            <f:selectItems value="#{manTblPiezas.bodegas}" var="lstbodpie"
                                           itemLabel="#{lstbodpie.nom_bod}" itemValue="#{lstbodpie.id_bod}"/> 
                        </p:selectOneMenu>
                        <p:selectOneMenu id="somubi" value="#{manTblPiezas.cod_ubi}" 
                                         style=" width: 150px;">
                            <f:selectItem itemLabel="Seleccione Una" itemValue="0"/>
                            <f:selectItems value="#{manTblPiezas.ubicaciones}" var="lstubipie"
                                           itemLabel="#{lstubipie.nom_ubi}" itemValue="#{lstubipie.id_ubi}"/> 
                        </p:selectOneMenu>
                        <p:inputText maxlength="12" size="10" value="#{manTblPiezas.det_can}"/>
                        <p:inputText maxlength="12" size="10" value="#{manTblPiezas.det_cos}"/>
                        <p:commandButton title="Agregar" 
                                         icon="ui-icon-plus" 
                                         style=" width: 30px;" 
                                         actionListener="#{manTblPiezas.agregardetalle()}" 
                                         update="detallepiezas,dtInv"
                                         />
                    </h:panelGrid>
                </p:panel>
                <p:dataTable id="dtInv" var="vDetInv" 
                             value="#{manTblPiezas.piezasdetalle}" 
                             emptyMessage="No se encontraron resultados" 
                             selection="#{manTblPiezas.cattblpiezasdetalle}" 
                             selectionMode="single"
                             rowKey="#{vDetInv.cod_det}"
                             editable="#{manTblPiezas.booleditable}"
                             scrollable="true"
                             scrollHeight="160"
                             style="width:895px"
                             >

                    <p:ajax event="rowSelect" listener="#{manTblPiezas.onRowSelect}" 
                            update=":frmListaPiezas:detallepiezas"/>

                    <p:column style="width:2px;" headerText="Id">
                        <h:outputText value="#{vDetInv.cod_det}" />
                    </p:column>
                    <p:column style="width:12px;" headerText="Cantidad">
                        <p:cellEditor>
                            <f:facet name="output"><h:outputText value="#{vDetInv.det_can}" /></f:facet>
                            <f:facet name="input"><p:inputText value="#{vDetInv.det_can}" style="width:100%"/></f:facet>
                        </p:cellEditor>
                    </p:column>
                    <p:column style="width:90px;" headerText="Pieza">
                        <h:outputText value="#{vDetInv.nompie}" />
                    </p:column>
                    <p:column style="width:50px;" headerText="Bodega">
                        <p:cellEditor>
                            <f:facet name="output"><h:outputText value="#{vDetInv.nombod}" /></f:facet>
                            <f:facet name="input">
                                <p:selectOneMenu value="#{manTblPiezas.cod_bod}" 
                                                 style=" width: 100%;">
                                    <p:ajax event="change" listener="#{manTblPiezas.llenarUbicaciones()}" update="somubi2" />
                                    <f:selectItem itemLabel="Seleccione Una" itemValue="0"/>
                                    <f:selectItems value="#{manTblPiezas.bodegas}" var="lstbodpie2"
                                                   itemLabel="#{lstbodpie2.nom_bod}" itemValue="#{lstbodpie2.id_bod}"/> 
                                </p:selectOneMenu>
                            </f:facet>
                        </p:cellEditor>
                    </p:column>
                    <p:column style="width:50px;" headerText="Ubicación">
                        <p:cellEditor>
                            <f:facet name="output"><h:outputText value="#{vDetInv.nomubi}" /></f:facet>
                            <f:facet name="input">
                                <p:selectOneMenu id="somubi2" value="#{manTblPiezas.cod_ubi}" 
                                                 style=" width: 100%;">
                                    <f:selectItem itemLabel="Seleccione Una" itemValue="0"/>
                                    <f:selectItems value="#{manTblPiezas.ubicaciones}" var="lstubipie2"
                                                   itemLabel="#{lstubipie2.nom_ubi}" itemValue="#{lstubipie2.id_ubi}"/> 
                                </p:selectOneMenu>
                            </f:facet>
                        </p:cellEditor>
                    </p:column>
                    <p:column style="width:30px;" headerText="P.Uni">
                        <h:outputText value="#{vDetInv.det_cos}" />
                    </p:column>
                    <p:column style="width:25px">
                        <p:rowEditor />
                    </p:column>

                </p:dataTable>

            </h:form>
        </p:dialog>

        <p:dialog  id="dlgExistencias" widgetVar="wExistencias" modal="true" 
                   width="850" height="360" closable="false" resizable="false" 
                   header="Existencias" rendered="true" 
                   dynamic="false" visible="false"  
                   >
            <h:form id="frmExistencias">
                <p:toolbar>
                    <f:facet name="right">
                        <p:commandButton value="Cerrar" style=" width: 100px;"
                                         onclick="PF('wExistencias').hide()"
                                         actionListener="#{manTblPiezas.cerrarventanaexistencia()}"
                                         update=":frmListaPiezas,:frmExistencias"
                                         icon="ui-icon-close"
                                         />
                    </f:facet>

                </p:toolbar>
                <p:panel>
                    <h:panelGrid columns="5" cellpadding="5">
                        <h:outputText value="Pieza" style="font-weight:bold;"/>
                        <h:outputText value="País" style="font-weight:bold;"/>
                        <h:outputText value="Bodega" style="font-weight:bold;"/>
                        <h:outputText value="Ubicación" style="font-weight:bold;"/>
                        <h:outputText value="" style="font-weight:bold;"/>
                        <p:selectOneMenu value="#{manTblPiezas.cod_pie}" 
                                         style=" width: 200px;"
                                         filter="true" 
                                         filterMatchMode="contains"
                                         >
                            <f:selectItem itemLabel="Ninguno" itemValue="0"/>
                            <f:selectItems value="#{manTblPiezas.piezas}" var="lstpiepie"
                                           itemLabel="#{lstpiepie.cod_ref} | #{lstpiepie.nom_pie}" itemValue="#{lstpiepie.cod_pie}"/> 
                        </p:selectOneMenu>
                        <p:inputText size="20" value="#{manTblPiezas.nompai}" readonly="true"/>
                        <p:selectOneMenu value="#{manTblPiezas.cod_bod}" 
                                         style=" width: 150px;">
                            <p:ajax event="change" listener="#{manTblPiezas.llenarUbicaciones()}" 
                                    update=":frmListaPiezas:dtInv:somubi2,somubi3" />
                            <f:selectItem itemLabel="Seleccione Una" itemValue="0"/>
                            <f:selectItems value="#{manTblPiezas.bodegas}" var="lstbodpie"
                                           itemLabel="#{lstbodpie.nom_bod}" itemValue="#{lstbodpie.id_bod}"/> 
                        </p:selectOneMenu>
                        <p:selectOneMenu id="somubi3" value="#{manTblPiezas.cod_ubi}" 
                                         style=" width: 150px;">
                            <f:selectItem itemLabel="Seleccione Una" itemValue="0"/>
                            <f:selectItems value="#{manTblPiezas.ubicaciones}" var="lstubipie"
                                           itemLabel="#{lstubipie.nom_ubi}" itemValue="#{lstubipie.id_ubi}"/> 
                        </p:selectOneMenu>
                        <p:commandButton title="Buscar" 
                                         icon="ui-icon-search" 
                                         style=" width: 30px;" 
                                         actionListener="#{manTblPiezas.buscarexistencia()}" 
                                         update="dtExistencias"
                                         />
                    </h:panelGrid>
                </p:panel>
                <p:dataTable id="dtExistencias" var="vExistencias" 
                             value="#{manTblPiezas.existencias}" 
                             emptyMessage="No se encontraron resultados" 
                             selection="#{manTblPiezas.catpiezasconexistencia}" 
                             selectionMode="single"
                             rowKey="#{vExistencias.cod_pie}"
                             scrollable="true"
                             scrollHeight="180"
                             style="width:823px"
                             >

                  
                    <p:column style="width:50px;" headerText="Pieza">
                        <h:outputText value="#{vExistencias.nompie}" />
                    </p:column>
                    <p:column style="width:50px;" headerText="Bodega">
                        <h:outputText value="#{vExistencias.nombod}" />
                    </p:column>
                    <p:column style="width:50px;" headerText="Ubicación">
                        <h:outputText value="#{vExistencias.nomubi}" />
                    </p:column>
                    <p:column style="width:50px;" headerText="Stock">
                        <h:outputText value="#{vExistencias.can_sto}" />
                    </p:column>
                    <p:column style="width:50px;" headerText="Reserva">
                        <h:outputText value="#{vExistencias.can_res}" />
                    </p:column>
                    <p:column style="width:50px;" headerText="Disponible">
                        <h:outputText value="#{vExistencias.can_sto - vExistencias.can_res}" />
                    </p:column>

                </p:dataTable>
            </h:form>
        </p:dialog>

        <p:dialog  id="dlgBuscarListaPiezas" widgetVar="wBuscarListaPiezas" modal="true" 
                   width="850" height="415" closable="false" resizable="false" 
                   header="Movimientos de Almacén" rendered="true" 
                   dynamic="false" visible="false"  
                   >
            <h:form id="frmBuscarListaPiezas">
                <p:toolbar>
                    <f:facet name="right">
                        <p:commandButton value="Cerrar" style=" width: 100px;"
                                         onclick="PF('wBuscarListaPiezas').hide()"
                                         actionListener="#{manTblPiezas.cerrarventanaid()}"
                                         update=":frmListaPiezas,:frmBuscarListaPiezas"
                                         icon="ui-icon-close"
                                         />
                    </f:facet>

                </p:toolbar>
                <p:panel>
                    <h:panelGrid columns="4" cellpadding="5">
                        <h:outputText value="Id Ingreso/Salida" style="font-weight:bold;"/>
                        <h:outputText value="País" style="font-weight:bold;"/>
                        <h:outputText value="Proveedor" style="font-weight:bold;"/>
                        <h:outputText value="PO Quickbook" style="font-weight:bold;"/>
                        <p:inputText size="20" value="#{manTblPiezas.cod_lis_pie}" />
                        <p:selectOneMenu value="#{manTblPiezas.paibus}" 
                                         style=" width: 160px;">
                            <p:ajax event="change" listener="#{manTblPiezas.seleccionarpais()}" 
                                    update="somprobuslstpie" />
                            <f:selectItem itemLabel="Ninguno" itemValue="0"/>
                            <f:selectItems value="#{manTblPiezas.paises}" var="lstpaipie2"
                                           itemLabel="#{lstpaipie2.nom_pai}" itemValue="#{lstpaipie2.cod_pai}"/> 
                        </p:selectOneMenu>
                        <p:selectOneMenu id="somprobuslstpie" value="#{manTblPiezas.probus}" 
                                         style=" width: 160px;">
                            <f:selectItem itemLabel="Ninguno" itemValue="0"/>
                            <f:selectItems value="#{manTblPiezas.proveedores}" var="lstpropie3"
                                           itemLabel="#{lstpropie3.nom_pro}" itemValue="#{lstpropie3.cod_pro}"/> 
                        </p:selectOneMenu>
                        <p:inputText size="20" value="#{manTblPiezas.pobus}" />
                    </h:panelGrid>
                    <h:panelGrid columns="3" cellpadding="5">
                        <h:outputText value="Tipo Movimiento" style="font-weight:bold;"/>
                        <h:outputText value="Fecha" style="font-weight:bold;"/>
                        <h:outputText value="" style="font-weight:bold;"/>
                        <p:selectOneMenu value="#{manTblPiezas.movpus}" 
                                         style=" width: 160px;">
                            <f:selectItem itemLabel="Ninguno" itemValue="0"/>
                            <f:selectItems value="#{manTblPiezas.movimientostotal}" var="lstmovpie3"
                                           itemLabel="#{lstmovpie3.nom_mov}" itemValue="#{lstmovpie3.id_mov}"/> 
                        </p:selectOneMenu>
                        <p:inputText size="20" value="#{manTblPiezas.fecbus}" /> 

                        <p:commandButton title="Buscar" 
                                         icon="ui-icon-search" 
                                         style=" width: 30px;" 
                                         actionListener="#{manTblPiezas.buscarid()}" 
                                         update="dtIngSal"
                                         />
                    </h:panelGrid>
                </p:panel>
                <p:dataTable id="dtIngSal" var="vIngSal" 
                             value="#{manTblPiezas.piezasencabezado}" 
                             emptyMessage="No se encontraron resultados" 
                             selection="#{manTblPiezas.cattblpiezas}" 
                             selectionMode="single"
                             rowKey="#{vIngSal.cod_lis_pie}"
                             scrollable="true"
                             scrollHeight="180"
                             style="width:823px"
                             >
                    <p:ajax event="rowSelect" listener="#{manTblPiezas.onRowSelectBID}" 
                            update=":frmListaPiezas,:frmBuscarListaPiezas"/>
                    <p:column style="width:30px;" headerText="Fecha">
                        <h:outputText value="#{vIngSal.fec_tra}" />
                    </p:column>
                    <p:column style="width:40px;" headerText="País">
                        <h:outputText value="#{vIngSal.nompai}" />
                    </p:column>
                    <p:column style="width:60px;" headerText="Proveedor">
                        <h:outputText value="#{vIngSal.nompro}" />
                    </p:column>
                    <p:column style="width:40px;" headerText="Movimiento">
                        <h:outputText value="#{vIngSal.nommov}" />
                    </p:column>
                    <p:column style="width:10px;" headerText="Id">
                        <h:outputText value="#{vIngSal.cod_lis_pie}" />
                    </p:column>

                </p:dataTable>
            </h:form>
        </p:dialog>

        <!--******************************************************************** 
        ************************* Pantalla Maestra ***********************
        *********************************************************************-->

        <p:dialog  id="dlgMaestraMan" widgetVar="wMaestra" modal="true" 
                   width="1110" height="490" closable="false" resizable="false" 
                   header="Mantenimientos" rendered="true" 
                   dynamic="false" visible="false" 
                   >
            <h:form id="frmMaestra" >
                <p:growl id="msgMaestra" showDetail="true" life="4500"/>

                <p:layout style="width:1075px;height:480px;" id="luman">
                    <p:layoutUnit position="west" size="200">
                        <h:panelGrid columns="1" styleClass="noBorders">
                            <h:outputText value="Número de Serie" style="font-weight:bold;"/>
                            <p:inputText id="txtbusns" maxlength="30" size="28" value="#{manMaestroMan.buscar_serie}"/>
                            <p:commandButton value="Buscar" icon="ui-icon-search" 
                                             style="width: 185px;" 
                                             actionListener="#{manMaestroMan.onclickbuscar()}"
                                             update=":frmMaestra"
                                             />
                            <p:tree value="#{manMaestroMan.root}" var="node" dynamic="true" style=" width: 182px;" 
                                    selectionMode="single" 
                                    selection="#{manMaestroMan.selectednode}"
                                    >
                                <p:ajax event="select" update=":frmMaestra" 
                                        listener="#{manMaestroMan.onNodeSelect}" />
                                <p:treeNode collapsedIcon="ui-icon ui-icon-folder-collapsed" 
                                            expandedIcon="ui-icon ui-icon-folder-open">
                                    <h:outputText value="#{node}"  />
                                </p:treeNode>
                            </p:tree>
                        </h:panelGrid>

                    </p:layoutUnit>
                    <p:layoutUnit position="center" id="lumanc">
                        <p:toolbar>
                            <f:facet name="left">
                                <p:commandButton value="Nuevo" style=" width: 100px;"
                                                 actionListener="#{manMaestroMan.iniciarventananew()}"
                                                 onclick="PF('wMaestraNew').show()"
                                                 update=":frmMaestraNew"
                                                 icon="ui-icon-document"
                                                 /> 
                                <p:commandButton value="Guardar" style=" width: 100px;"
                                                 actionListener="#{manAprobacion.rechazar()}"
                                                 update=":frmMaestra"
                                                 icon="ui-icon-disk"
                                                 > 
                                    <p:confirm header="Guardar Mantenimiento" 
                                               message="¿Realmente desea Guardar este Mantenimiento?" 
                                               icon="ui-icon-alert"/>
                                </p:commandButton>
                                <p:commandButton value="Eliminar" style=" width: 100px;"
                                                 actionListener="#{manMaestroMan.eliminarencabezado()}"
                                                 update=":frmMaestra"
                                                 icon="ui-icon-trash"
                                                 > 
                                    <p:confirm header="Eliminar Mantenimiento" 
                                               message="¿Realmente desea Eliminar este Mantenimiento?" 
                                               icon="ui-icon-alert"/>
                                </p:commandButton>

                                <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                                    <p:commandButton value="Sí" type="button" 
                                                     styleClass="ui-confirmdialog-yes" 
                                                     icon="ui-icon-check" />
                                    <p:commandButton value="No" type="button" 
                                                     styleClass="ui-confirmdialog-no" 
                                                     icon="ui-icon-close" />
                                </p:confirmDialog>
                            </f:facet>
                            <f:facet name="right">
                                <p:commandButton value="Actualizar" style=" width: 100px;"
                                                 update=":frmMaestra"
                                                 icon="ui-icon-refresh"
                                                 />
                                <p:commandButton value="Finalizar" style=" width: 100px;"
                                                 onclick="PF('wMaestraFin').show()"
                                                 update=":frmMaestraFin"
                                                 icon="ui-icon-check"
                                                 /> 
                                <p:commandButton value="Cerrar" style=" width: 100px;"
                                                 onclick="PF('wMaestra').hide()"
                                                 actionListener="#{manMaestroMan.cerrarventana()}"
                                                 update=":frmMaestra"
                                                 icon="ui-icon-close"
                                                 />
                            </f:facet>

                        </p:toolbar>
                        <p:dataTable id="dtEncMan" var="vEncMan" 
                                     value="#{manMaestroMan.mantenimientos}" 
                                     emptyMessage="No se encontraron resultados" 
                                     selection="#{manMaestroMan.catmantenimientos}" 
                                     selectionMode="single"
                                     rowKey="#{vEncMan.cod_man}"
                                     editable="true"
                                     scrollable="true"
                                     scrollHeight="80"
                                     style="width:840px;"
                                     widgetVar="wvEncMan"
                                     >

                            <f:facet name="header">
                                <p:outputPanel style=" text-align: right;">

                                    <h:outputText value="Filtrar:&nbsp;&nbsp;" />
                                    <p:inputText id="globalFilter" 
                                                 onkeyup="PF('wvEncMan').filter()" 
                                                 style="width:80px;" 
                                                 placeholder="Id"/>

                                </p:outputPanel>
                            </f:facet>

                            <p:ajax event="rowSelect" listener="#{manMaestroMan.onRowSelectEnc}" update=":frmMaestra"/>

                            <p:column style="width:10px" headerText="Id" filterBy="#{vEncMan.cod_man}" filterMatchMode="contains"  filterStyle="display:none; visibility:hidden;">
                                <h:outputText value="#{vEncMan.cod_man}" />
                            </p:column>
                            <p:column style="width:30px" headerText="Fecha">
                                <p:cellEditor>
                                    <f:facet name="output"><h:outputText value="#{vEncMan.fec_ini}" /></f:facet>
                                    <f:facet name="input"><p:inputText value="#{vEncMan.fec_ini}" style="width:100%" required="true"/></f:facet>
                                </p:cellEditor>
                            </p:column>
                            <p:column style="width:30px;" headerText="Tipo">
                                <h:outputText value="#{vEncMan.nomtip}" />
                            </p:column>
                            <p:column style="width:200px" headerText="Observaciones">
                                <p:cellEditor>
                                    <f:facet name="output"><h:outputText value="#{vEncMan.det_obs}" /></f:facet>
                                    <f:facet name="input"><p:inputText value="#{vEncMan.det_obs}" style="width:100%" /></f:facet>
                                </p:cellEditor>
                            </p:column>
                            <p:column style="width:50px" headerText="Estado">
                                <h:outputText value="#{vEncMan.status}" />
                            </p:column>
                            <p:column style="width:40px" headerText="Retraso">
                                <h:panelGrid columns="2">
                                    <h:outputText value="#{vEncMan.datraso}" />
                                    <h:outputText value="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;" style=" background-color: #{vEncMan.color};"/>
                                </h:panelGrid>
                            </p:column>
                            <p:column style="width:40px" headerText="Ciclo">
                                <h:outputText value="#{vEncMan.periodo}" />
                            </p:column>
                            <p:column style="width:32px;">
                                <p:rowEditor/>
                            </p:column>
                        </p:dataTable>
                        <p:tabView id="tvDetMan2" activeIndex="#{manMaestroMan.tabindex}" >
                            <p:ajax event="tabChange" listener="#{manMaestroMan.onTabChange}" />
                            <p:tab id="tabGEN" title="Detalle Técnico">
                                <p:panel>
                                    <h:panelGrid columns="3" cellpadding="5">
                                        <h:outputText value="Fecha y hora" style="font-weight:bold;"/>
                                        <h:outputText value="Operación" style="font-weight:bold;"/>
                                        <h:outputText value="Realizó" style="font-weight:bold;"/>
                                        <p:calendar  pattern="dd/MM/yyyy HH:mm" locale="es" 
                                                     readonlyInput="true" 
                                                     showOn="button" size="20"
                                                     value="#{manMaestroMan.dfecha1}"
                                                     >
                                            <p:ajax event="dateSelect" listener="#{manMaestroMan.dateSelectedGeneral}" />
                                        </p:calendar> 
                                        <p:selectOneMenu style=" width: 325px;" value="#{manMaestroMan.gen_cod_ope}"
                                                         filter="true" filterMatchMode="contains" 
                                                         >
                                            <f:selectItem itemLabel="Seleccione Una" itemValue="0"/>
                                            <f:selectItems value="#{manMaestroMan.operaciones}" var="tipope"
                                                           itemLabel="#{tipope.nom_ope}" itemValue="#{tipope.cod_ope}"/> 
                                        </p:selectOneMenu>
                                        <p:selectOneMenu style=" width: 210px;" value="#{manMaestroMan.gen_cod_usu}">
                                            <f:selectItem itemLabel="Seleccione Uno" itemValue="0"/>
                                            <f:selectItems value="#{manMaestroMan.usuarios}" var="usudet"
                                                           itemLabel="#{usudet.det_nom}" itemValue="#{usudet.cod_usu}"/> 
                                        </p:selectOneMenu>
                                    </h:panelGrid>
                                    <h:panelGrid columns="3" cellpadding="3">
                                        <h:outputText value="Observaciones" style="font-weight:bold;"/>
                                        <h:outputText value="" style="font-weight:bold;"/>
                                        <h:outputText value="" style="font-weight:bold;"/>
                                        <p:inputText maxlength="200" size="108" value="#{manMaestroMan.gen_det_obs}" />
                                        <p:commandButton title="Agregar" icon="ui-icon-plus" style="width:30px;" 
                                                         actionListener="#{manMaestroMan.agregargeneral()}"
                                                         update=":frmMaestra"
                                                         />
                                        <p:commandButton title="Eliminar" icon="ui-icon-minus" style="width:30px;" 
                                                         actionListener="#{manMaestroMan.eliminargeneral()}"
                                                         update=":frmMaestra"
                                                         />
                                    </h:panelGrid>
                                </p:panel>
                                <p:dataTable id="dtDetTec" var="vDetTec" 
                                             value="#{manMaestroMan.general}" 
                                             emptyMessage="No se encontraron resultados" 
                                             selection="#{manMaestroMan.catmantenimientosgen}" 
                                             selectionMode="single"
                                             rowKey="#{vDetTec.det_man}"
                                             editable="false"
                                             scrollable="true"
                                             scrollHeight="80"
                                             style="width:800px"
                                             >
                                    <p:ajax event="rowSelect" listener="#{manMaestroMan.onRowSelectGen}" update=":frmMaestra"/>
                                    <p:column style="width:20px;" headerText="Fecha">
                                        <h:outputText value="#{vDetTec.fec_man}" />
                                    </p:column>
                                    <p:column style="width:80px" headerText="Operación">
                                        <h:outputText value="#{vDetTec.nomope}" />
                                    </p:column>
                                    <p:column style="width:80px" headerText="Observaciones">
                                        <h:outputText value="#{vDetTec.det_obs}" />
                                    </p:column>
                                    <p:column style="width:50px" headerText="Realizó">
                                        <h:outputText value="#{vDetTec.nomusu}" />
                                    </p:column>
                                </p:dataTable>
                            </p:tab>
                            <p:tab id="tabPIE" title="Piezas">
                                <p:panel>
                                    <h:panelGrid columns="5" cellpadding="5">
                                        <h:outputText value="Fecha y hora" style="font-weight:bold;"/>
                                        <h:outputText value="Responsable" style="font-weight:bold;"/>
                                        <h:outputText value="País" style="font-weight:bold;"/>
                                        <h:outputText value="Bodega" style="font-weight:bold;"/>
                                        <h:outputText value="Ubicación" style="font-weight:bold;"/>
                                        <p:calendar  pattern="dd/MM/yyyy HH:mm" locale="es" 
                                                     readonlyInput="true" showOn="button" size="16"
                                                     value="#{manMaestroMan.dfecha2}"
                                                     >
                                            <p:ajax event="dateSelect" listener="#{manMaestroMan.dateSelectedPiezas}" />
                                        </p:calendar>  

                                        <p:selectOneMenu style=" width: 140px;" value="#{manMaestroMan.pie_cod_usu}">
                                            <f:selectItem itemLabel="Seleccione Uno" itemValue="0"/>
                                            <f:selectItems value="#{manMaestroMan.usuarios}" var="usumanpie"
                                                           itemLabel="#{usumanpie.det_nom}" itemValue="#{usumanpie.cod_usu}"/> 
                                        </p:selectOneMenu>

                                        <p:selectOneMenu style=" width: 120px;" value="#{manMaestroMan.pie_cod_pai}">
                                            <p:ajax event="change" listener="#{manMaestroMan.onChangePais()}" update="sombodmanpie, somubimanpie, sompiemanpie" />
                                            <f:selectItem itemLabel="Seleccione Uno" itemValue="0"/>
                                            <f:selectItems value="#{manMaestroMan.paises}" var="paimanpie"
                                                           itemLabel="#{paimanpie.nom_pai}" itemValue="#{paimanpie.cod_pai}"/> 
                                        </p:selectOneMenu>
                                        <p:selectOneMenu id="sombodmanpie" style=" width: 120px;" value="#{manMaestroMan.pie_cod_bod}">
                                            <p:ajax event="change" listener="#{manMaestroMan.onChangeBodegas()}" update="somubimanpie, sompiemanpie" />
                                            <f:selectItem itemLabel="Seleccione Una" itemValue="0"/>
                                            <f:selectItems value="#{manMaestroMan.bodegas}" var="bodmanpie"
                                                           itemLabel="#{bodmanpie.nom_bod}" itemValue="#{bodmanpie.id_bod}"/> 
                                        </p:selectOneMenu>
                                        <p:selectOneMenu id="somubimanpie" style=" width: 120px;" value="#{manMaestroMan.pie_cod_ubi}">
                                            <p:ajax event="change" listener="#{manMaestroMan.onChangeubicaciones()}" update="sompiemanpie" />
                                            <f:selectItem itemLabel="Seleccione Una" itemValue="0"/>
                                            <f:selectItems value="#{manMaestroMan.ubicaciones}" var="ubimanpie"
                                                           itemLabel="#{ubimanpie.nom_ubi}" itemValue="#{ubimanpie.id_ubi}"/> 
                                        </p:selectOneMenu>
                                    </h:panelGrid>

                                    <h:panelGrid columns="6" cellpadding="5">
                                        <h:outputText value="Cantidad" style="font-weight:bold;"/>
                                        <h:outputText value="Pieza Entrante" style="font-weight:bold;"/>
                                        <h:outputText value="" style="font-weight:bold;"/>
                                        <h:outputText value="Números de Serie" style="font-weight:bold;"/>
                                        <h:outputText value="" style="font-weight:bold;"/>
                                        <h:outputText value="" style="font-weight:bold;"/>
                                        <p:inputText maxlength="12" size="10" value="#{manMaestroMan.pie_det_can}" />
                                        <p:selectOneMenu id="sompiemanpie" style=" width: 270px;" 
                                                         filter="true" filterMatchMode="contains" 
                                                         value="#{manMaestroMan.pie_cod_pie}">
                                            <f:selectItem itemLabel="Seleccione Una" itemValue="0"/>
                                            <f:selectItems value="#{manMaestroMan.existenciareal}" var="lpiemanpie"
                                                           itemLabel="#{lpiemanpie.cod_ref} - #{lpiemanpie.nom_pie}" itemValue="#{lpiemanpie.cod_pie}"/> 
                                        </p:selectOneMenu>
                                        <p:commandButton title="Existencias" icon="ui-icon-search" style="width:30px;" 
                                                         onclick="PF('wExistenciasMan').show()"
                                                         actionListener="#{manMaestroMan.iniciarventanaexistencia()}"
                                                         update=":frmExistenciasMan"
                                                         />
                                        <p:inputText maxlength="200" size="40" value="#{manMaestroMan.pie_num_ser}" />
                                        <p:commandButton title="Agregar" icon="ui-icon-plus" style="width:30px;" 
                                                         actionListener="#{manMaestroMan.agregargeneral()}"
                                                         update=":frmMaestra"
                                                         />
                                        <p:commandButton title="Eliminar" icon="ui-icon-minus" style="width:30px;" 
                                                         actionListener="#{manMaestroMan.eliminargeneral()}"
                                                         update=":frmMaestra"
                                                         />
                                    </h:panelGrid>
                                </p:panel>
                                <p:dataTable id="dtDetPie2" var="vDetPie" 
                                             value="#{manMaestroMan.piezas}" 
                                             emptyMessage="No se encontraron resultados" 
                                             selection="#{manMaestroMan.catmantenimientospie}" 
                                             selectionMode="single"
                                             rowKey="#{vDetPie.det_man}"
                                             editable="false"
                                             scrollable="true"
                                             scrollHeight="80"
                                             style="width:800px"
                                             >
                                    <p:column style="width:30px;" headerText="Fecha">
                                        <h:outputText value="#{vDetPie.fec_man}" />
                                    </p:column>
                                    <p:column style="width:30px;" headerText="País">
                                        <h:outputText value="#{vDetPie.nompai}" />
                                    </p:column>
                                    <p:column style="width:10px" headerText="Cant">
                                        <h:outputText value="#{vDetPie.det_can}" />
                                    </p:column>
                                    <p:column style="width:100px;" headerText="Pieza">
                                        <h:outputText value="#{vDetPie.nompie}" />
                                    </p:column>
                                    <p:column style="width:60px" headerText="Series">
                                        <h:outputText value="#{vDetPie.num_ser}" />
                                    </p:column>
                                    <p:column style="width:70px" headerText="Responsable">
                                        <h:outputText value="#{vDetPie.nomusu}" />
                                    </p:column>

                                </p:dataTable>
                            </p:tab>
                            <p:tab id="tabANE" title="Anexos">
                                <p:panel>
                                    <h:panelGrid columns="2" cellpadding="5" >
                                        <h:outputText value="Tipo" style="font-weight:bold;"/>
                                        <h:outputText value="Observaciones" style="font-weight:bold;"/>
                                        <p:selectOneMenu style=" width: 120px;" value="#{manListaEquiposDetalle.a_tip_ane}">
                                            <f:selectItem itemLabel="Seleccione Uno" itemValue="0"/>
                                            <f:selectItem itemLabel="PDF" itemValue="1"/>
                                            <f:selectItem itemLabel="IMAGEN" itemValue="2"/>
                                            <f:selectItem itemLabel="OTRO" itemValue="3"/>
                                        </p:selectOneMenu>
                                        <p:inputText value="#{manListaEquiposDetalle.a_det_obs}" style="font-weight:bold;" size="90" maxlength="200"/>
                                    </h:panelGrid>
                                    <p:fileUpload id="fupman2" 
                                                  fileUploadListener="#{manEquipos.upload}" 
                                                  mode="advanced" dragDropSupport="true"
                                                  fileLimit="1" 
                                                  label="Seleccionar" cancelLabel="Cancelar" uploadLabel="Subir" 
                                                  />
                                </p:panel>
                                <p:dataTable id="dtDetAne2" var="vDetAne" 
                                             value="#{manMaestroMan.anexos}" 
                                             emptyMessage="No se encontraron resultados" 
                                             selection="#{manMaestroMan.catmantenimientosane}" 
                                             selectionMode="single"
                                             rowKey="#{vDetAne.det_man}"
                                             editable="false"
                                             scrollable="true"
                                             scrollHeight="90"
                                             style="width:800px"
                                             >
                                    <p:column style="width:10px;" headerText="Tipo">
                                        <h:outputText value="#{vDetAne.nomtip}" />
                                    </p:column>
                                    <p:column style="width:150px" headerText="Observaciones">
                                        <h:outputText value="#{vDetAne.det_obs}" />
                                    </p:column>
                                    <p:column style="width:60px" headerText="Compartido por">
                                        <h:outputText value="#{vDetAne.nomusu}" />
                                    </p:column>
                                </p:dataTable>
                            </p:tab>
                        </p:tabView>
                    </p:layoutUnit>
                </p:layout>
            </h:form>
        </p:dialog>

        <p:dialog  id="dlgMaestraNew" widgetVar="wMaestraNew" modal="true" 
                   width="760" height="210" closable="false" resizable="false" 
                   header="Nuevo Mantenimiento" rendered="true" 
                   dynamic="false" visible="false" 
                   >
            <h:form id="frmMaestraNew" >
                <p:growl id="msgMaestraNew" showDetail="true" life="4500"/>
                <p:toolbar>
                    <f:facet name="right">
                        <p:commandButton value="Guardar" style=" width: 100px;"
                                         update=":frmMaestra"
                                         icon="ui-icon-disk" 
                                         actionListener="#{manMaestroMan.guardarencabezado()}"

                                         />
                        <p:commandButton value="Cancelar" style=" width: 100px;"
                                         update=":frmMaestra"
                                         icon="ui-icon-close" 
                                         onclick="PF('wMaestraNew').hide()"
                                         />
                    </f:facet>
                </p:toolbar>
                <p:panel>
                    <h:panelGrid columns="4" cellpadding="5">
                        <h:outputText value="Tipo" style="font-weight:bold;"/>
                        <h:outputText value="Fecha" style="font-weight:bold;"/>
                        <h:outputText value="Responsable" style="font-weight:bold;"/>
                        <h:outputText value="Periodicidad" style="font-weight:bold;"/>
                        <p:selectOneMenu value="#{manMaestroMan.cod_tip}" 
                                         style=" width: 120px;">
                            <f:selectItem itemLabel="Ninguno" itemValue="0"/>
                            <f:selectItems value="#{manMaestroMan.tipos}" var="tipmanman"
                                           itemLabel="#{tipmanman.nom_tip}" itemValue="#{tipmanman.cod_tip}"/> 
                        </p:selectOneMenu>
                        <p:calendar  pattern="dd/MM/yyyy" locale="es" 
                                     readonlyInput="true" showOn="button" 
                                     size="16"
                                     value="#{manMaestroMan.dfecfinF}"
                                     >
                            <p:ajax event="dateSelect" listener="#{manMaestroMan.dateSelectedFencabezado}" />
                        </p:calendar> 
                        <p:selectOneMenu value="#{manMaestroMan.cod_usu}" 
                                         style=" width: 200px;">
                            <f:selectItem itemLabel="Ninguno" itemValue="0"/>
                            <f:selectItems value="#{manMaestroMan.usuarios}" var="usumanman"
                                           itemLabel="#{usumanman.det_nom}" itemValue="#{usumanman.cod_usu}"/> 
                        </p:selectOneMenu>
                        <p:selectOneMenu value="#{manMaestroMan.cod_per}" 
                                         style=" width: 120px;">
                            <f:selectItem itemLabel="Ninguna" itemValue="0"/>
                            <f:selectItems value="#{manMaestroMan.periodos}" var="permanman"
                                           itemLabel="#{permanman.nom_per}" itemValue="#{permanman.cod_per}"/> 
                        </p:selectOneMenu>
                    </h:panelGrid>
                    <h:panelGrid columns="1" cellpadding="5">
                        <h:outputText value="Observaciones" style="font-weight:bold;"/>
                        <p:inputTextarea cols="102" rows="2"
                                         maxlength="200"
                                         value="#{manMaestroMan.det_obs}"
                                         onfocus="this.select()"
                                         />
                    </h:panelGrid>
                </p:panel>
            </h:form>
        </p:dialog>

        <p:dialog  id="dlgMaestraFin" widgetVar="wMaestraFin" modal="true" 
                   width="760" height="480" closable="false" resizable="false" 
                   header="Finalizar Mantenimiento" rendered="true" 
                   dynamic="false" visible="false" 
                   >
            <h:form id="frmMaestraFin" >
                <p:growl id="msgMaestraNew" showDetail="true" life="4500"/>
                <p:toolbar>
                    <f:facet name="right">
                        <p:commandButton value="Aceptar" style=" width: 100px;"
                                         update=":frmMaestra"
                                         icon="ui-icon-disk" 

                                         />
                        <p:commandButton value="Cancelar" style=" width: 100px;"
                                         update=":frmMaestra"
                                         icon="ui-icon-close" 
                                         onclick="PF('wMaestraFin').hide()"
                                         />
                    </f:facet>
                </p:toolbar>
                <p:panel>
                    <h:panelGrid columns="2" cellpadding="5">
                        <h:outputText value="Fecha" style="font-weight:bold;"/>
                        <h:outputText value="Recibe" style="font-weight:bold;"/>
                        <p:calendar  pattern="dd/MM/yyyy" locale="es" 
                                     readonlyInput="true" showOn="button" 
                                     size="16"
                                     value="#{manMaestroMan.dfecfinF}"
                                     /> 
                        <p:selectOneMenu value="#{manMaestroMan.cod_usu}" 
                                         style=" width: 200px;">
                            <f:selectItems value="#{manMaestroMan.usuarios}" var="usumanman"
                                           itemLabel="#{usumanman.det_nom}" itemValue="#{usumanman.cod_usu}"/> 
                        </p:selectOneMenu>
                    </h:panelGrid>
                    <h:panelGrid columns="1" cellpadding="5">
                        <h:outputText value="Firma Conformidad" style="font-weight:bold;"/>
                        <p:signature style="width:690px;height:300px" widgetVar="sig" required="true"  guideline="true"/>
                    </h:panelGrid>
                </p:panel>
            </h:form>
        </p:dialog>

        <p:dialog  id="dlgExistenciasMan" widgetVar="wExistenciasMan" modal="true" 
                   width="850" height="360" closable="false" resizable="false" 
                   header="Existencias" rendered="true" 
                   dynamic="false" visible="false"  
                   >
            <h:form id="frmExistenciasMan">
                <p:toolbar>
                    <f:facet name="right">
                        <p:commandButton value="Cerrar" style=" width: 100px;"
                                         onclick="PF('wExistenciasMan').hide()"
                                         actionListener="#{manMaestroMan.cerrarventanaexistencia()}"
                                         update=":frmMaestra,:frmExistenciasMan"
                                         icon="ui-icon-close"
                                         />
                    </f:facet>

                </p:toolbar>
                <p:panel>
                    <h:panelGrid columns="5" cellpadding="5">

                        <h:outputText value="País" style="font-weight:bold;"/>
                        <h:outputText value="Bodega" style="font-weight:bold;"/>
                        <h:outputText value="Ubicación" style="font-weight:bold;"/>
                        <h:outputText value="Pieza" style="font-weight:bold;"/>
                        <h:outputText value="" style="font-weight:bold;"/>

                        <p:inputText size="20" value="#{manMaestroMan.nompai}" readonly="true"/>
                        <p:inputText size="20" value="#{manMaestroMan.nombod}" readonly="true"/>
                        <p:inputText size="20" value="#{manMaestroMan.nomubi}" readonly="true"/>


                        <p:selectOneMenu value="#{manMaestroMan.pie_cod_pie}" 
                                         style=" width: 200px;"
                                         filter="true" 
                                         filterMatchMode="contains"
                                         >
                            <f:selectItem itemLabel="Ninguno" itemValue="0"/>
                            <f:selectItems value="#{manMaestroMan.existenciareal}" var="lstpiemanpie"
                                           itemLabel="#{lstpiemanpie.cod_ref} | #{lstpiemanpie.nom_pie}" itemValue="#{lstpiemanpie.cod_pie}"/> 
                        </p:selectOneMenu>


                        <p:commandButton title="Buscar" 
                                         icon="ui-icon-search" 
                                         style=" width: 30px;" 
                                         actionListener="#{manMaestroMan.buscarexistencia()}" 
                                         update="dtExistenciasMan"
                                         />
                    </h:panelGrid>
                </p:panel>
                <p:dataTable id="dtExistenciasMan" var="vExistenciasMan" 
                             value="#{manMaestroMan.existencias}" 
                             emptyMessage="No se encontraron resultados" 
                             selection="#{manMaestroMan.catpiezasconexistencia}" 
                             selectionMode="single"
                             rowKey="#{vExistenciasMan.cod_pie}"
                             scrollable="true"
                             scrollHeight="180"
                             style="width:823px"
                             >

                    

                    <p:column style="width:50px;" headerText="Bodega">
                        <h:outputText value="#{vExistenciasMan.nombod}" />
                    </p:column>
                    <p:column style="width:50px;" headerText="Ubicación">
                        <h:outputText value="#{vExistenciasMan.nomubi}" />
                    </p:column>
                    <p:column style="width:50px;" headerText="Pieza">
                        <h:outputText value="#{vExistenciasMan.nompie}" />
                    </p:column>
                    <p:column style="width:50px;" headerText="Stock">
                        <h:outputText value="#{vExistenciasMan.can_sto}" />
                    </p:column>
                    <p:column style="width:50px;" headerText="Reserva">
                        <h:outputText value="#{vExistenciasMan.can_res}" />
                    </p:column>
                    <p:column style="width:50px;" headerText="Disponible">
                        <h:outputText value="#{vExistenciasMan.can_sto - vExistenciasMan.can_res}" />
                    </p:column>

                </p:dataTable>
            </h:form>
        </p:dialog>

         <!--******************************************************************** 
        ********* Pantalla mantenimiento de Grupos de Seguridad *****************
        *********************************************************************-->

        <p:dialog  id="dlgGrupo" widgetVar="wGrupo" modal="true" 
                   width="440" height="290" closable="false" resizable="false" 
                   header="Mantenimiento de Grupos" rendered="true" 
                   dynamic="false" visible="false" 
                   >

            <h:form id="frmGrupo"> 
                <p:growl id="msgGrupo" showDetail="true" life="4500"/>
                <p:toolbar>
                    <f:facet name="left">
                        <p:commandButton value="Nuevo" style=" width: 100px;"
                                         actionListener="#{manGrupos.nuevo()}"
                                         update=":frmGrupo"
                                         icon="ui-icon-document"
                                         />
                        <p:commandButton value="Guardar" style=" width: 100px;"
                                         actionListener="#{manGrupos.guardar()}"
                                         update=":frmGrupo"
                                         icon="ui-icon-disk"
                                         > 
                            <p:confirm header="Guardar Registro" 
                                       message="¿Realmente desea Guardar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Eliminar" style=" width: 100px;"
                                         actionListener="#{manGrupos.eliminar()}"
                                         update=":frmGrupo"
                                         icon="ui-icon-trash"
                                         >
                            <p:confirm header="Eliminar Registro" 
                                       message="¿Realmente desea eliminar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Cerrar" style=" width: 100px;"
                                         onclick="PF('wGrupo').hide()"
                                         actionListener="#{manGrupos.cerrarventana()}"
                                         update=":frmGrupo"
                                         icon="ui-icon-close"
                                         />
                        <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                            <p:commandButton value="Sí" type="button" 
                                             styleClass="ui-confirmdialog-yes" 
                                             icon="ui-icon-check" />
                            <p:commandButton value="No" type="button" 
                                             styleClass="ui-confirmdialog-no" 
                                             icon="ui-icon-close" />
                        </p:confirmDialog>
                    </f:facet>
                </p:toolbar>

                <p:panel>
                    <div style=" background-color:  #666666;">
                        <p:focus for="txtdescripciongrupo" />
                        <h:panelGrid columns="2" cellpadding="5">
                            <h:outputText value="Nombre" style="font-weight:bold;"/>
                            <p:inputText id="txtdescripciongrupo" 
                                         size="50"
                                         maxlength="50"
                                         value="#{manGrupos.des_grp}"
                                         onfocus="this.select()"
                                         />
                        </h:panelGrid>
                    </div>
                </p:panel>

                <p:panel>
                    <p:dataTable id="dtGrupo" var="vGrupo" 
                                 value="#{manGrupos.grupos}" 
                                 emptyMessage="No se encontraron resultados" 
                                 selectionMode="single" selection="#{manGrupos.catgrupos}" 
                                 rowKey="#{vGrupo.id_grp}"
                                 editable="false" 
                                 scrollable="true"
                                 scrollHeight="120"
                                 style="width:380px"
                                 >
                        <p:ajax event="rowSelect" listener="#{manGrupos.onRowSelect}" 
                                update=":frmGrupo"/>
                        <p:ajax event="rowUnselect"/>

                        <p:column style="width:30px" headerText="Id">
                            <h:outputText value="#{vGrupo.id_grp}" />
                        </p:column>
                        <p:column style="width:300px" headerText="Nombre">
                            <h:outputText value="#{vGrupo.des_grp}" />
                        </p:column>
                    </p:dataTable>
                </p:panel>
            </h:form>
        </p:dialog>
         

         <!--******************************************************************** 
        ****** Pantalla mantenimiento de Controles de aplicacion ***************
        *********************************************************************-->

        <p:dialog  id="dlgControl" widgetVar="wControl" modal="true" 
                   width="540" height="390" closable="false" resizable="false" 
                   header="Mantenimiento de Controles" rendered="true" 
                   dynamic="false" visible="false" 
                   >

            <h:form id="frmControl"> 
                <p:growl id="msgControl" showDetail="true" life="4500"/>
                <p:toolbar>
                    <f:facet name="left">
                        <p:commandButton value="Nuevo" style=" width: 100px;"
                                         actionListener="#{manControles.nuevo()}"
                                         update=":frmControl"
                                         icon="ui-icon-document"
                                         />
                        <p:commandButton value="Guardar" style=" width: 100px;"
                                         actionListener="#{manControles.guardar()}"
                                         update=":frmControl"
                                         icon="ui-icon-disk"
                                         > 
                            <p:confirm header="Guardar Registro" 
                                       message="¿Realmente desea Guardar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Eliminar" style=" width: 100px;"
                                         actionListener="#{manControles.eliminar()}"
                                         update=":frmControl"
                                         icon="ui-icon-trash"
                                         >
                            <p:confirm header="Eliminar Registro" 
                                       message="¿Realmente desea eliminar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Cerrar" style=" width: 100px;"
                                         onclick="PF('wControl').hide()"
                                         actionListener="#{manControles.cerrarventana()}"
                                         update=":frmControl"
                                         icon="ui-icon-close"
                                         />
                        <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                            <p:commandButton value="Sí" type="button" 
                                             styleClass="ui-confirmdialog-yes" 
                                             icon="ui-icon-check" />
                            <p:commandButton value="No" type="button" 
                                             styleClass="ui-confirmdialog-no" 
                                             icon="ui-icon-close" />
                        </p:confirmDialog>
                    </f:facet>
                </p:toolbar>

                <p:panel>
                    <div style=" background-color:  #666666;">
                        <p:focus for="ommodulocontrol" />
                        <h:panelGrid columns="2" cellpadding="5">
                            <h:outputText value="Modulo" style="font-weight:bold;" />
                            <p:selectOneMenu id="ommodulocontrol" value="#{manControles.id_mod}" style=" width: 150px;">
                                <f:selectItem itemLabel="Ninguno" itemValue="0"/>
                                <f:selectItems value="#{manControles.modulos}" var="modusu"
                                           itemLabel="#{modusu.des_mod}" itemValue="#{modusu.id_mod}"/> 
                            </p:selectOneMenu>
                            <h:outputText value="Identificador" style="font-weight:bold;"/>
                            <p:inputText id="txtsidcontrol" 
                                         size="50"
                                         maxlength="50"
                                         value="#{manControles.sid_ctrl}"
                                         onfocus="this.select()"
                                         />
                            <h:outputText value="Descripción" style="font-weight:bold;"/>
                            <p:inputText id="txtdescripcioncontrol" 
                                         size="70"
                                         maxlength="150"
                                         value="#{manControles.ctrl_desc}"
                                         onfocus="this.select()"
                                         />
                        </h:panelGrid>
                    </div>
                </p:panel>

                <p:panel>
                    <p:dataTable id="dtControl" var="vControl" 
                                 value="#{manControles.controles}" 
                                 emptyMessage="No se encontraron resultados" 
                                 selectionMode="single" selection="#{manControles.catcontroles}" 
                                 rowKey="#{vControl.cod_ctrl}"
                                 editable="false" 
                                 scrollable="true"
                                 scrollHeight="120"
                                 style="width:480px"
                                 >
                        <p:ajax event="rowSelect" listener="#{manControles.onRowSelect}" 
                                update=":frmControl"/>
                        <p:ajax event="rowUnselect"/>

                        <p:column style="width:30px" headerText="Id">
                            <h:outputText value="#{vControl.cod_ctrl}" />
                        </p:column>
                        <p:column style="width:50px" headerText="Modulo">
                            <h:outputText value="#{vControl.modulo}" />
                        </p:column>
                        <p:column style="width:80px" headerText="Nombre">
                            <h:outputText value="#{vControl.sid_ctrl}" />
                        </p:column>
                        <p:column style="width:200px" headerText="Descripción">
                            <h:outputText value="#{vControl.ctrl_desc}" />
                        </p:column>
                    </p:dataTable>
                </p:panel>
            </h:form>
        </p:dialog>

         
          <!--******************************************************************** 
        ****** Pantalla de Asignación de usuarios a grupos *********
        *********************************************************************-->

        <p:dialog  id="dlgUsrGrp" widgetVar="wUsrGrp" modal="true" 
                   width="540" height="390" closable="false" resizable="false" 
                   header="Asignación de Usuarios a Grupos" rendered="true" 
                   dynamic="false" visible="false" 
                   >

            <h:form id="frmUsrGrp"> 
                <p:growl id="msgUsrGrp" showDetail="true" life="4500"/>
                <p:toolbar>
                    <f:facet name="left">
                        <p:commandButton value="Nuevo" style=" width: 100px;"
                                         actionListener="#{manUserGroup.nuevo()}"
                                         update=":frmUsrGrp"
                                         icon="ui-icon-document"
                                         />
                        <p:commandButton value="Guardar" style=" width: 100px;"
                                         actionListener="#{manUserGroup.guardar()}"
                                         update=":frmUsrGrp"
                                         icon="ui-icon-disk"
                                         > 
                            <p:confirm header="Guardar Registro" 
                                       message="¿Realmente desea Guardar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Eliminar" style=" width: 100px;"
                                         actionListener="#{manUserGroup.eliminar()}"
                                         update=":frmUsrGrp"
                                         icon="ui-icon-trash"
                                         >
                            <p:confirm header="Eliminar Registro" 
                                       message="¿Realmente desea eliminar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Cerrar" style=" width: 100px;"
                                         onclick="PF('wUsrGrp').hide()"
                                         actionListener="#{manUserGroup.cerrarventana()}"
                                         update=":frmUsrGrp"
                                         icon="ui-icon-close"
                                         />
                        <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                            <p:commandButton value="Sí" type="button" 
                                             styleClass="ui-confirmdialog-yes" 
                                             icon="ui-icon-check" />
                            <p:commandButton value="No" type="button" 
                                             styleClass="ui-confirmdialog-no" 
                                             icon="ui-icon-close" />
                        </p:confirmDialog>
                    </f:facet>
                </p:toolbar>

                <p:panel>
                    <div style=" background-color:  #666666;">
                        <p:focus for="omgrupousrgrp" />
                        <h:panelGrid columns="4" cellpadding="5">
                            <h:outputText value="Grupo" style="font-weight:bold;" />
                            <p:selectOneMenu id="omgrupousrgrp" value="#{manUserGroup.id_grp}" style=" width: 200px;">
                                <f:selectItem itemLabel="Ninguno" itemValue="0"/>
                                <f:selectItems value="#{manUserGroup.grupos}" var="manusrgrpgroup"
                                               itemLabel="#{manusrgrpgroup.des_grp}" itemValue="#{manusrgrpgroup.id_grp}"/> 
                            </p:selectOneMenu>
                            
                            <h:outputText value="Usuario" style="font-weight:bold;" />
                            <p:selectOneMenu id="omusuariousrgrp" value="#{manUserGroup.cod_usu}" style=" width: 125px;">
                                <f:selectItem itemLabel="Ninguno" itemValue="0"/>
                                <f:selectItems value="#{manUserGroup.usuarios}" var="manusrgrpuser"
                                               itemLabel="#{manusrgrpuser.nom_usu}" itemValue="#{manusrgrpuser.cod_usu}"/> 
                            </p:selectOneMenu>
                            
                        </h:panelGrid>
                    </div>
                </p:panel>

                <p:panel>
                    <p:dataTable id="dtUsrGrp" var="vUsrGrp" 
                                 value="#{manUserGroup.usergroup}" 
                                 emptyMessage="No se encontraron resultados" 
                                 selectionMode="single" selection="#{manUserGroup.catusergroup}" 
                                 rowKey="#{vUsrGrp.id_usr_grp}"
                                 editable="false" 
                                 scrollable="true"
                                 scrollHeight="120"
                                 style="width:485px"
                                 >
                        <p:ajax event="rowSelect" listener="#{manUserGroup.onRowSelect}" 
                                update=":frmUsrGrp"/>
                        <p:ajax event="rowUnselect"/>

                        <p:column style="width:30px" headerText="Id">
                            <h:outputText value="#{vUsrGrp.id_usr_grp}" />
                        </p:column>
                        <p:column style="width:120px" headerText="Grupo">
                            <h:outputText value="#{vUsrGrp.grupo}" />
                        </p:column>
                        <p:column style="width:100px" headerText="Usuario">
                            <h:outputText value="#{vUsrGrp.usuario}" />
                        </p:column>
                        
                    </p:dataTable>
                </p:panel>
            </h:form>
        </p:dialog>

          
         <!--******************************************************************** 
        **********    Pantalla de Registro de derechos de seguridad  ************
        *********************************************************************-->

        <p:dialog  id="dlgSecurity" widgetVar="wSecurity" modal="true" 
                   width="640" height="450" closable="false" resizable="false" 
                   header="Asignación de Permisos" rendered="true" 
                   dynamic="false" visible="false" 
                   >

            <h:form id="frmSecurity"> 
                <p:growl id="msgSecurity" showDetail="true" life="4500"/>
                <p:toolbar>
                    <f:facet name="left">
                        <p:commandButton value="Nuevo" style=" width: 100px;"
                                         actionListener="#{manSeguridad.nuevo()}"
                                         update=":frmSecurity"
                                         icon="ui-icon-document"
                                         />
                        <p:commandButton value="Guardar" style=" width: 100px;"
                                         actionListener="#{manSeguridad.guardar()}"
                                         update=":frmSecurity"
                                         icon="ui-icon-disk"
                                         > 
                            <p:confirm header="Guardar Registro" 
                                       message="¿Realmente desea Guardar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Eliminar" style=" width: 100px;"
                                         actionListener="#{manSeguridad.eliminar()}"
                                         update=":frmSecurity"
                                         icon="ui-icon-trash"
                                         >
                            <p:confirm header="Eliminar Registro" 
                                       message="¿Realmente desea eliminar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Cerrar" style=" width: 100px;"
                                         onclick="PF('wSecurity').hide()"
                                         actionListener="#{manSeguridad.cerrarventana()}"
                                         update=":frmSecurity"
                                         icon="ui-icon-close"
                                         />
                        <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                            <p:commandButton value="Sí" type="button" 
                                             styleClass="ui-confirmdialog-yes" 
                                             icon="ui-icon-check" />
                            <p:commandButton value="No" type="button" 
                                             styleClass="ui-confirmdialog-no" 
                                             icon="ui-icon-close" />
                        </p:confirmDialog>
                    </f:facet>
                </p:toolbar>

                <p:panel>
                    <div style=" background-color:  #666666;">
                        <p:focus for="ommodsecurity" />
                        <h:panelGrid columns="4" cellpadding="5">
                            <h:outputText value="Modulo" style="font-weight:bold;" />
                            <p:selectOneMenu id="ommodsecurity" value="#{manSeguridad.id_mod}" style=" width: 150px;">
                                <f:selectItem itemLabel="Ninguno" itemValue="0"/>
                                <f:selectItems value="#{manSeguridad.modulos}" var="manmodsecurity"
                                               itemLabel="#{manmodsecurity.des_mod}" itemValue="#{manmodsecurity.id_mod}"/> 
                            </p:selectOneMenu>
                            
                            <h:outputText value="Control" style="font-weight:bold;" />
                            <p:selectOneMenu id="omctrlsecurity" value="#{manSeguridad.cod_ctrl}" style=" width: 250px;">
                                <f:selectItem itemLabel="Ninguno" itemValue="0"/>
                                <f:selectItems value="#{manSeguridad.controles}" var="manctrlsecurity"
                                               itemLabel="#{manctrlsecurity.ctrl_desc}" itemValue="#{manctrlsecurity.cod_ctrl}"/> 
                            </p:selectOneMenu>
                                                        
                            <h:outputText value="Grupo" style="font-weight:bold;" />
                            <p:selectOneMenu id="omgrpsecurity" value="#{manSeguridad.id_grp}" style=" width: 150px;">
                                <f:selectItem itemLabel="Ninguno" itemValue="0"/>
                                <f:selectItems value="#{manSeguridad.grupos}" var="mangrpsecurity"
                                               itemLabel="#{mangrpsecurity.des_grp}" itemValue="#{mangrpsecurity.id_grp}"/> 
                            </p:selectOneMenu>
                            <h:outputText value="Usuario" style="font-weight:bold;" />
                            <h:panelGroup>
                                <p:selectOneMenu id="omususecurity" value="#{manSeguridad.cod_usu}" style=" width: 150px;">
                                    <f:selectItem itemLabel="Ninguno" itemValue="0"/>
                                    <f:selectItems value="#{manSeguridad.usuarios}" var="manususecurity"
                                                   itemLabel="#{manususecurity.nom_usu}" itemValue="#{manususecurity.cod_usu}"/> 
                                </p:selectOneMenu>
                                 <p:spacer width="20"/>
                                <h:outputLabel value="Activo: " style="font-weight:bold;" />
                                <p:spacer width="10"/>
                                <p:selectBooleanButton value="#{manSeguridad.activo}" onLabel="Si" offLabel="No" style="width:30px" />
                            </h:panelGroup>
                            
                        </h:panelGrid>
                    </div>
                </p:panel>

                <p:panel>
                    <p:dataTable id="dtSecurity" var="vSecurity" 
                                 value="#{manSeguridad.seguridad}" 
                                 emptyMessage="No se encontraron resultados" 
                                 selectionMode="single" selection="#{manSeguridad.catseguridad}" 
                                 rowKey="#{vSecurity.cod_sec}"
                                 editable="false" 
                                 scrollable="true"
                                 scrollHeight="120"
                                 style="width:560px; height:280px "
                                 >
                        <p:ajax event="rowSelect" listener="#{manSeguridad.onRowSelect}" 
                                update=":frmSecurity"/>
                        <p:ajax event="rowUnselect"/>

                        <p:column style="width:30px" headerText="Id">
                            <h:outputText value="#{vSecurity.cod_sec}" />
                        </p:column>
                        <p:column style="width:150px" headerText="Control">
                            <h:outputText value="#{vSecurity.control}" />
                        </p:column>
                        <p:column style="width:100px" headerText="Grupo">
                            <h:outputText value="#{vSecurity.grupo}" />
                        </p:column>
                        <p:column style="width:100px" headerText="Usuario">
                            <h:outputText value="#{vSecurity.usuario}" />
                        </p:column>
                        <p:column style="width:70px; text-align:center;" headerText="Activo">
                            <p:selectBooleanCheckbox value="#{vSecurity.activo}" />
                        </p:column>                        
                    </p:dataTable>
                </p:panel>
            </h:form>
        </p:dialog>

          <!--******************************************************************** 
        ***************** Pantalla mantenimiento de Personal       ***************
        *********************************************************************-->

        <p:dialog  id="dlgPersonal" widgetVar="wPersonal" modal="true" 
                   width="600" height="445" closable="false" resizable="false" 
                   header="Control de Personal" rendered="true" 
                   dynamic="false" visible="false" 
                   >

            <h:form id="frmPersonal"> 
                <p:growl id="msgPersonal" showDetail="true" life="6500"/>
                <p:toolbar>
                    <f:facet name="left">
                        <p:commandButton value="Nuevo" style=" width: 100px;"
                                         actionListener="#{manPersonas.nuevo()}"
                                         update=":frmPersonal"
                                         icon="ui-icon-document"
                                         />
                        <p:commandButton value="Guardar" style=" width: 100px;"
                                         actionListener="#{manPersonas.guardar()}"
                                         update=":frmPersonal"
                                         icon="ui-icon-disk"
                                         > 
                            <p:confirm header="Guardar Registro" 
                                       message="¿Realmente desea Guardar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Eliminar" style=" width: 100px;"
                                         actionListener="#{manPersonas.eliminar()}"
                                         update=":frmPersonal"
                                         icon="ui-icon-trash"
                                         >
                            <p:confirm header="Eliminar Registro" 
                                       message="¿Realmente desea eliminar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Cerrar" style=" width: 100px;"
                                         onclick="PF('wPersonal').hide()"
                                         actionListener="#{manPersonas.cerrarventana()}"
                                         update=":frmPersonal"
                                         icon="ui-icon-close"
                                         />
                        <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                            <p:commandButton value="Sí" type="button" 
                                             styleClass="ui-confirmdialog-yes" 
                                             icon="ui-icon-check" />
                            <p:commandButton value="No" type="button" 
                                             styleClass="ui-confirmdialog-no" 
                                             icon="ui-icon-close" />
                        </p:confirmDialog>
                    </f:facet>
                </p:toolbar>

                <p:panel>
                    <div style=" background-color: #D4DEDF;">
                        <p:focus for="txtnombreper" />
                        <h:panelGrid columns="2" cellpadding="5">
                            <h:outputText value="Nombres" style="font-weight:bold;"/>
                            <h:panelGroup>
                                <p:inputText id="txtnombreper" 
                                         size="35"
                                         maxlength="30"
                                         value="#{manPersonas.nombres}"
                                         onfocus="this.select()"
                                         />
                                <p:spacer width="20"/>
                                <h:outputText value="Apellidos" style="font-weight:bold;"/>
                                <p:spacer width="10"/>
                                <p:inputText id="txtapellidosper" 
                                         size="35"
                                         maxlength="30"
                                         value="#{manPersonas.apellidos}"
                                         onfocus="this.select()"
                                         />
                            </h:panelGroup>
                            <h:outputText value="Dirección" style="font-weight:bold;"/>
                            <p:inputText id="txtdireccionper" 
                                         size="90"
                                         maxlength="150"
                                         value="#{manPersonas.direccion}"
                                         onfocus="this.select()"
                                         />
                            <h:outputText value="Teléfono" style="font-weight:bold;"/>
                            <h:panelGroup>
                                <p:inputText id="txttelefonoper" 
                                             size="10"
                                             maxlength="8"
                                             value="#{manPersonas.telefono}"
                                             onfocus="this.select()"
                                             />
                                <p:spacer width="10"/>
                                <h:outputText value="Celular" style="font-weight:bold;"/>
                                <p:spacer width="10"/>
                                <p:inputText id="txtcelularper" 
                                             size="10"
                                             maxlength="8"
                                             value="#{manPersonas.celular}"
                                             onfocus="this.select()"
                                             />
                                <p:spacer width="10"/>
                                <h:outputText value="E-Mail" style="font-weight:bold;"/>
                                <p:spacer width="10"/>
                                <p:inputText id="txtemailper" 
                                             size="40"
                                             maxlength="50"
                                             value="#{manPersonas.email}"
                                             onfocus="this.select()"
                                             />
                            </h:panelGroup>
                            <h:outputText value="Dui" style="font-weight:bold;"/>
                            <h:panelGroup>
                                <p:inputText id="txtduiper" 
                                             size="12"
                                             maxlength="10"
                                             value="#{manPersonas.dui}"
                                             onfocus="this.select()"
                                             />
                                <p:spacer width="10"/>
                                <h:outputText value="Nit" style="font-weight:bold;"/>
                                <p:spacer width="10"/>
                                <p:inputText id="txtnitper" 
                                             size="16"
                                             maxlength="14"
                                             value="#{manPersonas.nit}"
                                             onfocus="this.select()"
                                             />
                                <p:spacer width="10"/>
                                <h:outputText value="ISSS" style="font-weight:bold;"/>
                                <p:spacer width="12"/>
                                <p:inputText id="txtisssper" 
                                             size="20"
                                             maxlength="20"
                                             value="#{manPersonas.isss}"
                                             onfocus="this.select()"
                                             />
                            </h:panelGroup>
                            <h:outputText value="Cargo" style="font-weight:bold;"/>
                            <h:panelGroup>
                                <p:selectOneMenu value="#{manPersonas.id_car}" 
                                    style="width:180px;text-align:right;"
                                    immediate="false"
                                    >  
                                    <f:selectItem itemLabel="Seleccione Uno" itemValue="0" />  
                                    <f:selectItems value="#{manPersonas.cargos}" var="mpercar"
                                        itemLabel="#{mpercar.des_car}" itemValue="#{mpercar.id_car}"/>
                                </p:selectOneMenu>
                                <p:spacer width="20"/>
                                <h:outputText value="Usuario" style="font-weight:bold;"/>
                                <p:spacer width="10"/>
                                <p:selectOneMenu value="#{manPersonas.usuario}" 
                                    style="width:180px;text-align:right;"
                                    immediate="false"
                                    >  
                                    <f:selectItem itemLabel="Seleccione Uno" itemValue="0" />  
                                    <f:selectItems value="#{manPersonas.usuarios}" var="mperusu"
                                        itemLabel="#{mperusu.nom_usu}" itemValue="#{mperusu.cod_usu}"/>
                                </p:selectOneMenu>                           
                            </h:panelGroup>
                        </h:panelGrid>
                    </div>
                </p:panel>

                <p:panel>
                    <p:dataTable id="dtPersonal" var="vPersonal" 
                                 value="#{manPersonas.personas}" 
                                 emptyMessage="No se encontraron resultados" 
                                 selectionMode="single" selection="#{manPersonas.catpersonas}" 
                                 rowKey="#{vPersonal.id_per}"
                                 editable="false"
                                 scrollable="true"
                                 scrollHeight="150"
                                 style="width:530px"
                                 >
                        <p:ajax event="rowSelect" listener="#{manPersonas.onRowSelect}" 
                                update=":frmPersonal"/>
                        <p:ajax event="rowUnselect"/>

                        <p:column style="width:110px" headerText="Nombres">
                            <h:outputText value="#{vPersonas.nombres}" />
                        </p:column>
                        <p:column style="width:110px" headerText="Apellidos">
                            <h:outputText value="#{vPersonas.apellidos}" />
                        </p:column>
                        <p:column style="width:60px" headerText="Teléfono">
                            <h:outputText value="#{vPersonas.telefono}" />
                        </p:column>
                        <p:column style="width:150px" headerText="E-Mail">
                            <h:outputText value="#{vPersonas.email}" />
                        </p:column>
                        
                    </p:dataTable>
                </p:panel>
            </h:form>
        </p:dialog>
          
          <!--******************************************************************** 
        **************** Pantalla mantenimiento de Cargos **********************
        *********************************************************************-->

        <p:dialog  id="dlgCargo" widgetVar="wCargo" modal="true" 
                   width="460" height="290" closable="false" resizable="false" 
                   header="Mantenimiento de Cargos" rendered="true" 
                   dynamic="false" visible="false" 
                   >

            <h:form id="frmCargo"> 
                <p:growl id="msgCargo" showDetail="true" life="4500"/>
                <p:toolbar>
                    <f:facet name="left">
                        <p:commandButton value="Nuevo" style=" width: 100px;"
                                         actionListener="#{manCargos.nuevo()}"
                                         update=":frmCargo"
                                         icon="ui-icon-document"
                                         />
                        <p:commandButton value="Guardar" style=" width: 100px;"
                                         actionListener="#{manCargos.guardar()}"
                                         update=":frmCargo"
                                         icon="ui-icon-disk"
                                         > 
                            <p:confirm header="Guardar Registro" 
                                       message="¿Realmente desea Guardar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Eliminar" style=" width: 100px;"
                                         actionListener="#{manCargos.eliminar()}"
                                         update=":frmCargo"
                                         icon="ui-icon-trash"
                                         >
                            <p:confirm header="Eliminar Registro" 
                                       message="¿Realmente desea eliminar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Cerrar" style=" width: 100px;"
                                         onclick="PF('wCargo').hide()"
                                         actionListener="#{manCargos.cerrarventana()}"
                                         update=":frmCargo"
                                         icon="ui-icon-close"
                                         />
                        <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                            <p:commandButton value="Sí" type="button" 
                                             styleClass="ui-confirmdialog-yes" 
                                             icon="ui-icon-check" />
                            <p:commandButton value="No" type="button" 
                                             styleClass="ui-confirmdialog-no" 
                                             icon="ui-icon-close" />
                        </p:confirmDialog>
                    </f:facet>
                </p:toolbar>

                <p:panel>
                    <div style=" background-color:  #ebf8fe;">
                        <p:focus for="txtnombrecargo" />
                        <h:panelGrid columns="2" cellpadding="5">
                            <h:outputText value="Nombre" style="font-weight:bold;"/>
                            <p:inputText id="txtnombrecargo" 
                                         size="50"
                                         maxlength="50"
                                         value="#{manCargos.des_car}"
                                         onfocus="this.select()"
                                         />
                        </h:panelGrid>
                    </div>
                </p:panel>

                <p:panel>
                    <p:dataTable id="dtCargo" var="vCargo" 
                                 value="#{manCargos.cargos}" 
                                 emptyMessage="No se encontraron resultados" 
                                 selectionMode="single" selection="#{manCargos.catcargos}" 
                                 rowKey="#{vCargo.id_car}"
                                 editable="false" 
                                 scrollable="true"
                                 scrollHeight="120"
                                 style="width:400px"
                                 >
                        <p:ajax event="rowSelect" listener="#{manCargos.onRowSelect}" 
                                update=":frmCargo"/>
                        <p:ajax event="rowUnselect"/>

                        <p:column style="width:30px" headerText="Id">
                            <h:outputText value="#{vCargo.id_car}" />
                        </p:column>
                        <p:column style="width:300px" headerText="Nombre">
                            <h:outputText value="#{vCargo.des_car}" />
                        </p:column>
                    </p:dataTable>
                </p:panel>
            </h:form>
        </p:dialog>


    </h:body>

</html>
